{"version":3,"file":"js/75.9096e4a9.js","mappings":"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","sources":["webpack://warpnet-frontend/./src/components/ReplyOverlay.vue","webpack://warpnet-frontend/./src/components/ReplyOverlay.vue?4a9a"],"sourcesContent":["<template>\n  <div\n    v-if=\"showReplyOverlay\"\n    class=\"fixed w-full h-full z-10 top-0 left-0 flex items-center justify-center\"\n  >\n    <div\n      class=\"absolute w-full h-full bg-gray-900 opacity-50\"\n      @click=\"$emit('update:showReplyOverlay', false)\"\n    ></div>\n\n    <div\n      class=\"modal-main bg-white mx-auto rounded-lg z-0 overflow-y-auto\"\n      style=\"width:40%\"\n    >\n      <div class=\"pl-1 pr-4 py-1 h-16 border-b-2 border-lightblue\">\n        <div class=\"flex flex-row mt-1 ml-4\">\n          <i\n            @click=\"$emit('update:showReplyOverlay', false)\"\n            class=\"fas fa-times text-blue text-2xl mb-8 mr-6 rounded-full bg-white p-2 px-3 hover:bg-lightblue cursor-pointer\"\n          ></i>\n        </div>\n      </div>\n\n      <div\n        v-if=\"profile\"\n        class=\"border-l-2 border-r-2 border-white flex flex-col\"\n      >\n        <!-- Original TweetBlock -->\n        <div class=\"p-3 flex flex-row\">\n          <div class=\"flex-none mr-4\">\n            <img\n              :src=\"`${profile.avatar || 'default_profile.png'}`\"\n              class=\"h-12 w-12 rounded-full flex-none\"\n              alt=\"Profile avatar\"\n            />\n          </div>\n\n          <div class=\"w-full\">\n            <div class=\"flex items-center w-full\">\n              <p class=\"font-semibold\">{{ tweet.user_id }}</p>\n              <p class=\"text-sm text-dark ml-2\">\n                @{{ tweet.username }}\n              </p>\n              <p class=\"text-sm text-dark ml-2\">Â·</p>\n              <p class=\"text-sm text-dark ml-2\">\n                {{ $filters.timeago(tweet.created_at) }}\n              </p>\n            </div>\n            <p class=\"py-2\" v-linkify>\n              {{ tweet.text }}\n            </p>\n          </div>\n        </div>\n\n        <!-- ReplyBlock -->\n        <div class=\"p-3 flex flex-row\">\n          <div class=\"flex-none mr-4\">\n            <img\n              :src=\"`${profile.avatar || 'default_profile.png'}`\"\n              class=\"h-12 w-12 rounded-full flex-none\"\n              alt=\"User avatar\"\n            />\n          </div>\n\n          <div class=\"w-full mb-2\">\n            <form @submit.prevent=\"sendReply\" class=\"w-full relative\">\n              <textarea\n                v-model=\"text\"\n                placeholder=\"Tweet your reply\"\n                class=\"w-full focus:outline-none mt-3 pb-3\"\n              ></textarea>\n              <div>\n                <i class=\"text-lg text-blue mr-4 far fa-image cursor-pointer\"></i>\n                <i class=\"text-lg text-blue mr-4 fas fa-film cursor-pointer\"></i>\n                <i class=\"text-lg text-blue mr-4 far fa-chart-bar cursor-pointer\"></i>\n                <i class=\"text-lg text-blue mr-4 far fa-smile cursor-pointer\"></i>\n              </div>\n              <button\n                type=\"submit\"\n                class=\"h-10 px-4 text-white font-semibold bg-blue hover:bg-darkblue rounded-full absolute bottom-0 right-0\"\n                :class=\"{'opacity-50 cursor-not-allowed': !text}\"\n                :disabled=\"!text\"\n              >\n                Reply\n              </button>\n            </form>\n          </div>\n        </div>\n        <div>\n          <Tweets :tweets=\"this.replies\" />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapActions } from \"vuex\";\nimport {defineAsyncComponent} from \"vue\";\nexport default {\n  name: \"ReplyOverlay\",\n  components: {\n    Tweets: defineAsyncComponent(() => import('@/components/Tweets.vue'))\n  },\n  props: [\"tweet\", \"showReplyOverlay\", \"profile\"],\n  data() {\n    return {\n      text: \"\",\n      replies: [],\n      repliesCursor: \"\",\n    };\n  },\n  methods: {\n    ...mapActions(\"warpnet\", [\n      \"replyTweet\",\n      \"getReplies\",\n    ]),\n    async sendReply() {\n      await this.replyTweet({\n        rootId: this.tweet.root_id || this.tweet.id,\n        parentId: this.tweet.id,\n        text: this.text\n      });\n      this.$emit(\"update:showReplyOverlay\", false);\n    },\n    handleKeyup(event) {\n      if (event.key === \"Escape\") {\n        this.$emit(\"update:showReplyOverlay\", false);\n      }\n    }\n  },\n  async created() {\n    const repliesRequest = {\n      rootId: this.tweet.root_id || this.tweet.id,\n      parentId: this.tweet.id,\n      limit: 20,\n      cursor:this.repliesCursor,\n    }\n    let repliesTree = await this.getReplies(repliesRequest);\n\n    this.repliesCursor = repliesTree.cursor;\n    for (const node of repliesTree.tree || []) {\n      this.replies.push(node.reply); // TODO build map tree\n    }\n    window.addEventListener(\"keyup\", this.handleKeyup);\n  },\n  beforeDestroy() {\n    window.removeEventListener(\"keyup\", this.handleKeyup);\n  }\n};\n</script>\n","import { render } from \"./ReplyOverlay.vue?vue&type=template&id=85943bbc\"\nimport script from \"./ReplyOverlay.vue?vue&type=script&lang=js\"\nexport * from \"./ReplyOverlay.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["key","class","style","$props","showReplyOverlay","_createElementBlock","_hoisted_1","_createElementVNode","onClick","_cache","$event","_ctx","$emit","_hoisted_2","_hoisted_3","_hoisted_4","profile","_hoisted_5","_hoisted_6","_hoisted_7","src","avatar","alt","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_toDisplayString","tweet","user_id","_hoisted_12","username","_hoisted_13","$filters","timeago","created_at","_hoisted_14","_createTextVNode","text","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","onSubmit","_withModifiers","args","$options","sendReply","$data","placeholder","type","_normalizeClass","disabled","_hoisted_19","_createVNode","_component_Tweets","tweets","replies","_createCommentVNode","name","components","Tweets","defineAsyncComponent","props","data","repliesCursor","methods","mapActions","this","replyTweet","rootId","root_id","id","parentId","handleKeyup","event","created","repliesRequest","limit","cursor","repliesTree","getReplies","node","tree","push","reply","window","addEventListener","beforeDestroy","removeEventListener","__exports__","render"],"sourceRoot":""}