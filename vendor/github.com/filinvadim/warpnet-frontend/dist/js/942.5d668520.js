"use strict";(self["webpackChunkwarpnet_frontend"]=self["webpackChunkwarpnet_frontend"]||[]).push([[942],{5942:function(e,t,l){l.r(t),l.d(t,{default:function(){return P}});var a=l(641),i=l(3751);const o={class:"fixed w-full h-full top-0 left-0 flex items-center justify-center"},r={class:"modal-main bg-white mx-auto rounded-lg z-50 overflow-y-auto no-scrollbar",style:{height:"85%",width:"40%"}},s={class:"pl-1 pr-4 py-1 h-16 border-b-2 border-lightblue"},d={class:"flex flex-row mt-1 ml-4"},n={class:"border-l-2 border-r-2 border-white"},u={class:"relative",style:{height:"200px",display:"block"}},b={key:0,class:"h-full max-h-full"},h=["src"],c={key:1,class:"bg-gray-400 h-full max-h-full"},f={class:"p-3 flex flex-col"},p={style:{"margin-top":"-80px"},class:"relative w-32 h-32 rounded-full mb-6"},g=["src"],k={class:"w-full bg-lightest border-b-2 border-dark mb-6 py-1 px-3"},m={class:"w-full bg-lightest border-b-2 border-dark mb-6 py-1 px-3"},v={class:"w-full bg-lightest border-b-2 border-dark mb-6 py-1 px-3"},w={class:"w-full bg-lightest border-b-2 border-dark mb-24 py-1 px-3"};function y(e,t,l,y,x,L){return(0,a.uX)(),(0,a.CE)("div",o,[(0,a.Lk)("div",{class:"absolute w-full h-full bg-gray-900 opacity-50",onClick:t[0]||(t[0]=(0,i.D$)((t=>e.$emit("update:showEditProfileModal",!1)),["prevent"]))}),(0,a.Lk)("div",r,[(0,a.Lk)("div",s,[(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>L.saveProfile&&L.saveProfile(...e)),class:"rounded-full bg-blue font-bold text-white mt-2 p-1 px-4 relative right-0 float-right focus:outline-none hover:bg-darkblue"}," Save "),(0,a.Lk)("div",d,[(0,a.Lk)("i",{onClick:t[2]||(t[2]=t=>e.$emit("update:showEditProfileModal",!1)),class:"fas fa-times text-blue text-2xl mb-8 mr-6 rounded-full bg-white p-2 px-3 hover:bg-lightblue cursor-pointer"}),t[11]||(t[11]=(0,a.Lk)("p",{class:"text-xl pt-1 font-bold"},"Edit profile",-1))])]),(0,a.Lk)("div",n,[(0,a.Lk)("div",u,[t[13]||(t[13]=(0,a.Lk)("div",{class:"absolute w-full max-w-full h-full max-h-full bg-gray-600 opacity-50"},null,-1)),(0,a.Lk)("button",{onClick:t[4]||(t[4]=e=>L.openFileInput("backgroundFileInput")),class:"absolute hover:bg-gray-800 p-3 rounded-full",style:{"margin-left":"45%","margin-top":"80px"}},[t[12]||(t[12]=(0,a.Lk)("i",{class:"text-2xl fas fa-camera text-white"},null,-1)),(0,a.Lk)("input",{onChange:t[3]||(t[3]=e=>L.fileChange("backgroundFileInput","background_image")),ref:"backgroundFileInput",accept:"image/*",type:"file",class:"hidden"},null,544)]),x.background_image?((0,a.uX)(),(0,a.CE)("div",b,[(0,a.Lk)("img",{src:x.background_image,class:"h-full w-full object-cover",alt:"Background"},null,8,h)])):(0,a.Q3)("",!0),x.background_image?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",c))]),(0,a.Lk)("div",f,[(0,a.Lk)("div",p,[t[15]||(t[15]=(0,a.Lk)("div",{class:"absolute w-32 h-32 rounded-full bg-gray-600 opacity-50 border-4 border-white"},null,-1)),(0,a.Lk)("button",{onClick:t[6]||(t[6]=e=>L.openFileInput("imageUrlFileInput")),class:"absolute hover:bg-gray-800 p-3 rounded-full ml-10 mt-10"},[t[14]||(t[14]=(0,a.Lk)("i",{class:"text-2xl fas fa-camera text-white"},null,-1)),(0,a.Lk)("input",{onChange:t[5]||(t[5]=e=>L.fileChange("imageUrlFileInput","avatar")),ref:"imageUrlFileInput",accept:"image/*",type:"file",class:"hidden"},null,544)]),(0,a.Lk)("img",{src:x.avatar,class:"w-32 h-32 rounded-full border-4 border-white",alt:"Avatar"},null,8,g)]),(0,a.Lk)("div",k,[t[16]||(t[16]=(0,a.Lk)("label",{class:"text-dark",for:"username"},"Name",-1)),(0,a.bo)((0,a.Lk)("input",{id:"username","onUpdate:modelValue":t[7]||(t[7]=e=>x.username=e),class:"w-full bg-lightest text-lg focus:outline-none",type:"text",required:""},null,512),[[i.Jo,x.username,void 0,{trim:!0}]])]),(0,a.Lk)("div",m,[t[17]||(t[17]=(0,a.Lk)("label",{class:"text-dark",for:"bio"},"Bio",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"bio","onUpdate:modelValue":t[8]||(t[8]=e=>x.bio=e),class:"w-full bg-lightest text-lg focus:outline-none",placeholder:"Add your bio"},null,512),[[i.Jo,x.bio,void 0,{trim:!0}]])]),(0,a.Lk)("div",v,[t[18]||(t[18]=(0,a.Lk)("label",{class:"text-dark",for:"website"},"Website",-1)),(0,a.bo)((0,a.Lk)("input",{id:"website","onUpdate:modelValue":t[9]||(t[9]=e=>x.website=e),class:"w-full bg-lightest text-lg focus:outline-none",type:"url",placeholder:"Add your website"},null,512),[[i.Jo,x.website,void 0,{trim:!0}]])]),(0,a.Lk)("div",w,[t[19]||(t[19]=(0,a.Lk)("label",{class:"text-dark",for:"birthdate"},"Birth date",-1)),(0,a.bo)((0,a.Lk)("input",{id:"birthdate","onUpdate:modelValue":t[10]||(t[10]=e=>x.birthdate=e),class:"w-full bg-lightest text-lg focus:outline-none",type:"date",placeholder:"Add your birth date"},null,512),[[i.Jo,x.birthdate]])])])])])])}var x=l(5093),L=l.n(x),_=l(1787),I={name:"EditProfileOverlay",props:{showEditProfileModal:Boolean},data(){return{profile:{},username:void 0,background_image:void 0,avatar:void 0,bio:void 0,website:void 0,birthdate:void 0}},methods:{handleKeyup(e){"Escape"===e.key&&this.$emit("update:showEditProfileModal",!1)},openFileInput(e){this.$refs[e].click()},async fileChange(e,t){const l=this.$refs[e].files[0],a=new FileReader;a.readAsDataURL(l),a.onload=()=>this[t]=a.result,a.onerror=e=>alert(e)},async saveProfile(){const e={username:this.username,avatar_key:"",background_image_key:"",bio:this.bio,website:this.website,birthdate:this.birthdate?L()(this.birthdate,"YYYY-MM-DD").format("YYYY-MM-DD"):null};e.avatar_key=await _.n.uploadImage(this.avatar),e.background_image_key=await _.n.uploadImage(this.background_image),this.profile=await _.n.editMyProfile(e),this.background_image=await _.n.getImage({userId:this.profile.id,key:this.profile.background_image_key}),this.avatar=await _.n.getImage({userId:this.profile.id,key:this.profile.avatar_key}),this.$emit("update:showEditProfileModal",!1)}},mounted(){window.addEventListener("keyup",this.handleKeyup)},beforeUnmount(){window.removeEventListener("keyup",this.handleKeyup)},async created(){console.log("loading component:",this.$options.name),console.log(this.$options.name),this.profile=_.n.getOwnerProfile(),this.username=this.profile.username,this.background_image=await _.n.getImage({userId:this.profile.id,key:this.profile.background_image_key}),this.avatar=await _.n.getImage({userId:this.profile.id,key:this.profile.avatar_key}),this.bio=this.profile.bio,this.website=this.profile.website,this.birthdate=this.profile.birthdate}},C=l(6262);const E=(0,C.A)(I,[["render",y],["__scopeId","data-v-5c4c2450"]]);var P=E}}]);
//# sourceMappingURL=942.5d668520.js.map