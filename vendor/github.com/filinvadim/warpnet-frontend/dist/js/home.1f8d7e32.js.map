{"version":3,"file":"js/home.1f8d7e32.js","mappings":"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","sources":["webpack://warpnet-frontend/./src/views/Home.vue","webpack://warpnet-frontend/./src/views/Home.vue?9051"],"sourcesContent":["<template>\n  <div id=\"app\" class=\"flex container h-screen w-full\">\n    <!-- side navigation -->\n    <SideNav />\n\n    <!-- timeline -->\n    <div\n      class=\"w-full h-full overflow-y-scroll no-scrollbar\"\n      v-scroll:bottom=\"loadMore\"\n    >\n      <div\n        class=\"px-5 py-3 border-b border-lighter flex items-center justify-between\"\n      >\n        <h1 class=\"text-xl font-bold\">Home</h1>\n        <button\n            @click=\"toggleInfo\"\n            class=\"fas fa-info-circle text-xl text-blue cursor-pointer hover:bg-lighter\"\n            aria-hidden=\"true\"\n        />\n      </div>\n      <div class=\"px-5 py-3 border-b-8 border-lighter flex\">\n        <div v-if=\"profile\" class=\"flex-none mr-4\">\n          <img\n            :src=\"profile.avatar || 'default_profile.png'\"\n            class=\"flex-none w-12 h-12 rounded-full\"\n\n          />\n        </div>\n        <div class=\"w-full relative\">\n          <textarea\n            v-model=\"tweet.text\"\n            placeholder=\"What's happening?\"\n            class=\"w-full focus:outline-none mt-3 pb-3\"\n          ></textarea>\n          <div v-if=\"imageAttachment\" class=\"relative mt-4 inline-block\">\n            <img\n                :src=\"imageAttachment\"\n                alt=\"Image preview\"\n                class=\"w-32 h-32 object-cover rounded border border-lighter\"\n            />\n            <button\n                @click=\"removeImageAttachment\"\n                type=\"button\"\n                class=\"absolute top-0 right-0 mt-2 mr-2 bg-white bg-opacity-75 rounded-full p-1 hover:bg-red-500\"\n                title=\"Remove image\"\n            >\n              <i class=\"fas fa-times text-red-600 hover:text-white\"></i>\n            </button>\n          </div>\n          <div>\n            <button\n                @click=\"openFileInput('imageUrlFileInput')\"\n                class=\"text-lg text-blue mr-4 far fa-image\"\n            >\n              <input\n                  @change=\"fileChange('imageUrlFileInput')\"\n                  ref=\"imageUrlFileInput\"\n                  accept=\"image/*\"\n                  type=\"file\"\n                  class=\"hidden\"\n              />\n            </button>\n            <i class=\"text-lg text-blue mr-4 fas fa-film cursor-not-allowed\"></i>\n            <i class=\"text-lg text-blue mr-4 far fa-chart-bar cursor-not-allowed\"></i>\n            <i class=\"text-lg text-blue mr-4 far fa-smile cursor-not-allowed\"></i>\n          </div>\n          <button\n            @click=\"addNewTweet\"\n            type=\"button\"\n            class=\"h-10 px-4 text-white font-semibold bg-blue hover:bg-darkblue rounded-full absolute bottom-0 right-0\"\n            :class=\"tweet.text ? '' : 'opacity-50 cursor-not-allowed'\"\n          >\n            Tweet\n          </button>\n        </div>\n      </div>\n\n      <!-- timeline -->\n      <Loader :loading=\"loading\" />\n      <div\n        v-if=\"!loading && timeline.length === 0\"\n        class=\"flex flex-col items-center justify-center w-full pt-10 px-6\"\n      >\n        <p class=\"font-bold text-lg\">Welcome to Warpnet!</p>\n        <p class=\"text-sm text-dark text-center\">\n          This is the best place to see what's happening in your world. Find\n          some people and topics to follow now.\n        </p>\n        <button\n          class=\"text-white bg-blue rounded-full font-semibold mt-4 px-4 py-2 hover:bg-darkblue\"\n        >\n          <p class=\"hidden lg:block\">Let's go!</p>\n          <i class=\"fas fa-plus lg:hidden\"></i>\n        </button>\n      </div>\n      <Tweets :tweets=\"timeline\" />\n    </div>\n    <InfoOverlay\n        :visible=\"showInfo\"\n        :content=\"infoContent\"\n        :position=\"infoPosition\"\n    />\n    <!-- default right bar -->\n    <DefaultRightBar />\n  </div>\n</template>\n\n<script>\nimport {defineAsyncComponent} from \"vue\";\nimport {warpnetService} from \"@/service/service\";\n\nexport default {\n  name: \"Home\",\n  components: {\n    SideNav: defineAsyncComponent(() => import('@/components/SideNav.vue')),\n    DefaultRightBar: defineAsyncComponent(() => import('@/components/DefaultRightBar.vue')),\n    Tweets: defineAsyncComponent(() => import('@/components/Tweets.vue')),\n    Loader: defineAsyncComponent(() => import('@/components/Loader.vue')),\n    InfoOverlay: defineAsyncComponent(() => import('@/components/InfoOverlay.vue')),\n  },\n  data() {\n    return {\n      tweet: {\n        text: \"\",\n        root_id: \"\",\n        image_key: \"\",\n      },\n      loading: true,\n      profile: {},\n      timeline: [],\n      showInfo: false,\n      infoContent: '',\n      infoPosition: { top: '0px', left: '0px' },\n      imageAttachment: undefined,\n      videoAttachment: undefined,\n    };\n  },\n  methods: {\n    openFileInput(ref) {\n      this.$refs[ref].click();\n    },\n    async fileChange(ref) {\n      const file = this.$refs[ref].files[0];\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => this.imageAttachment = reader.result;\n      reader.onerror = (error) => {\n        console.error(\"Error reading file\", error);\n        alert('Error reading file');\n      };\n    },\n    async removeImageAttachment() {\n      this.imageAttachment = undefined\n    },\n    async addNewTweet() {\n      if (!this.tweet.text) return;\n      if (this.imageAttachment) {\n        this.tweet.image_key = await warpnetService.uploadImage(this.imageAttachment)\n      }\n\n      await warpnetService.createTweet({text: this.tweet.text, imageKey: this.tweet.image_key});\n\n      this.tweet.text = \"\";\n      this.tweet.image_key = \"\";\n      this.imageAttachment = undefined;\n\n      this.timeline = await warpnetService.getMyTimeline(true);\n    },\n    async loadMore() {\n      const timeline = await warpnetService.getMyTimeline(false);\n      this.timeline = this.timeline.concat(timeline);\n    },\n    async toggleInfo(event) {\n      if (this.showInfo) {\n        this.showInfo = false;\n        return;\n      }\n\n      this.infoContent = await this.getInfo();\n\n      const rect = event.target.getBoundingClientRect();\n      this.infoPosition = {\n        top: `${rect.bottom + window.scrollY}px`,\n        left: `${rect.left + window.scrollX}px`,\n      };\n\n      this.showInfo = true;\n    },\n    async getInfo() {\n      return await warpnetService.getNodeInfo();\n    },\n  },\n  async created() {\n    console.log(\"loading component:\", this.$options.name);\n\n    this.profile = warpnetService.getOwnerProfile();\n\n    this.profile.background_image = await warpnetService.getImage(\n        {userId:this.profile.id, key:this.profile.background_image_key},\n    );\n    this.profile.avatar = await warpnetService.getImage(\n        {userId:this.profile.id, key:this.profile.avatar_key},\n    )\n\n    this.timeline = await warpnetService.getMyTimeline(true);\n    this.loading = false;\n  },\n};\n</script>","import { render } from \"./Home.vue?vue&type=template&id=7941bfd1\"\nimport script from \"./Home.vue?vue&type=script&lang=js\"\nexport * from \"./Home.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["id","class","key","_createElementBlock","_hoisted_1","_createVNode","_component_SideNav","_hoisted_2","_createElementVNode","_hoisted_3","onClick","_cache","args","$options","toggleInfo","_hoisted_4","$data","profile","_hoisted_5","src","avatar","_hoisted_6","_createCommentVNode","_hoisted_7","$event","tweet","text","placeholder","imageAttachment","_hoisted_8","alt","_hoisted_9","removeImageAttachment","type","title","openFileInput","onChange","fileChange","ref","accept","addNewTweet","_normalizeClass","_component_Loader","loading","timeline","length","_hoisted_10","_createStaticVNode","_component_Tweets","tweets","loadMore","_component_InfoOverlay","visible","showInfo","content","infoContent","position","infoPosition","_component_DefaultRightBar","name","components","SideNav","defineAsyncComponent","DefaultRightBar","Tweets","Loader","InfoOverlay","data","root_id","image_key","top","left","undefined","videoAttachment","methods","this","$refs","click","file","files","reader","FileReader","readAsDataURL","onload","result","onerror","error","console","alert","warpnetService","uploadImage","createTweet","imageKey","getMyTimeline","concat","event","getInfo","rect","target","getBoundingClientRect","bottom","window","scrollY","scrollX","getNodeInfo","created","log","getOwnerProfile","background_image","getImage","userId","background_image_key","avatar_key","__exports__","render"],"sourceRoot":""}