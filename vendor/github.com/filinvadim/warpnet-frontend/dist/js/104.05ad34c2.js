"use strict";(self["webpackChunkwarpnet_frontend"]=self["webpackChunkwarpnet_frontend"]||[]).push([[104],{5587:function(e,t,s){s.d(t,{A:function(){return w}});var r=s(641);const l={key:0,class:"flex items-center justify-center"};function i(e,t,s,i,a,o){return s.loading?((0,r.uX)(),(0,r.CE)("div",l,t[0]||(t[0]=[(0,r.Lk)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"40px",height:"40px",viewBox:"0 0 40 40","enable-background":"new 0 0 40 40","xml:space":"preserve"},[(0,r.Lk)("path",{opacity:"0.2",fill:"#1da1f2",d:"M20.201,5.169c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.946,14.946,14.946\n    s14.946-6.691,14.946-14.946C35.146,11.861,28.455,5.169,20.201,5.169z M20.201,31.749c-6.425,0-11.634-5.208-11.634-11.634\n    c0-6.425,5.209-11.634,11.634-11.634c6.425,0,11.633,5.209,11.633,11.634C31.834,26.541,26.626,31.749,20.201,31.749z"}),(0,r.Lk)("path",{fill:"#1da1f2",d:"M26.013,10.047l1.654-2.866c-2.198-1.272-4.743-2.012-7.466-2.012h0v3.312h0\n    C22.32,8.481,24.301,9.057,26.013,10.047z"},[(0,r.Lk)("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 20 20",to:"360 20 20",dur:"0.5s",repeatCount:"indefinite"})])],-1)]))):(0,r.Q3)("",!0)}var a={name:"Loader",props:["loading"]},o=s(6262);const n=(0,o.A)(a,[["render",i]]);var w=n},5130:function(e,t,s){s.d(t,{A:function(){return f}});var r=s(641),l=s(33);const i={class:"w-full border-b hover:bg-lightest flex flex-col"},a={class:"pt-4 pl-4 flex flex-row"},o={class:"text-sm text-dark"};function n(e,t,s,n,w,d){const u=(0,r.g2)("Tweet");return(0,r.uX)(),(0,r.CE)("div",i,[(0,r.Lk)("div",a,[t[0]||(t[0]=(0,r.Lk)("div",{class:"w-12 mr-4 flex justify-end"},[(0,r.Lk)("i",{class:"text-sm pt-1 fas fa-retweet text-dark"})],-1)),(0,r.Lk)("p",o,(0,l.v_)(w.label),1)]),(0,r.bF)(u,{tweet:s.tweet},null,8,["tweet"])])}var w=s(4075),d=s(6278),u={name:"Retweet",props:{tweet:{type:Object,required:!0}},components:{Tweet:w.A},methods:{...(0,d.i0)("warpnet",["getOwnerProfile"])},data(){return{label:"",profile:{}}},async created(){try{this.profile=await this.getOwnerProfile(),this.profile.id===this.tweet.retweeted_by?this.label="You Retweeted":this.label=`${this.tweet.profile.username} Retweeted`}catch(e){console.error("Error fetching profile:",e)}}},c=s(6262);const p=(0,c.A)(u,[["render",n]]);var f=p},4075:function(e,t,s){s.d(t,{A:function(){return ee}});s(8111),s(1701);var r=s(641),l=s(33);const i={key:0,class:"w-full p-2 pt-1 pb-1 md:p-4 md:pt-2 md:pb-2 border-b hover:bg-lightest flex"},a={class:"flex-none mr-2 md:mr-4 pt-1"},o=["href"],n=["src"],w={class:"w-full"},d={class:"flex items-center w-full"},u={key:0,class:"hidden md:block text-sm text-dark ml-2"},c={class:"flex items-center w-full"},p={class:"font-semibold"},f={class:"hidden md:block text-sm text-dark ml-2"},h={class:"text-sm text-dark ml-2"},k={key:0,class:"text-dark text-xs md:text-sm"},m={class:"pb-2"},x={class:"flex w-full"},v={class:"flex items-center text-sm text-dark w-1/4"},y={key:0},b={class:"flex items-center text-sm text-dark w-1/4"},g={key:0},L={class:"flex items-center text-sm text-dark w-1/4"},C={key:0};function R(e,t,s,R,_,T){const $=(0,r.g2)("ReplyOverlay"),O=(0,r.gN)("linkify");return _.profile?((0,r.uX)(),(0,r.CE)("div",i,[(0,r.Lk)("div",a,[(0,r.Lk)("a",{href:`#/${_.profile.id}`},[(0,r.Lk)("img",{src:`${_.profile.avatar||"default_profile.png"}`,class:"h-12 w-12 rounded-full flex-none"},null,8,n)],8,o)]),(0,r.Lk)("div",w,[(0,r.Lk)("div",d,[s.tweet.retweeted_by?((0,r.uX)(),(0,r.CE)("p",u," @"+(0,l.v_)(s.tweet.retweeted_by)+" "+(0,l.v_)(_.profile.username)+" retweeted: ",1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",c,[(0,r.Lk)("p",p,(0,l.v_)(s.tweet.username),1),(0,r.Lk)("p",f," @"+(0,l.v_)(s.tweet.user_id),1),t[4]||(t[4]=(0,r.Lk)("p",{class:"text-sm text-dark ml-2"},"·",-1)),(0,r.Lk)("p",h,(0,l.v_)(e.$filters.timeago(s.tweet.created_at)),1),t[5]||(t[5]=(0,r.Lk)("i",{class:"fas fa-angle-down text-sm ml-auto text-dark"},null,-1))]),s.tweet.inReplyToUsers&&s.tweet.inReplyToUsers.length>0?((0,r.uX)(),(0,r.CE)("p",k,(0,l.v_)(s.tweet.inReplyToUsers.map((e=>`@${e.id}`)).join(", ")),1)):(0,r.Q3)("",!0),(0,r.bo)(((0,r.uX)(),(0,r.CE)("p",m,[(0,r.eW)((0,l.v_)(s.tweet.text),1)])),[[O]]),(0,r.Lk)("div",x,[(0,r.Lk)("div",v,[(0,r.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>T.replyToTweet&&T.replyToTweet(...e)),class:"mr-2 rounded-full hover:bg-lighter"},t[6]||(t[6]=[(0,r.Lk)("i",{class:"far fa-comment"},null,-1)])),s.tweet.replies>0?((0,r.uX)(),(0,r.CE)("p",y,(0,l.v_)(s.tweet.replies),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",b,[(0,r.Lk)("button",{onClick:t[1]||(t[1]=e=>T.retweet()),class:"mr-2 rounded-full hover:bg-lighter"},[(0,r.Lk)("i",{class:(0,l.C4)("fas fa-retweet "+(s.tweet.retweeted_by?"text-green-500":""))},null,2)]),T.getRetweetsCount(s.tweet.id)>0?((0,r.uX)(),(0,r.CE)("p",g,(0,l.v_)(T.getRetweetsCount(s.tweet.id)),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",L,[(0,r.Lk)("button",{onClick:t[2]||(t[2]=e=>T.like()),class:"mr-2 rounded-full hover:bg-lighter"},[(0,r.Lk)("i",{class:(0,l.C4)("fas fa-heart "+(T.getLikesCount(s.tweet.id)>0?"text-red-600":""))},null,2)]),T.getLikesCount(s.tweet.id)>0?((0,r.uX)(),(0,r.CE)("p",C,(0,l.v_)(T.getLikesCount(s.tweet.id)),1)):(0,r.Q3)("",!0)]),t[7]||(t[7]=(0,r.Lk)("div",{class:"flex items-center text-sm text-dark w-1/4"},[(0,r.Lk)("i",{class:"fas fa-share-square mr-3"})],-1))])]),(0,r.bF)($,{tweet:s.tweet,show:_.showReplyOverlay,"onUpdate:show":t[3]||(t[3]=e=>_.showReplyOverlay=e)},null,8,["tweet","show"])])):(0,r.Q3)("",!0)}var _=s(3751);const T={key:0,class:"fixed w-full h-full z-10 top-0 left-0 flex items-center justify-center"},$={class:"modal-main bg-white mx-auto rounded-lg z-0 overflow-y-auto",style:{width:"40%"}},O={class:"pl-1 pr-4 py-1 h-16 border-b-2 border-lightblue"},E={class:"flex flex-row mt-1 ml-4"},X={key:0,class:"border-l-2 border-r-2 border-white flex flex-col"},Q={class:"p-3 flex flex-row"},A={class:"flex-none mr-4"},M=["src"],N={class:"w-full"},P={class:"flex items-center w-full"},j={class:"font-semibold"},U={class:"text-sm text-dark ml-2"},z={class:"text-sm text-dark ml-2"},q={class:"py-2"},I={class:"p-3 flex flex-row"},K={class:"flex-none mr-4"},B=["src"],D={class:"w-full mb-2"},F=["disabled"];function W(e,t,s,i,a,o){const n=(0,r.gN)("linkify");return s.showReplyOverlay?((0,r.uX)(),(0,r.CE)("div",T,[(0,r.Lk)("div",{class:"absolute w-full h-full bg-gray-900 opacity-50",onClick:t[0]||(t[0]=t=>e.$emit("update:showReplyOverlay",!1))}),(0,r.Lk)("div",$,[(0,r.Lk)("div",O,[(0,r.Lk)("div",E,[(0,r.Lk)("i",{onClick:t[1]||(t[1]=t=>e.$emit("update:showReplyOverlay",!1)),class:"fas fa-times text-blue text-2xl mb-8 mr-6 rounded-full bg-white p-2 px-3 hover:bg-lightblue cursor-pointer"})])]),s.tweet.profile?((0,r.uX)(),(0,r.CE)("div",X,[(0,r.Lk)("div",Q,[(0,r.Lk)("div",A,[(0,r.Lk)("img",{src:`${s.tweet.profile.avatar||"default_profile.png"}`,class:"h-12 w-12 rounded-full flex-none",alt:"Profile avatar"},null,8,M)]),(0,r.Lk)("div",N,[(0,r.Lk)("div",P,[(0,r.Lk)("p",j,(0,l.v_)(s.tweet.profile.id),1),(0,r.Lk)("p",U," @"+(0,l.v_)(s.tweet.profile.username),1),t[4]||(t[4]=(0,r.Lk)("p",{class:"text-sm text-dark ml-2"},"·",-1)),(0,r.Lk)("p",z,(0,l.v_)(e.$filters.timeago(s.tweet.created_at)),1)]),(0,r.bo)(((0,r.uX)(),(0,r.CE)("p",q,[(0,r.eW)((0,l.v_)(s.tweet.text),1)])),[[n]])])]),(0,r.Lk)("div",I,[(0,r.Lk)("div",K,[(0,r.Lk)("img",{src:`${a.profile.avatar||"default_profile.png"}`,class:"h-12 w-12 rounded-full flex-none",alt:"User avatar"},null,8,B)]),(0,r.Lk)("div",D,[(0,r.Lk)("form",{onSubmit:t[3]||(t[3]=(0,_.D$)(((...e)=>o.sendReply&&o.sendReply(...e)),["prevent"])),class:"w-full relative"},[(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>a.text=e),placeholder:"Tweet your reply",class:"w-full focus:outline-none mt-3 pb-3"},null,512),[[_.Jo,a.text]]),t[5]||(t[5]=(0,r.Lk)("div",null,[(0,r.Lk)("i",{class:"text-lg text-blue mr-4 far fa-image cursor-pointer"}),(0,r.Lk)("i",{class:"text-lg text-blue mr-4 fas fa-film cursor-pointer"}),(0,r.Lk)("i",{class:"text-lg text-blue mr-4 far fa-chart-bar cursor-pointer"}),(0,r.Lk)("i",{class:"text-lg text-blue mr-4 far fa-smile cursor-pointer"})],-1)),(0,r.Lk)("button",{type:"submit",class:(0,l.C4)(["h-10 px-4 text-white font-semibold bg-blue hover:bg-darkblue rounded-full absolute bottom-0 right-0",{"opacity-50 cursor-not-allowed":!a.text}]),disabled:!a.text}," Reply ",10,F)],32)])])])):(0,r.Q3)("",!0)])])):(0,r.Q3)("",!0)}var J=s(6278),S={name:"ReplyOverlay",props:{tweet:{type:Object,required:!0},showReplyOverlay:{type:Boolean,required:!0}},data(){return{text:"",profile:{},replies:[]}},methods:{...(0,J.i0)("warpnet",["getProfile","replyTweet"]),async sendReply(){await this.replyTweet({rootId:this.tweet.root_id,parentId:this.tweet.id,text:this.text}),this.$emit("update:showReplyOverlay",!1)},handleKeyup(e){"Escape"===e.key&&this.$emit("update:showReplyOverlay",!1)}},async created(){const e=this.$route.params.id;this.profile=await this.getProfile(e),window.addEventListener("keyup",this.handleKeyup)},beforeDestroy(){window.removeEventListener("keyup",this.handleKeyup)}},V=s(6262);const Y=(0,V.A)(S,[["render",W]]);var G=Y,H={name:"Tweet",props:["tweet"],components:{ReplyOverlay:G},data(){return{profile:{},likesCount:new Map,retweetsCount:new Map,likers:new Map,likersCursor:"",retweeters:new Map,retweetersCursor:"",showReplyOverlay:!1}},async created(){this.profile=await this.getProfile(this.$route.params.id),this.likesCount.set(this.tweet.id,await this.getLikesNum(this.tweet.id)),this.retweetsCount.set(this.tweet.id,await this.getRetweetsNum(this.tweet.id)),this.likers.set(this.tweet.id,await this.getLikers(this.tweet.id,this.likersCursor)),this.retweeters.set(this.tweet.id,await this.getRetweeters(this.tweet.id,this.retweetersCursor))},methods:{...(0,J.i0)("warpnet",["getProfile","likeTweet","unlikeTweet","getLikesNum","getLikers","retweetTweet","unretweetTweet","getRetweetsNum","getRetweeters"]),replyToTweet(){this.showReplyOverlay=!0},async retweet(){let e=0;this.tweet.retweeted?(this.tweet.retweeted=!1,e=await this.unretweetTweet(this.tweet.id).catch((e=>{console.error(`failed to unretweet [${this.tweet.id}]`,e),this.tweet.retweeted=!0}))):(this.tweet.retweeted=!0,e=await this.retweetTweet(this.tweet.id,this.tweet.user_id,this.tweet.username,this.tweet.text).catch((e=>{console.error(`failed to retweet [${this.tweet.id}]`,e),this.tweet.retweeted=!1}))),this.retweetsCount.set(this.tweet.id,e)},async like(){let e=0;this.tweet.liked?(this.tweet.liked=!1,e=await this.unlikeTweet(this.tweet.id).catch((e=>{console.error(`failed to unlike tweet [${this.tweet.id}]`,e),this.tweet.liked=!0}))):(this.tweet.liked=!0,e=await this.likeTweet(this.tweet.id).catch((e=>{console.error(`failed to like tweet [${this.tweet.id}]`,e),this.tweet.liked=!1}))),this.likesCount.set(this.tweet.id,e)},getLikesCount(e){return this.likesCount.get(e)},getRetweetsCount(e){return this.retweetsCount.get(e)}}};const Z=(0,V.A)(H,[["render",R]]);var ee=Z},713:function(e,t,s){var r=s(9565),l=s(9306),i=s(8551),a=s(1767),o=s(9462),n=s(6319),w=o((function(){var e=this.iterator,t=i(r(this.next,e)),s=this.done=!!t.done;if(!s)return n(e,this.mapper,[t.value,this.counter++],!0)}));e.exports=function(e){return i(this),l(e),new w(a(this),{mapper:e})}},1701:function(e,t,s){var r=s(6518),l=s(713),i=s(6395);r({target:"Iterator",proto:!0,real:!0,forced:i},{map:l})}}]);
//# sourceMappingURL=104.05ad34c2.js.map