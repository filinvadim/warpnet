"use strict";(self["webpackChunkwarpnet_frontend"]=self["webpackChunkwarpnet_frontend"]||[]).push([[962],{4039:function(e,t,o){o.d(t,{A:function(){return k}});var r=o(641);const n={class:"hidden md:block w-1/3 h-full border-l border-lighter px-6 py-2 relative min-w-max"};function i(e,t,o,i,l,s){const a=(0,r.g2)("SearchBar"),u=(0,r.g2)("WhoToFollow");return(0,r.uX)(),(0,r.CE)("div",n,[(0,r.bF)(a),(0,r.bF)(u)])}var l=o(6159),s=o(33);const a={class:"w-full rounded-lg bg-lightest my-4"},u=["onClick","src","alt"],c={class:"hidden lg:block ml-4"},f=["onClick"],d={class:"text-left text-sm leading-tight text-dark"},h=["onClick"];function p(e,t,o,n,i,l){return(0,r.uX)(),(0,r.CE)("div",a,[t[0]||(t[0]=(0,r.Lk)("div",{class:"p-3"},[(0,r.Lk)("p",{class:"text-lg font-bold"},"Who to follow")],-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.profiles,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:"w-full flex hover:bg-lighter p-3 border-t border-lighter"},[(0,r.Lk)("img",{onClick:t=>l.pushToProfilePage(e.id),src:e.avatar||"default_profile.png",class:"w-12 h-12 rounded-full cursor-pointer",alt:e.username},null,8,u),(0,r.Lk)("div",c,[(0,r.Lk)("p",{onClick:t=>l.pushToProfilePage(e.id),class:"text-left text-sm font-bold leading-tight cursor-pointer"},(0,s.v_)(e.username),9,f),(0,r.Lk)("p",d,(0,s.v_)(e.id.slice(0,8))+"...",1)]),(0,r.Lk)("button",{onClick:t=>l.follow(e.id),class:"ml-auto text-sm text-blue font-bold px-4 py-1 rounded-full border border-blue m-2"}," Follow ",8,h)])))),128)),t[1]||(t[1]=(0,r.Lk)("button",{class:"p-3 w-full hover:bg-lighter text-left text-blue border-t border-lighter"}," Show More ",-1))])}o(4114),o(8111),o(2489);var w=o(6278),g={name:"WhoToFollow",data(){return{userProfile:void 0,profiles:[],profilesCursor:""}},methods:{...(0,w.i0)("warpnet",["getUsers","getProfile","followUser","unfollowUser"]),async pushToProfilePage(e){this.$router.push({name:"Profile",params:{id:e}})},async follow(e){try{await this.followUser(e)}catch(t){console.error(`failed to follow [${e}]`,t)}},async unfollow(e){try{await this.unfollowUser(e)}catch(t){console.error(`failed to unfollow [${e}]`,t)}}},async created(){try{let e;this.userProfile=await this.getProfile(this.$route.params.id),e="Home"===this.$route.name?this.userProfile.id:this.$route.params.id;const t=await this.getUsers(e,20,this.profilesCursor);this.profiles=t.users.filter((e=>e.id!==this.userProfile.id)),this.profilesCursor=t.cursor}catch(e){console.error("Failed to load who to follow:",e),this.profiles=[]}}},m=o(6262);const b=(0,m.A)(g,[["render",p]]);var v=b,x={name:"DefaultRightBar",components:{SearchBar:l.A,WhoToFollow:v}};const y=(0,m.A)(x,[["render",i]]);var k=y},6159:function(e,t,o){o.d(t,{A:function(){return u}});var r=o(641),n=o(3751);function i(e,t,o,i,l,s){return(0,r.uX)(),(0,r.CE)("div",null,[t[2]||(t[2]=(0,r.Lk)("i",{class:"fas fa-search absolute mt-2 ml-5 text-sm text-light"},null,-1)),(0,r.bo)((0,r.Lk)("input",{class:"pl-12 rounded-full w-full p-2 bg-lighter text-sm mb-4",placeholder:"Search Tweet","onUpdate:modelValue":t[0]||(t[0]=e=>l.query=e),onKeyup:t[1]||(t[1]=(0,n.jR)((e=>s.submit()),["enter"]))},null,544),[[n.Jo,l.query]])])}o(4114);var l={name:"SearchBar",data(){return{query:""}},methods:{submit(){this.$router.push({name:"Search",query:{q:this.query}})}}},s=o(6262);const a=(0,s.A)(l,[["render",i]]);var u=a},4188:function(e,t,o){o.r(t),o.d(t,{default:function(){return S}});var r=o(641),n=o(3751),i=o(33);const l={id:"app",class:"flex container h-screen w-full"},s={class:"w-full h-full overflow-y-scroll no-scrollbar"},a={class:"px-5 py-3 border-b border-lighter flex items-center justify-between"},u={class:"px-5 py-3 border-b-8 border-lighter flex"},c={key:0,class:"flex-none mr-4"},f=["src"],d={class:"w-full relative"},h={key:0,class:"flex flex-col items-center justify-center w-full pt-10 px-6"};function p(e,t,o,p,w,g){const m=(0,r.g2)("SideNav"),b=(0,r.g2)("Loader"),v=(0,r.g2)("Timeline"),x=(0,r.g2)("InfoOverlay"),y=(0,r.g2)("DefaultRightBar"),k=(0,r.gN)("scroll");return(0,r.uX)(),(0,r.CE)("div",l,[(0,r.bF)(m),(0,r.bo)(((0,r.uX)(),(0,r.CE)("div",s,[(0,r.Lk)("div",a,[t[3]||(t[3]=(0,r.Lk)("h1",{class:"text-xl font-bold"},"Home",-1)),(0,r.Lk)("i",{onClick:t[0]||(t[0]=(...e)=>g.toggleInfo&&g.toggleInfo(...e)),class:"fas fa-info-circle text-xl text-blue cursor-pointer","aria-hidden":"true"})]),(0,r.Lk)("div",u,[w.profile?((0,r.uX)(),(0,r.CE)("div",c,[(0,r.Lk)("img",{src:w.profile.avatar||"default_profile.png",class:"flex-none w-12 h-12 rounded-full",alt:"Profile avatar"},null,8,f)])):(0,r.Q3)("",!0),(0,r.Lk)("div",d,[(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>w.tweet.text=e),placeholder:"What's happening?",class:"w-full focus:outline-none mt-3 pb-3"},null,512),[[n.Jo,w.tweet.text]]),t[4]||(t[4]=(0,r.Lk)("div",null,[(0,r.Lk)("i",{class:"text-lg text-blue mr-4 far fa-image"}),(0,r.Lk)("i",{class:"text-lg text-blue mr-4 fas fa-film"}),(0,r.Lk)("i",{class:"text-lg text-blue mr-4 far fa-chart-bar"}),(0,r.Lk)("i",{class:"text-lg text-blue mr-4 far fa-smile"})],-1)),(0,r.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>g.addNewTweet&&g.addNewTweet(...e)),type:"button",class:(0,i.C4)(["h-10 px-4 text-white font-semibold bg-blue hover:bg-darkblue rounded-full absolute bottom-0 right-0",w.tweet.text?"":"opacity-50 cursor-not-allowed"])}," Tweet ",2)])]),(0,r.bF)(b,{loading:w.loading},null,8,["loading"]),w.loading||0!==w.timeline.length?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",h,t[5]||(t[5]=[(0,r.Fv)('<p class="font-bold text-lg">Welcome to Warpnet!</p><p class="text-sm text-dark text-center"> This is the best place to see what&#39;s happening in your world. Find some people and topics to follow now. </p><button class="text-white bg-blue rounded-full font-semibold mt-4 px-4 py-2 hover:bg-darkblue"><p class="hidden lg:block">Let&#39;s go!</p><i class="fas fa-plus lg:hidden"></i></button>',3)]))),(0,r.bF)(v,{timeline:w.timeline},null,8,["timeline"])])),[[k,g.loadMore,"bottom"]]),(0,r.bF)(x,{visible:w.showInfo,content:w.infoContent,position:w.infoPosition},null,8,["visible","content","position"]),(0,r.bF)(y)])}var w=o(2493),g=o(4039);const m={class:"whitespace-pre-wrap"};function b(e,t,o,n,l,s){return(0,r.uX)(),(0,r.Wv)(r.Im,{to:"body"},[o.visible?((0,r.uX)(),(0,r.CE)("div",{key:0,class:"fixed z-[9999] bg-white text-dark border rounded shadow-lg p-3 text-sm max-w-sm",style:(0,i.Tr)({top:o.position.top,left:o.position.left})},[(0,r.Lk)("pre",m,(0,i.v_)(o.content),1)],4)):(0,r.Q3)("",!0)])}var v={name:"InfoOverlay",props:{visible:Boolean,content:String,position:Object}},x=o(6262);const y=(0,x.A)(v,[["render",b]]);var k=y;function C(e,t,o,n,i,l){const s=(0,r.g2)("Tweet");return(0,r.uX)(),(0,r.CE)("div",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.timeline,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id},[(0,r.bF)(s,{tweet:e},null,8,["tweet"])])))),128))])}var L=o(1820),T={name:"Timeline",props:["timeline","profile","timelineCursor"],components:{Tweet:L.A}};const I=(0,x.A)(T,[["render",C]]);var P=I,F=o(5587),X=o(6278),A={name:"Home",components:{SideNav:w.A,DefaultRightBar:g.A,Timeline:P,Loader:F.A,InfoOverlay:k},data(){return{tweet:{text:"",root_id:""},loading:!0,profile:{},timeline:[],timelineCursor:"",showInfo:!1,infoContent:"",infoPosition:{top:"0px",left:"0px"}}},methods:{...(0,X.i0)("warpnet",["getOwnerProfile","getMyTimeline","createTweet","getNodeInfo"]),async addNewTweet(){if(!this.tweet.text)return;await this.createTweet(this.tweet.text),this.tweet.text="";const e=await this.getMyTimeline(20,this.timelineCursor);this.timeline=e.tweets||[],this.timelineCursor=e.cursor},async loadMore(){const e=await this.getMyTimeline(20,this.timelineCursor);this.timeline=this.timeline.concat(e.tweets||[]),this.timelineCursor=e.cursor},async toggleInfo(e){if(this.showInfo)return void(this.showInfo=!1);const t=await this.getInfo();this.infoContent="string"===typeof t?t:JSON.stringify(t,null,2);const o=e.target.getBoundingClientRect();this.infoPosition={top:`${o.bottom+window.scrollY}px`,left:`${o.left+window.scrollX}px`},this.showInfo=!0},async getInfo(){return await this.getNodeInfo()}},async created(){this.timeline.length>0&&(this.loading=!1),this.profile=await this.getOwnerProfile()||{};const e=await this.getMyTimeline(20,this.timelineCursor);this.timeline=e.tweets||[],this.timelineCursor=e.cursor,this.loading=!1}};const E=(0,x.A)(A,[["render",p]]);var S=E},6319:function(e,t,o){var r=o(8551),n=o(9539);e.exports=function(e,t,o,i){try{return i?t(r(o)[0],o[1]):t(o)}catch(l){n(e,"throw",l)}}},2529:function(e){e.exports=function(e,t){return{value:e,done:t}}},6279:function(e,t,o){var r=o(6840);e.exports=function(e,t,o){for(var n in t)r(e,n,t[n],o);return e}},9462:function(e,t,o){var r=o(9565),n=o(2360),i=o(6699),l=o(6279),s=o(8227),a=o(1181),u=o(5966),c=o(7657).IteratorPrototype,f=o(2529),d=o(9539),h=s("toStringTag"),p="IteratorHelper",w="WrapForValidIterator",g=a.set,m=function(e){var t=a.getterFor(e?w:p);return l(n(c),{next:function(){var o=t(this);if(e)return o.nextHandler();if(o.done)return f(void 0,!0);try{var r=o.nextHandler();return o.returnHandlerResult?r:f(r,o.done)}catch(n){throw o.done=!0,n}},return:function(){var o=t(this),n=o.iterator;if(o.done=!0,e){var i=u(n,"return");return i?r(i,n):f(void 0,!0)}if(o.inner)try{d(o.inner.iterator,"normal")}catch(l){return d(n,"throw",l)}return n&&d(n,"normal"),f(void 0,!0)}})},b=m(!0),v=m(!1);i(v,h,"Iterator Helper"),e.exports=function(e,t,o){var r=function(r,n){n?(n.iterator=r.iterator,n.next=r.next):n=r,n.type=t?w:p,n.returnHandlerResult=!!o,n.nextHandler=e,n.counter=0,n.done=!1,g(this,n)};return r.prototype=t?b:v,r}},2489:function(e,t,o){var r=o(6518),n=o(9565),i=o(9306),l=o(8551),s=o(1767),a=o(9462),u=o(6319),c=o(6395),f=a((function(){var e,t,o,r=this.iterator,i=this.predicate,s=this.next;while(1){if(e=l(n(s,r)),t=this.done=!!e.done,t)return;if(o=e.value,u(r,i,[o,this.counter++],!0))return o}}));r({target:"Iterator",proto:!0,real:!0,forced:c},{filter:function(e){return l(this),i(e),new f(s(this),{predicate:e})}})}}]);
//# sourceMappingURL=home.e1cd1618.js.map