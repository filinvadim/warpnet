(function(){var e={5358:function(e,t,s){var r={"./af":5177,"./af.js":5177,"./ar":1509,"./ar-dz":1488,"./ar-dz.js":1488,"./ar-kw":8676,"./ar-kw.js":8676,"./ar-ly":2353,"./ar-ly.js":2353,"./ar-ma":4496,"./ar-ma.js":4496,"./ar-ps":6947,"./ar-ps.js":6947,"./ar-sa":2682,"./ar-sa.js":2682,"./ar-tn":9756,"./ar-tn.js":9756,"./ar.js":1509,"./az":5533,"./az.js":5533,"./be":8959,"./be.js":8959,"./bg":7777,"./bg.js":7777,"./bm":4903,"./bm.js":4903,"./bn":1290,"./bn-bd":7357,"./bn-bd.js":7357,"./bn.js":1290,"./bo":1545,"./bo.js":1545,"./br":1470,"./br.js":1470,"./bs":4429,"./bs.js":4429,"./ca":7306,"./ca.js":7306,"./cs":6464,"./cs.js":6464,"./cv":3635,"./cv.js":3635,"./cy":4226,"./cy.js":4226,"./da":3601,"./da.js":3601,"./de":7853,"./de-at":6111,"./de-at.js":6111,"./de-ch":4697,"./de-ch.js":4697,"./de.js":7853,"./dv":708,"./dv.js":708,"./el":4691,"./el.js":4691,"./en-au":3872,"./en-au.js":3872,"./en-ca":8298,"./en-ca.js":8298,"./en-gb":6195,"./en-gb.js":6195,"./en-ie":6584,"./en-ie.js":6584,"./en-il":5543,"./en-il.js":5543,"./en-in":9033,"./en-in.js":9033,"./en-nz":9402,"./en-nz.js":9402,"./en-sg":3004,"./en-sg.js":3004,"./eo":2934,"./eo.js":2934,"./es":7650,"./es-do":838,"./es-do.js":838,"./es-mx":7730,"./es-mx.js":7730,"./es-us":6575,"./es-us.js":6575,"./es.js":7650,"./et":3035,"./et.js":3035,"./eu":3508,"./eu.js":3508,"./fa":119,"./fa.js":119,"./fi":527,"./fi.js":527,"./fil":5995,"./fil.js":5995,"./fo":2477,"./fo.js":2477,"./fr":5498,"./fr-ca":6435,"./fr-ca.js":6435,"./fr-ch":7892,"./fr-ch.js":7892,"./fr.js":5498,"./fy":7071,"./fy.js":7071,"./ga":1734,"./ga.js":1734,"./gd":217,"./gd.js":217,"./gl":7329,"./gl.js":7329,"./gom-deva":2124,"./gom-deva.js":2124,"./gom-latn":3383,"./gom-latn.js":3383,"./gu":5050,"./gu.js":5050,"./he":1713,"./he.js":1713,"./hi":3861,"./hi.js":3861,"./hr":6308,"./hr.js":6308,"./hu":609,"./hu.js":609,"./hy-am":7160,"./hy-am.js":7160,"./id":4063,"./id.js":4063,"./is":9374,"./is.js":9374,"./it":8383,"./it-ch":1827,"./it-ch.js":1827,"./it.js":8383,"./ja":3827,"./ja.js":3827,"./jv":9722,"./jv.js":9722,"./ka":1794,"./ka.js":1794,"./kk":7088,"./kk.js":7088,"./km":6870,"./km.js":6870,"./kn":4451,"./kn.js":4451,"./ko":3164,"./ko.js":3164,"./ku":8174,"./ku-kmr":6181,"./ku-kmr.js":6181,"./ku.js":8174,"./ky":8474,"./ky.js":8474,"./lb":9680,"./lb.js":9680,"./lo":5867,"./lo.js":5867,"./lt":5766,"./lt.js":5766,"./lv":9532,"./lv.js":9532,"./me":8076,"./me.js":8076,"./mi":1848,"./mi.js":1848,"./mk":306,"./mk.js":306,"./ml":3739,"./ml.js":3739,"./mn":9053,"./mn.js":9053,"./mr":6169,"./mr.js":6169,"./ms":3386,"./ms-my":2297,"./ms-my.js":2297,"./ms.js":3386,"./mt":7075,"./mt.js":7075,"./my":2264,"./my.js":2264,"./nb":2274,"./nb.js":2274,"./ne":8235,"./ne.js":8235,"./nl":2572,"./nl-be":3784,"./nl-be.js":3784,"./nl.js":2572,"./nn":4566,"./nn.js":4566,"./oc-lnc":9330,"./oc-lnc.js":9330,"./pa-in":9849,"./pa-in.js":9849,"./pl":4418,"./pl.js":4418,"./pt":9834,"./pt-br":8303,"./pt-br.js":8303,"./pt.js":9834,"./ro":4457,"./ro.js":4457,"./ru":2271,"./ru.js":2271,"./sd":1221,"./sd.js":1221,"./se":3478,"./se.js":3478,"./si":7538,"./si.js":7538,"./sk":5784,"./sk.js":5784,"./sl":6637,"./sl.js":6637,"./sq":6794,"./sq.js":6794,"./sr":5719,"./sr-cyrl":3322,"./sr-cyrl.js":3322,"./sr.js":5719,"./ss":6e3,"./ss.js":6e3,"./sv":1011,"./sv.js":1011,"./sw":748,"./sw.js":748,"./ta":1025,"./ta.js":1025,"./te":1885,"./te.js":1885,"./tet":8861,"./tet.js":8861,"./tg":6571,"./tg.js":6571,"./th":5802,"./th.js":5802,"./tk":9527,"./tk.js":9527,"./tl-ph":9231,"./tl-ph.js":9231,"./tlh":1052,"./tlh.js":1052,"./tr":5096,"./tr.js":5096,"./tzl":9846,"./tzl.js":9846,"./tzm":1765,"./tzm-latn":7711,"./tzm-latn.js":7711,"./tzm.js":1765,"./ug-cn":8414,"./ug-cn.js":8414,"./uk":6618,"./uk.js":6618,"./ur":158,"./ur.js":158,"./uz":7609,"./uz-latn":2475,"./uz-latn.js":2475,"./uz.js":7609,"./vi":1135,"./vi.js":1135,"./x-pseudo":4051,"./x-pseudo.js":4051,"./yo":2218,"./yo.js":2218,"./zh-cn":2648,"./zh-cn.js":2648,"./zh-hk":1632,"./zh-hk.js":1632,"./zh-mo":1541,"./zh-mo.js":1541,"./zh-tw":304,"./zh-tw.js":304};function n(e){var t=o(e);return s(t)}function o(e){if(!s.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=o,e.exports=n,n.id=5358},5515:function(e,t,s){"use strict";s.d(t,{m:function(){return l},K:function(){return d}});s(6573),s(8100),s(7936),s(7467),s(4732),s(9577);var r=s(7526),n=s(5380),o=s(8287);function i(){let e=(new Date).getTime(),t="undefined"!==typeof performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(s){let r=16*Math.random();return e>0?(r=(e+r)%16|0,e=Math.floor(e/16)):(r=(t+r)%16|0,t=Math.floor(t/16)),("x"===s?r:3&r|8).toString(16)}))}let a;function l(){a.socket&&"open"===a.socket.readyState?console.log("WebSocket is already connected."):(a.close(),a=d(),a.connect())}function d(){if(!a){let e=window.backendHost,t=window.backendPort,s="ws://"+e+":"+t+"/v1/api/ws";a=new c(s)}return a}class c{constructor(e){this.dh=n.getDiffieHellman("modp14"),this.dh.generateKeys(),this.url=e,this.publicKey=this.dh.getPublicKey(),this.externalPublicKey=null,this.aesKey=null,this.socket=null,this.secretRenew=!1,this.messagesMap=new Map([["",{}]])}splitMessage(e){let t=e.split(":");return 2!==t.length&&(console.error("error response:",e),alert(e)),t}async deriveKey(e,t){const s=await crypto.subtle.importKey("raw",e,"HKDF",!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"HKDF",salt:(new TextEncoder).encode(t),info:new Uint8Array,hash:"SHA-256"},s,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])}async encryptMessage(e,t){const s=crypto.getRandomValues(new Uint8Array(12)),n=await crypto.subtle.encrypt({name:"AES-GCM",iv:s},e,(new TextEncoder).encode(t)),i=o.Buffer.from(new Uint8Array(n)),a=o.Buffer.from(s);return`${r.fromByteArray(i)}:${r.fromByteArray(a)}`}async decryptMessage(e,t,s){const r=await crypto.subtle.decrypt({name:"AES-GCM",iv:s},e,t);return(new TextDecoder).decode(r)}async onMessage(e){const t="string"===typeof e.data?e.data:JSON.stringify(e.data),s=o.Buffer.from(t,"base64");if(!this.aesKey){console.log("Websocket received server public key"),this.externalPublicKey=s;const e=u();return await this.computeSecret(e),void console.log("Websocket computed shared secret")}const[r,n]=this.splitMessage(t),i=o.Buffer.from(r,"base64"),a=o.Buffer.from(n,"base64");let l="";try{l=await this.decryptMessage(this.aesKey,i,a)}catch(c){return void console.error("Error decrypting message:",c.message)}console.debug(`<<< RECEIVED MESSAGE: ${l}`);let d=null;try{d=JSON.parse(l)}catch(w){return void console.error("JSON parsing:",l,w.message)}d&&(d.body?d.message_id?(d.body.identity&&!this.secretRenew&&(await this.computeSecret(d.body.identity.token),this.secretRenew=!0,console.log("secret renewed")),this.messagesMap.set(d.message_id,d.body)):console.error("Received no message id for message:",d):console.error("Received invalid message structure - missing data value",l))}onError(e){console.error("WebSocket error:",e)}onClose(){console.log("WebSocket connection closed")}close(){this.socket&&(this.socket.removeEventListener("open",this.onOpen.bind(this)),this.socket.removeEventListener("close",this.onClose.bind(this)),this.socket.removeEventListener("message",this.onMessage.bind(this)),this.socket.removeEventListener("error",this.onError.bind(this)),this.socket.close(),this.socket=null)}async computeSecret(e){const t=this.dh.computeSecret(this.externalPublicKey);this.aesKey=await this.deriveKey(t,e)}connect(){try{this.socket=new WebSocket(this.url),this.socket.addEventListener("open",this.onOpen.bind(this)),this.socket.addEventListener("close",this.onClose.bind(this)),this.socket.addEventListener("message",this.onMessage.bind(this)),this.socket.addEventListener("error",this.onError.bind(this))}catch(e){console.error("Error while connecting WebSocket:",e)}}onOpen(){console.log("WebSocket connection opened"),this.socket.send(this.publicKey.toString("base64")),console.log("Client public key is sent.")}async getResponse(e){while(1){const t=this.messagesMap.get(e);if(t)break;await new Promise((e=>setTimeout(e,1e3)))}let t=this.messagesMap.get(e);return this.messagesMap.delete(e),this.validateResponse(t)}validateResponse(e){return e&&e.code&&500===e.code&&console.error(e.message),e}async sendMessage(e){let t=i();e.message_id=t;let s=JSON.stringify(e);if(console.debug("SENDING MESSAGE >>> :",s),!this.aesKey)return void console.log("Sending message: not authenticated!");if(this.socket.readyState!==WebSocket.OPEN)return void console.error("WebSocket is not open");const r=await this.encryptMessage(this.aesKey,s);return await this.socket.send(r),this.messagesMap.set(t,null),t}}function u(){const e=new Date;return e.toISOString().split("T")[0]}},8509:function(e,t,s){"use strict";var r=s(3751),n=s(641);const o={id:"app",class:"w-full h-full"};function i(e,t,s,r,i,a){const l=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",o,[((0,n.uX)(),(0,n.Wv)(l,{key:e.$route.fullPath}))])}var a={name:"App"},l=s(6262);const d=(0,l.A)(a,[["render",i]]);var c=d,u=(s(4114),s(5220)),w=s(33);const p={class:"flex w-full h-screen flex-col-reverse md:flex-row"},g={class:"flex w-full md:w-1/2 h-full"},f={class:"flex items-center justify-center w-full h-full"},h={class:"w-full md:w-1/2 flex flex-col font-bold p-5 md:p-0"},m={key:0,class:"fixed w-full h-full top-0 left-0 flex items-center justify-center"},y={class:"modal-main bg-white w-11/12 max-w-md mx-auto rounded-lg z-50 overflow-y-auto max-h-full"},b={key:0},v={class:"pl-1 pr-4 py-1 h-12"},I={class:"pt-5 px-8"},k={class:"w-full bg-lightblue border-b-2 border-dark mb-8 p-2"},_={key:1},x={class:"pl-1 pr-4 py-1 h-12"},j={class:"pt-5 px-8"},S={class:"mt-5 mb-8"},L={class:"flex justify-between items-top"},O={class:"mt-5 mb-8"},$={class:"flex justify-between items-top"},M={class:"mt-5 mb-5"},N={class:"flex justify-between items-top"},R={key:2},C={class:"pl-1 pr-4 py-1 h-12"},U={class:"pt-5 px-8"},P={class:"w-full bg-lightblue border-b-2 border-dark p-2"},E=["type"],D={key:3},T={class:"pl-1 pr-4 py-1 h-12"},A={class:"pt-5 px-8"},F={key:1,class:"w-full rounded-full mt-4 py-3"};function K(e,t,s,o,i,a){const l=(0,n.g2)("LogInComponent"),d=(0,n.g2)("ProgressBar"),c=(0,n.gN)("escape");return(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",p,[t[37]||(t[37]=(0,n.Fv)('<div class="flex w-full md:w-1/2 h-full bg-blue p-5 md:p-0"><div class="flex items-center justify-center w-full h-full"><div class="flex flex-col"><div class="flex items-center"><i class="fas fa-search text-white text-2xl mr-5"></i><p class="text-white font-bold text-xl">Follow your interests.</p></div><div class="flex items-center mt-10"><i class="fas fa-user-friends text-white text-2xl mr-4"></i><p class="text-white font-bold text-xl"> Hear what people are talking about. </p></div><div class="flex items-center mt-10"><i class="fas fa-comment text-white text-2xl mr-5"></i><p class="text-white font-bold text-xl">Join the conversation.</p></div></div></div></div>',1)),(0,n.Lk)("div",g,[(0,n.Lk)("div",f,[(0,n.Lk)("div",h,[t[15]||(t[15]=(0,n.Lk)("p",{class:"text-3xl mb-12"}," Dive deep into the Warp and see what happens... ",-1)),t[16]||(t[16]=(0,n.Lk)("p",null,"Join Warpnet today.",-1)),i.isFirstRun?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:t[0]||(t[0]=(0,r.D$)((e=>a.setSignUpStep("step1")),["prevent"])),class:"rounded-full bg-blue font-bold text-lg text-white mt-4 p-3 hover:bg-darkblue"}," Sign up ")):((0,n.uX)(),(0,n.Wv)(l,{key:1}))])])]),""!==i.showModal?((0,n.uX)(),(0,n.CE)("div",m,[(0,n.Lk)("div",{class:"absolute w-full h-full bg-gray-900 opacity-50",onClick:t[1]||(t[1]=(0,r.D$)((e=>a.setSignUpStep("")),["prevent"]))}),(0,n.Lk)("div",y,["step1"===i.showModal?((0,n.uX)(),(0,n.CE)("div",b,[(0,n.Lk)("div",v,[(0,n.Lk)("button",{onClick:t[2]||(t[2]=e=>a.setSignUpStep("step2")),class:(0,w.C4)(["rounded-full bg-blue font-bold text-white mt-2 p-1 pl-3 pr-3 relative right-0 float-right hover:bg-darkblue",""+(i.username?"":"opacity-50 cursor-not-allowed")])}," Next ",2),t[17]||(t[17]=(0,n.Lk)("i",{class:"flex justify-center fab text-blue text-2xl mt-2 mb-8"},null,-1))]),(0,n.Lk)("div",I,[t[19]||(t[19]=(0,n.Lk)("div",{class:"flex justify-between items-center pb-8"},[(0,n.Lk)("p",{class:"text-2xl font-bold"},"Create your account")],-1)),(0,n.Lk)("div",k,[t[18]||(t[18]=(0,n.Lk)("p",{class:"text-dark"},"Username",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>i.username=e),class:"w-full bg-lightblue text-lg",type:"text"},null,512),[[r.Jo,i.username]])])])])):(0,n.Q3)("",!0),"step2"===i.showModal?((0,n.uX)(),(0,n.CE)("div",_,[(0,n.Lk)("div",x,[(0,n.Lk)("button",{onClick:t[4]||(t[4]=e=>a.setSignUpStep("step1")),class:"absolute rounded-full p-2 pl-3 hover:bg-lightblue"},t[20]||(t[20]=[(0,n.Lk)("i",{class:"fas fa-arrow-left text-blue"},null,-1)])),i.userResponsibility&&i.localStorageLoss&&i.futureAds?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:t[5]||(t[5]=e=>a.setSignUpStep("step3")),class:"rounded-full bg-blue font-bold text-white mt-2 p-1 pl-3 pr-3 relative right-0 float-right hover:bg-darkblue"}," Next ")):(0,n.Q3)("",!0),t[21]||(t[21]=(0,n.Lk)("i",{class:"flex justify-center fab text-blue text-2xl mt-2 mb-8"},null,-1))]),(0,n.Lk)("div",j,[t[28]||(t[28]=(0,n.Lk)("div",{class:"flex justify-between items-center pb-8"},[(0,n.Lk)("p",{class:"text-2xl font-bold"},"Important information")],-1)),(0,n.Lk)("div",S,[t[23]||(t[23]=(0,n.Lk)("p",{class:"font-bold text-xl mb-1"},"User Responsibility",-1)),(0,n.Lk)("div",L,[t[22]||(t[22]=(0,n.Lk)("p",null," I acknowledge that I am solely responsible for the content I upload to WarpNet. ",-1)),(0,n.bo)((0,n.Lk)("input",{class:"mt-1 ml-2 mr-2",type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=e=>i.userResponsibility=e)},null,512),[[r.lH,i.userResponsibility]])])]),(0,n.Lk)("div",O,[t[25]||(t[25]=(0,n.Lk)("p",{class:"font-bold text-xl mb-1"},"Local Storage Disclaimer",-1)),(0,n.Lk)("div",$,[t[24]||(t[24]=(0,n.Lk)("p",null," I understand that all my data is stored locally on my device, and if I lose access to this device, my WarpNet account will be permanently lost. ",-1)),(0,n.bo)((0,n.Lk)("input",{class:"mt-1 ml-2 mr-2",type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=e=>i.localStorageLoss=e)},null,512),[[r.lH,i.localStorageLoss]])])]),(0,n.Lk)("div",M,[t[27]||(t[27]=(0,n.Lk)("p",{class:"font-bold text-xl mb-1"},"Future Advertising",-1)),(0,n.Lk)("div",N,[t[26]||(t[26]=(0,n.Lk)("p",null," I understand that WarpNet may introduce sponsored content or advertisements in the future. ",-1)),(0,n.bo)((0,n.Lk)("input",{class:"mt-1 ml-2 mr-2",type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=e=>i.futureAds=e)},null,512),[[r.lH,i.futureAds]])])])])])):(0,n.Q3)("",!0),"step3"===i.showModal?((0,n.uX)(),(0,n.CE)("div",R,[(0,n.Lk)("div",C,[(0,n.Lk)("button",{onClick:t[9]||(t[9]=e=>a.setSignUpStep("step2")),class:"absolute rounded-full p-2 pl-3 hover:bg-lightblue"},t[29]||(t[29]=[(0,n.Lk)("i",{class:"fas fa-arrow-left text-blue"},null,-1)])),(0,n.Lk)("button",{onClick:t[10]||(t[10]=e=>a.setSignUpStep("step4")),class:"rounded-full bg-blue font-bold text-white mt-2 p-1 pl-3 pr-3 relative right-0 float-right hover:bg-darkblue"}," Next "),t[30]||(t[30]=(0,n.Lk)("i",{class:"flex justify-center fab text-blue text-2xl mt-2 mb-8"},null,-1))]),(0,n.Lk)("div",U,[t[32]||(t[32]=(0,n.Lk)("div",{class:"flex justify-between items-center pb-4"},[(0,n.Lk)("p",{class:"text-2xl font-bold"},"You'll need a password")],-1)),(0,n.Lk)("div",P,[t[31]||(t[31]=(0,n.Lk)("p",{class:"leading-tight text-dark"},"Password",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>i.password=e),class:"w-full bg-lightblue text-lg",type:""+(i.revealPassword?"text":"password")},null,8,E),[[r.hp,i.password]])]),(0,n.Lk)("button",{onClick:t[12]||(t[12]=e=>i.revealPassword=!i.revealPassword),class:"text-blue pl-2"}," Reveal password ")])])):(0,n.Q3)("",!0),"step4"===i.showModal?((0,n.uX)(),(0,n.CE)("div",D,[(0,n.Lk)("div",T,[(0,n.Lk)("button",{onClick:t[13]||(t[13]=e=>a.setSignUpStep("step3")),class:"absolute rounded-full p-2 pl-3 hover:bg-lightblue"},t[33]||(t[33]=[(0,n.Lk)("i",{class:"fas fa-arrow-left text-blue"},null,-1)])),t[34]||(t[34]=(0,n.Lk)("p",{class:"flex items-start ml-12 p-2 text-xl font-extrabold"}," Step 4 of 5 ",-1))]),(0,n.Lk)("div",A,[t[35]||(t[35]=(0,n.Lk)("div",{class:"flex justify-between items-center pb-8"},[(0,n.Lk)("p",{class:"text-2xl font-bold"},"Create your account")],-1)),t[36]||(t[36]=(0,n.Lk)("p",null,[(0,n.eW)(" By signing up, you agree to our "),(0,n.Lk)("a",{href:"https://github.com/Warp-net/docs/blob/main/legal/T%26C.md",class:"text-blue"},"Terms"),(0,n.eW)(", "),(0,n.Lk)("a",{href:"https://github.com/Warp-net/docs/blob/main/legal/PRIVACY-POLICY.md",class:"text-blue"},"Privacy Policy"),(0,n.eW)(" and ")],-1)),i.isLoading?((0,n.uX)(),(0,n.CE)("div",F,[(0,n.bF)(d)])):((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:t[14]||(t[14]=(...e)=>a.signMeUp&&a.signMeUp(...e)),class:"w-full rounded-full mt-4 py-3 bg-blue text-white font-bold hover:bg-darkblue"}," Sign up "))])])):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0)])),[[c,a.esc]])}var z=s(5515),W=s(1787),H={name:"Root",components:{ProgressBar:(0,n.$V)((()=>s.e(884).then(s.bind(s,3884)))),LogInComponent:(0,n.$V)((()=>s.e(280).then(s.bind(s,6280))))},data(){return{username:"",password:"",revealPassword:!1,isFirstRun:!1,isLoading:!1,showModal:"",userResponsibility:!1,futureAds:!1,localStorageLoss:!1}},mounted(){this.isFirstRun=window.isFirstRun||!1,console.log("Is first run:",this.isFirstRun),(0,z.m)()},methods:{async signMeUp(){try{this.isLoading=!0,await W.n.signInUser({username:this.username,password:this.password}),await this.setStep("step5")}catch(e){alert(e),console.error("error signing up:",e)}finally{this.isLoading=!1,this.$router.push({name:"Home"})}},async setStep(e){this.showModal=e||""},setSignUpStep(e){switch(e){case"step2":if(!this.username)return;break;case"step4":break}this.setStep(e)},esc(){this.setStep(""),this.isLoading=!1}}};const B=(0,l.A)(H,[["render",K]]);var J=B,Q=(s(8111),s(3579),async(e,t,s)=>{const r=e.matched.some((e=>e.meta.protected)),n=W.n.getOwnerProfile();!r||n?s():s("/")});const X=[{path:"/",name:"Root",component:J},{path:"/home",name:"Home",component:()=>s.e(962).then(s.bind(s,4641)),meta:{protected:!0}},{path:"/search",name:"Search",component:()=>Promise.all([s.e(849),s.e(187)]).then(s.bind(s,3479)),meta:{protected:!0}},{path:"/hashtag",name:"Hashtag",component:()=>Promise.all([s.e(849),s.e(541)]).then(s.bind(s,6086)),meta:{protected:!0}},{path:"/notifications",name:"Notifications",component:()=>s.e(893).then(s.bind(s,3125)),meta:{protected:!0}},{path:"/:id/chat/:chatId/messages",name:"Messages",component:()=>s.e(871).then(s.bind(s,5939)),props:!0,meta:{protected:!0}},{path:"/:id/chat",name:"Chats",component:()=>s.e(871).then(s.bind(s,2286)),props:!0,meta:{protected:!0}},{path:"/:id/chat/:chatId",name:"Chat",component:()=>s.e(871).then(s.bind(s,1311)),props:!0,meta:{protected:!0}},{path:"/:id",name:"Profile",component:()=>s.e(138).then(s.bind(s,8548)),meta:{protected:!0}},{path:"/:id/followers",name:"Followers",component:()=>Promise.all([s.e(849),s.e(596)]).then(s.bind(s,6743)),props:!0,meta:{protected:!0}},{path:"/:id/following",name:"Following",component:()=>Promise.all([s.e(849),s.e(856)]).then(s.bind(s,3545)),props:!0,meta:{protected:!0}}],V=(0,u.aE)({history:(0,u.LA)(),routes:X});V.beforeEach(Q);const G=V.push;V.push=function(e,t,s){return t||s?G.call(this,e,t,s):G.call(this,e).catch((e=>(0,u.Pq)(e,u.$c.duplicated)?e:Promise.reject(e)))};var q=V,Y={mounted:function(e,t){"function"===typeof t.value&&(e.__callback__=s=>{27===s.keyCode&&t.value(s,e)},e.addEventListener("keyup",e.__callback__))},unmounted:function(e){e.removeEventListener("keyup",e.__callback__),e.__callback__=null}},Z={mounted:function(e,t){"function"===typeof t.value&&(e.__callback__=s=>{if("top"===t.arg){if(!e)return;const r=0===e.scrollTop;if(!r)return;t.value(s,e)}else if("bottom"===t.arg){if(!e)return;const r=Math.ceil(e.offsetHeight+e.scrollTop)>=e.scrollHeight;if(!r)return;t.value(s,e)}else t.value(s,e)},e.addEventListener("scroll",e.__callback__))},unmounted:function(e){e.removeEventListener("scroll",e.__callback__),e.__callback__=null}},ee=s(5264);s(4028),s(5204);const te={formatHref:{hashtag:e=>`#/hashtag?m=Latest&hash=${Date.now()}&q=${escape("#"+e.substr(1))}`,mention:e=>`#/${e.substr(1)}`},target:(e,t)=>"mention"===t||"hashtag"===t?void 0:"_blank",truncate:25,ignoreTags:["script","style"]};var se={mounted:function(e){let t=e.innerHTML;e.innerHTML=(0,ee.A)(t,te)}},re={install(e){e.directive("escape",Y),e.directive("scroll",Z),e.directive("linkify",se)}},ne=s(5093),oe=s.n(ne);function ie(e){return 0===oe()().diff(e,"days")?oe()(e).fromNow(!0):oe()(e).format("MMM D")}function ae(e){const t=oe()(e),s=oe()().startOf("day"),r=oe()().subtract(1,"day").startOf("day");return t<=r?t.format("MMM D, h:mm A"):t<=s?`Yesterday, ${t.format("h:mm A")}`:t.format("h:mm A")}oe().updateLocale("en",{monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],relativeTime:{past:"%ss",s:"Now",ss:"%ss",m:"%dm",mm:"%dm",h:"%dh",hh:"%dh"}}),oe().updateLocale("en",{monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var le={install(e){e.config.globalProperties.$filters={timeago:ie,time:ae}}};const de=(0,r.Ef)(c);de.config.errorHandler=function(e,t,s){console.error("GLOBAL ERROR HANDLER:",e,s)},de.use(q),de.use(re),de.use(le),de.mount("#app")},1787:function(e,t,s){"use strict";s.d(t,{n:function(){return B}});s(8111),s(2489);var r=s(5515);const n="/public/get/tweet/0.0.0",o="/public/get/tweetstats/0.0.0",i="/private/get/timeline/0.0.0",a="/public/get/tweets/0.0.0",l="/public/post/unlike/0.0.0",d="/private/post/tweet/0.0.0",c="/public/post/reply/0.0.0",u="/public/get/followees/0.0.0",w="/public/get/reply/0.0.0",p="/private/get/admin/stats/0.0.0",g="/private/post/reset/0.0.0",f="/public/delete/reply/0.0.0",h="/private/delete/tweet/0.0.0",m="/private/post/user/0.0.0",y="/public/post/unfollow/0.0.0",b="/public/get/user/0.0.0",v="/public/get/users/0.0.0",I="/public/get/replies/0.0.0",k="/public/get/followers/0.0.0",_="/public/post/follow/0.0.0",x="/public/post/like/0.0.0",j="/public/post/retweet/0.0.0",S="/public/post/unretweet/0.0.0",L="/public/post/chat/0.0.0",O="/private/delete/chat/0.0.0",$="/private/get/chats/0.0.0",M="/private/get/chat/0.0.0",N="/private/get/messages/0.0.0",R="/public/post/message/0.0.0",C="/private/post/image/0.0.0",U="/public/get/image/0.0.0",P="/private/post/login/0.0.0",E="/private/post/logout/0.0.0",D=(0,r.K)();var T={async loginUser(e){let t=await D.sendMessage({path:P,node_id:"None",body:{username:e.username,password:e.password}}),s=await D.getResponse(t);if(!s)throw new Error("authentication failed");if(s&&s.code&&500===s.code)throw new Error(s.message);return s},async logoutUser(e){await D.sendMessage({path:E,node_id:e,body:{}}),D.close()},async getProfile({ownerNodeId:e,userId:t}){let s=await D.sendMessage({path:b,node_id:e,timestamp:(new Date).toISOString(),body:{user_id:t}});return await D.getResponse(s)},async uploadImage({ownerNodeId:e,imgFile:t}){let s=await D.sendMessage({path:C,node_id:e,timestamp:(new Date).toISOString(),body:{file:t}});const r=await D.getResponse(s);return r&&500===r.code?(console.error(r.message),null):r.key},async getImage({ownerNodeId:e,userId:t,key:s}){let r=await D.sendMessage({path:U,node_id:e,timestamp:(new Date).toISOString(),body:{user_id:t,key:s}});const n=await D.getResponse(r);return n&&500===n.code?(console.error(n.message),null):n.file},async getNodeInfo(e){let t=await D.sendMessage({path:p,node_id:e,timestamp:(new Date).toISOString(),body:{}});return await D.getResponse(t)},async resetConsensus(e){let t=await D.sendMessage({path:g,node_id:e,timestamp:(new Date).toISOString(),body:{}});return await D.getResponse(t)},async getUsers({ownerNodeId:e,userId:t,limit:s,cursor:r}){let n=await D.sendMessage({path:v,node_id:e,timestamp:(new Date).toISOString(),body:{limit:s,cursor:r,user_id:t}});return await D.getResponse(n)},async getMyTimeline({ownerNodeId:e,ownerUserId:t,limit:s,cursor:r}){let n=await D.sendMessage({path:i,node_id:e,timestamp:(new Date).toISOString(),body:{limit:s,cursor:r,user_id:t}});return await D.getResponse(n)},async createTweet({ownerNodeId:e,ownerUserId:t,ownerUsername:s,text:r,imageKey:n}){let o=await D.sendMessage({path:d,node_id:e,timestamp:(new Date).toISOString(),body:{user_id:t,username:s,text:r,image_key:n,created_at:(new Date).toISOString()}});return await D.getResponse(o)},async deleteTweet({ownerNodeId:e,userId:t,tweetId:s}){let r=await D.sendMessage({path:h,node_id:e,timestamp:(new Date).toISOString(),body:{user_id:t,tweet_id:s}});return await D.getResponse(r)},async getTweet({ownerNodeId:e,userId:t,tweetId:s}){let r=await D.sendMessage({path:n,node_id:e,timestamp:(new Date).toISOString(),body:{user_id:t,tweet_id:s}});return await D.getResponse(r)},async getTweetStats({ownerNodeId:e,userId:t,tweetId:s}){let r=await D.sendMessage({path:o,node_id:e,timestamp:(new Date).toISOString(),body:{user_id:t,tweet_id:s}});return await D.getResponse(r)},async getTweets({ownerNodeId:e,userId:t,limit:s,cursor:r}){let n=await D.sendMessage({path:a,node_id:e,timestamp:(new Date).toISOString(),body:{limit:s,cursor:r,user_id:t}});return await D.getResponse(n)},async followUser({ownerNodeId:e,ownerUserId:t,profileId:s}){let r=await D.sendMessage({path:_,node_id:e,timestamp:(new Date).toISOString(),body:{followee:s,follower:t}});return await D.getResponse(r)},async unfollowUser({ownerNodeId:e,ownerUserId:t,profileId:s}){let r=await D.sendMessage({path:y,node_id:e,timestamp:(new Date).toISOString(),body:{followee:s,follower:t}});return await D.getResponse(r)},async getFollowers({ownerNodeId:e,userId:t,limit:s,cursor:r}){let n=await D.sendMessage({path:k,node_id:e,timestamp:(new Date).toISOString(),body:{user_id:t,cursor:r,limit:s}});return await D.getResponse(n)},async getFollowing({ownerNodeId:e,userId:t,limit:s,cursor:r}){let n=await D.sendMessage({path:u,node_id:e,timestamp:(new Date).toISOString(),body:{user_id:t,cursor:r,limit:s}});return await D.getResponse(n)},async likeTweet({ownerNodeId:e,ownerUserId:t,userId:s,tweetId:r}){let n=await D.sendMessage({path:x,node_id:e,timestamp:(new Date).toISOString(),body:{user_id:s,tweet_id:r,owner_id:t}});const o=await D.getResponse(n);return o.count},async unlikeTweet({ownerNodeId:e,ownerUserId:t,userId:s,tweetId:r}){let n=await D.sendMessage({path:l,node_id:e,timestamp:(new Date).toISOString(),body:{user_id:s,tweet_id:r,owner_id:t}});const o=await D.getResponse(n);return o.count},async editMyProfile({ownerNodeId:e,newProfile:t}){let s=await D.sendMessage({path:m,node_id:e,timestamp:(new Date).toISOString(),body:{bio:t.bio,avatar:t.avatar,avatar_key:t.avatar_key,username:t.username,background_image:t.background_image,background_image_key:t.background_image_key,website:t.website,birthdate:t.birthdate}});return await D.getResponse(s)},async replyTweet({ownerNodeId:e,ownerUserId:t,rootId:s,parentId:r,parentUserId:n,username:o,text:i}){let a=await D.sendMessage({path:c,node_id:e,timestamp:(new Date).toISOString(),body:{root_id:s,parent_id:r,user_id:t,username:o,parent_user_id:n,text:i,created_at:(new Date).toISOString()}});return await D.getResponse(a)},async getTweetReply({ownerNodeId:e,rootId:t,replyId:s}){let r=await D.sendMessage({path:w,node_id:e,timestamp:(new Date).toISOString(),body:{root_id:t,reply_id:s}});return await D.getResponse(r)},async deleteTweetReply({ownerNodeId:e,userId:t,rootId:s,replyId:r}){let n=await D.sendMessage({path:f,node_id:e,timestamp:(new Date).toISOString(),body:{user_id:t,root_id:s,reply_id:r}});return await D.getResponse(n)},async getReplies({ownerNodeId:e,rootId:t,parentId:s,limit:r,cursor:n}){let o=await D.sendMessage({path:I,node_id:e,timestamp:(new Date).toISOString(),body:{root_id:t,parent_id:s,limit:r,cursor:n}});return await D.getResponse(o)},async retweetTweet({ownerNodeId:e,ownerUserId:t,tweetId:s,userId:r,username:n,text:o}){let i=await D.sendMessage({path:j,node_id:e,timestamp:(new Date).toISOString(),body:{id:s,user_id:r,username:n,text:o,retweeted_by:t,created_at:(new Date).toISOString()}});return await D.getResponse(i)},async unretweetTweet({ownerNodeId:e,ownerUserId:t,tweetId:s}){let r=await D.sendMessage({path:S,node_id:e,timestamp:(new Date).toISOString(),body:{retweeter_id:t,tweet_id:s}});return await D.getResponse(r)},async createChat({ownerNodeId:e,ownerUserId:t,otherUserId:s}){let r=await D.sendMessage({path:L,node_id:e,timestamp:(new Date).toISOString(),body:{owner_id:t,other_user_id:s}});return await D.getResponse(r)},async getChat({ownerNodeId:e,chatId:t}){let s=await D.sendMessage({path:M,node_id:e,timestamp:(new Date).toISOString(),body:{chat_id:t}});return await D.getResponse(s)},async getChats({ownerNodeId:e,ownerUserId:t,limit:s,cursor:r}){let n=await D.sendMessage({path:$,node_id:e,timestamp:(new Date).toISOString(),body:{user_id:t,limit:s,cursor:r}});return await D.getResponse(n)},async deleteChat({ownerNodeId:e,chatId:t}){let s=await D.sendMessage({path:O,node_id:e,timestamp:(new Date).toISOString(),body:{chat_id:t}});return await D.getResponse(s)},async getDirectMessages({ownerNodeId:e,ownerUserId:t,chatId:s,limit:r,cursor:n}){let o=await D.sendMessage({path:N,node_id:e,timestamp:(new Date).toISOString(),body:{owner_id:t,chat_id:s,limit:r,cursor:n}});return await D.getResponse(o)},async sendDirectMessage({ownerNodeId:e,ownerUserId:t,receiverId:s,chatId:r,text:n}){let o=await D.sendMessage({path:R,node_id:e,timestamp:(new Date).toISOString(),body:{sender_id:t,receiver_id:s,chat_id:r,text:n}});return await D.getResponse(o)}},A=s(7583);const F={color:{dark:"#c5007f",light:"#ffffff"}};async function K(e){let t;try{t=await A.toDataURL(e,F),console.log("QR Code Generated:",t)}catch(s){console.error("Error generating QR code:",s)}return t||""}const z=new Map,W=20,H="end",B={reset(){z.clear()},invalidate(e){const t=Array.from(z.keys()).filter((t=>t.startsWith(e)));for(const s of t)z.delete(s)},setQR(e){const t="QR";z.set(t,e)},getQR(){const e="QR";return z.get(e)||""},setCursor(e,t){const s=`${e}::cursor`;z.set(s,t)},getCursor(e){const t=`${e}::cursor`;return z.get(t)||""},setOwnerProfile(e){const t="owner";z.set(t,e)},getOwnerProfile(){const e="owner";return z.get(e)},async signInUser(e){const t=await T.loginUser(e);if(!t||!t.identity)throw new Error("Login failed: no response");if(t.code)throw new Error(t.message);if(!t.identity)throw new Error("Login failed: no identity");const s=JSON.stringify(t);if(t.identity.token=null,!t.identity.owner)return void console.error("Login failed: owner identity not received");const r=await T.getProfile({ownerNodeId:t.identity.owner.node_id,userId:t.identity.owner.user_id});B.setOwnerProfile(r);const n=await K(s);B.setQR(n)},async logoutUser(){const e=this.getOwnerProfile();let t="None";e&&e.node_id&&(t=e.node_id),await T.logoutUser(t),this.reset()},async getProfile(e){const t=`user::${e}`;if(z.has(t))return z.get(t);const s=this.getOwnerProfile(),r=await T.getProfile({ownerNodeId:s.node_id,userId:e});return z.set(t,r),r},async getUsers({profileId:e,cursorReset:t}){console.log("getUsers",e);let s=this.getCursor("users");if(t&&(s=""),s===H)return[];const r=`users::${e}::${W}::${s}`;if(z.has(r))return z.get(r);const n=this.getOwnerProfile(),o=await T.getUsers({ownerNodeId:n.node_id,userId:e,limit:W,cursor:s});if(!o)return[];if(this.setCursor("users",o.cursor||""),!o.users||0===o.users.length)return[];o.users=o.users.filter((t=>t.id!==e));for(const i of o.users)z.set(`user::${i.id}`,i);return z.set(r,o.users),o.users},async getWhoToFollow(e){let t=this.getCursor("whotofollow");if(e&&(t=""),t===H)return[];const s=this.getOwnerProfile();let r=await T.getUsers({ownerNodeId:s.node_id,userId:s.id,limit:W,cursor:t});if(!r)return[];this.setCursor("whotofollow",r.cursor||"");const n=await this.getFollowers({userId:s.id,cursorReset:e});return r.users=r.users.filter((e=>!n.includes(e))),r.users},async uploadImage(e){if(!e)return"";const t=this.getOwnerProfile(),s=await T.uploadImage({ownerNodeId:t.node_id,imgFile:e});if(!s||0===s.length)return"";this.invalidate(`user::${t.id}`);const r=`image::${t.id}::${s}`;return z.set(r,e),s},async getImage({userId:e,key:t}){if(!t||0===t.length)return null;const s=`image::${e}::${t}`;if(z.has(s))return z.get(s);const r=this.getOwnerProfile(),n=await T.getImage({ownerNodeId:r.node_id,userId:e,key:t});return n?(z.set(s,n),n):null},async getMyTimeline(e){let t=this.getCursor("timeline");if(e&&(t=""),console.log("timeline IN CURSOR",t),t===H)return[];const s=`timeline::${W}::${t}`;if(z.has(s))return z.get(s);const r=this.getOwnerProfile(),n=await T.getMyTimeline({ownerNodeId:r.node_id,ownerUserId:r.id,limit:W,cursor:t});return n?(console.log("timeline OUT CURSOR",n.cursor),this.setCursor("timeline",n.cursor||"end"),n.tweets&&0!==n.tweets.length?(z.set(s,n.tweets),n.tweets):[]):[]},async getTweets({userId:e,cursorReset:t}){let s=this.getCursor("tweets");if(t&&(s=""),s===H)return[];const r=`tweets::${e}::${W}::${s}`;if(z.has(r))return z.get(r);const n=this.getOwnerProfile(),o=await T.getTweets({ownerNodeId:n.node_id,userId:e,limit:W,cursor:s});return o?(this.setCursor("tweets",o.cursor||"end"),o.tweets&&0!==o.tweets.length?(z.set(r,o.tweets),o.tweets):[]):[]},async createTweet({text:e,imageKey:t}){const s=this.getOwnerProfile(),r=await T.createTweet({ownerNodeId:s.node_id,ownerUserId:s.id,ownerUsername:s.username,text:e,imageKey:t});this.invalidate("timeline"),this.invalidate(`tweets::${r.user_id}`),this.invalidate(`user::${r.user_id}`);const n=`tweet::${r.user_id}::${r.id}`;return z.set(n,r),r},async deleteTweet({userId:e,tweetId:t}){const s=this.getOwnerProfile(),r=await T.deleteTweet({ownerNodeId:s.node_id,userId:e,tweetId:t});return this.invalidate("timeline"),this.invalidate(`tweets::${e}`),z.delete(`tweet::${e}::${t}`),r},async getTweet({userId:e,tweetId:t}){const s=`tweet::${e}::${t}`;if(z.has(s))return z.get(s);const r=this.getOwnerProfile(),n=await T.getTweet({ownerNodeId:r.node_id,userId:e,tweetId:t});return n?(z.set(s,n),n):null},async followUser(e){const t=this.getOwnerProfile(),s=await T.followUser({ownerNodeId:t.node_id,ownerUserId:t.id,profileId:e});if(!s)return null;const r=`isFollowed::${e}`;return z.set(r,{}),this.invalidate(`followers::${e}`),this.invalidate(`followees::${e}`),this.invalidate(`user::${e}`),this.invalidate(`user::${t.id}`),s},isFollowed(e){const t=`isFollowed::${e}`;return z.has(t)},isFollower(e){const t=`isFollower::${e}`;return z.has(t)},async unfollowUser(e){const t=this.getOwnerProfile(),s=await T.unfollowUser({ownerNodeId:t.node_id,ownerUserId:t.id,profileId:e});return s?(z.delete(`isFollowed::${e}`),this.invalidate(`followers::${e}`),this.invalidate(`followees::${e}`),this.invalidate(`user::${e}`),this.invalidate(`user::${t.id}`),s):null},async getFollowers({userId:e,cursorReset:t}){let s=this.getCursor("followers");if(t&&(s=""),s===H)return[];const r=`followers::${e}::${W}::${s}`;if(z.has(r))return z.get(r);const n=this.getOwnerProfile(),o=await T.getFollowers({ownerNodeId:n.node_id,userId:e,limit:W,cursor:s});if(!o)return[];if(this.setCursor("followers",o.cursor||"end"),!o.followers||0===o.followers.length)return[];o.followers=o.followers.filter((t=>t!==e)),z.set(r,o.followers);for(const i of o.followers||[]){const e=`isFollower::${i}`;z.set(e,{})}return o.followers},async getFollowees({userId:e,cursorReset:t}){let s=this.getCursor("followees");if(t&&(s=""),s===H)return[];const r=`followees::${e}::${W}::${s}`;if(z.has(r))return z.get(r);const n=this.getOwnerProfile(),o=await T.getFollowing({ownerNodeId:n.node_id,userId:e,limit:W,cursor:s});return o?(this.setCursor("followees",o.cursor||"end"),o.followees&&0!==o.followees.length?(o.followees=o.followees.filter((t=>t!==e)),z.set(r,o.followees),o.followees):[]):[]},async getTweetStats(e,t){const s=`tweetstats::${e}`;if(z.has(s))return z.get(s);const r=this.getOwnerProfile(),n=await T.getTweetStats({ownerNodeId:r.node_id,userId:t,tweetId:e});return n?(z.set(s,n),n):null},async replyTweet({rootId:e,parentId:t,parentUserId:s,text:r}){const n=this.getOwnerProfile(),o=await T.replyTweet({ownerNodeId:n.node_id,ownerUserId:n.id,rootId:e,username:n.username,parentId:t,parentUserId:s,text:r});if(!o)return null;const i=`reply::${e}::${o.id}`;return z.set(i,o),this.invalidate(`replies::${e}`),this.invalidate(`tweetstats::${e}`),o},async getReplies({rootId:e,parentId:t,cursorReset:s}){let r=this.getCursor("replies");if(s&&(r=""),r===H)return[];const n=`replies::${e}::${t}::${W}::${r}`;if(z.has(n))return z.get(n);const o=this.getOwnerProfile(),i=await T.getReplies({ownerNodeId:o.node_id,rootId:e,parentId:t,limit:W,cursor:r});return i?(this.setCursor("replies",i.cursor||"end"),i.replies&&0!==i.replies.length?(z.set(n,i.replies),i.replies):[]):[]},async getReply({rootId:e,replyId:t}){const s=`reply::${e}::${t}`;if(z.has(s))return z.get(s);const r=this.getOwnerProfile(),n=await T.getTweetReply({ownerNodeId:r.node_id,rootId:e,replyId:t});return n?(z.set(s,n),n):null},async deleteReply({userId:e,rootId:t,replyId:s}){const r=this.getOwnerProfile(),n=await T.deleteTweetReply({ownerNodeId:r.node_id,userId:e,rootId:t,replyId:s}),o=`reply::${t}::${s}`;return z.delete(o),this.invalidate(`tweetstats::${t}`),this.invalidate(`replies::${t}`),n},async likeTweet(e,t){const s=this.getOwnerProfile(),r=await T.likeTweet({ownerNodeId:s.node_id,ownerUserId:s.id,userId:t,tweetId:e});return this.invalidate(`tweetstats::${e}`),r},async unlikeTweet(e,t){const s=this.getOwnerProfile(),r=await T.unlikeTweet({ownerNodeId:s.node_id,ownerUserId:s.id,userId:t,tweetId:e});return this.invalidate(`tweetstats::${e}`),r},async setLiker(e,t,s){const r=`liker::${e}::${t}`;z.set(r,s)},async hasLiker(e,t){const s=`liker::${e}::${t}`;return z.has(s)},async getLiker(e,t){const s=`liker::${e}::${t}`;return z.get(s)},async deleteLiker(e,t){const s=`liker::${e}::${t}`;z.delete(s)},async retweetTweet({tweetId:e,userId:t,username:s,text:r}){const n=this.getOwnerProfile(),o=await T.retweetTweet({ownerNodeId:n.node_id,ownerUserId:n.id,tweetId:e,userId:t,username:s,text:r});return this.invalidate("timeline"),this.invalidate(`tweetstats::${e}`),o},async unretweetTweet(e){const t=this.getOwnerProfile(),s=await T.unretweetTweet({ownerNodeId:t.node_id,ownerUserId:t.id,tweetId:e});return this.invalidate(`tweetstats::${e}`),s},async setRetweeter(e,t,s){const r=`retweeter::${e}::${t}`;z.set(r,s)},async hasRetweeter(e,t){const s=`retweeter::${e}::${t}`;return z.has(s)},async getRetweeter(e,t){const s=`retweeter::${e}::${t}`;return z.get(s)},async deleteRetweeter(e,t){const s=`retweeter::${e}::${t}`;z.delete(s)},async createChat(e){const t=this.getOwnerProfile(),s=await T.createChat({ownerNodeId:t.node_id,ownerUserId:t.id,otherUserId:e});if(!s)return null;this.invalidate("chats");const r=`chat::${s.id}`;return z.set(r,s),s},async getChat(e){const t=`chat::${e}`;if(z.has(t))return z.get(t);const s=this.getOwnerProfile(),r=await T.getChat({ownerNodeId:s.node_id,chatId:e});return r?(z.set(t,r),r):null},async getChats(e){let t=this.getCursor("chats");if(e&&(t=""),t===H)return[];const s=this.getOwnerProfile(),r=`chats::${s.id}::${W}::${t}`;if(z.has(r))return z.get(r);const n=await T.getChats({ownerNodeId:s.node_id,ownerUserId:s.id,limit:W,cursor:t});if(!n)return[];if(this.setCursor("chats",n.cursor||"end"),!n.chats||0===n.chats.length)return[];for(const o of n.chats)z.set(`chat::${o.id}`,o);return z.set(r,n.chats),n.chats},async sendDirectMessage({chatId:e,receiverId:t,text:s}){const r=this.getOwnerProfile();return await T.sendDirectMessage({ownerNodeId:r.node_id,ownerUserId:r.id,receiverId:t,chatId:e,text:s})},async getDirectMessages({chatId:e,cursorReset:t}){let s=this.getCursor("messages");if(t&&(s=""),s===H)return[];const r=this.getOwnerProfile(),n=`messages::${r.id}::${W}::${s}`,o=await T.getDirectMessages({ownerNodeId:r.node_id,ownerUserId:r.id,chatId:e,limit:W,cursor:s});return o?(this.setCursor("messages",o.cursor||"end"),o.messages&&0!==o.messages.length?(z.set(n,o.messages),o.messages):[]):[]},async editMyProfile(e){const t=this.getOwnerProfile();return await T.editMyProfile({ownerNodeId:t.node_id,newProfile:e})},async resetConsensus(){return await T.resetConsensus("None")},async getNodeInfo(){const e=this.getOwnerProfile();return await T.getNodeInfo(e.node_id)}},J={image:6e6,user:6e4,timeline:6e3,replies:6e3,tweetstats:6e3};function Q(){setInterval((()=>{for(const[e,t]of Object.entries(J)){const s=`${e}::expiration`,r=z.get(s)||{createdAt:0},n=Date.now();n-r.createdAt>t&&(B.invalidate(e),z.set(s,{createdAt:n}))}}),1e3)}Q()},7790:function(){},3776:function(){}},t={};function s(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,s),o.loaded=!0,o.exports}s.m=e,function(){var e=[];s.O=function(t,r,n,o){if(!r){var i=1/0;for(c=0;c<e.length;c++){r=e[c][0],n=e[c][1],o=e[c][2];for(var a=!0,l=0;l<r.length;l++)(!1&o||i>=o)&&Object.keys(s.O).every((function(e){return s.O[e](r[l])}))?r.splice(l--,1):(a=!1,o<i&&(i=o));if(a){e.splice(c--,1);var d=n();void 0!==d&&(t=d)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[r,n,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){s.f={},s.e=function(e){return Promise.all(Object.keys(s.f).reduce((function(t,r){return s.f[r](e,t),t}),[]))}}(),function(){s.u=function(e){return"js/"+({138:"profile",187:"search",541:"hashtag",596:"followers",856:"following",871:"messages",893:"notifications",962:"home"}[e]||e)+"."+{3:"3aafa7af",29:"1dff30dd",138:"daf4121c",187:"786b4ca6",214:"a783c8f9",280:"1dc1fe81",321:"9086759b",382:"65665d7b",394:"44a3cee6",509:"f9805b18",541:"d0a2015b",596:"cc954975",666:"82079647",818:"b0a6b775",849:"605e55a0",856:"50325482",857:"308a453c",871:"bdd92480",884:"6b76e70e",892:"a2fe2be9",893:"2a497525",907:"b7988914",962:"584e3339",985:"1eb0fefa"}[e]+".js"}}(),function(){s.miniCssF=function(e){return"css/"+e+"."+{280:"1b3a5ec5",907:"c1665546"}[e]+".css"}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="warpnet-frontend:";s.l=function(r,n,o,i){if(e[r])e[r].push(n);else{var a,l;if(void 0!==o)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+o){a=u;break}}a||(l=!0,a=document.createElement("script"),a.charset="utf-8",a.timeout=120,s.nc&&a.setAttribute("nonce",s.nc),a.setAttribute("data-webpack",t+o),a.src=r),e[r]=[n];var w=function(t,s){a.onerror=a.onload=null,clearTimeout(p);var n=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach((function(e){return e(s)})),t)return t(s)},p=setTimeout(w.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=w.bind(null,a.onerror),a.onload=w.bind(null,a.onload),l&&document.head.appendChild(a)}}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){s.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,r,n,o){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",s.nc&&(i.nonce=s.nc);var a=function(s){if(i.onerror=i.onload=null,"load"===s.type)n();else{var r=s&&s.type,a=s&&s.target&&s.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+r+": "+a+")");l.name="ChunkLoadError",l.code="CSS_CHUNK_LOAD_FAILED",l.type=r,l.request=a,i.parentNode&&i.parentNode.removeChild(i),o(l)}};return i.onerror=i.onload=a,i.href=t,r?r.parentNode.insertBefore(i,r.nextSibling):document.head.appendChild(i),i},t=function(e,t){for(var s=document.getElementsByTagName("link"),r=0;r<s.length;r++){var n=s[r],o=n.getAttribute("data-href")||n.getAttribute("href");if("stylesheet"===n.rel&&(o===e||o===t))return n}var i=document.getElementsByTagName("style");for(r=0;r<i.length;r++){n=i[r],o=n.getAttribute("data-href");if(o===e||o===t)return n}},r=function(r){return new Promise((function(n,o){var i=s.miniCssF(r),a=s.p+i;if(t(i,a))return n();e(r,a,null,n,o)}))},n={524:0};s.f.miniCss=function(e,t){var s={280:1,907:1};n[e]?t.push(n[e]):0!==n[e]&&s[e]&&t.push(n[e]=r(e).then((function(){n[e]=0}),(function(t){throw delete n[e],t})))}}}(),function(){var e={524:0};s.f.j=function(t,r){var n=s.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var o=new Promise((function(s,r){n=e[t]=[s,r]}));r.push(n[2]=o);var i=s.p+s.u(t),a=new Error,l=function(r){if(s.o(e,t)&&(n=e[t],0!==n&&(e[t]=void 0),n)){var o=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",a.name="ChunkLoadError",a.type=o,a.request=i,n[1](a)}};s.l(i,l,"chunk-"+t,t)}},s.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,o,i=r[0],a=r[1],l=r[2],d=0;if(i.some((function(t){return 0!==e[t]}))){for(n in a)s.o(a,n)&&(s.m[n]=a[n]);if(l)var c=l(s)}for(t&&t(r);d<i.length;d++)o=i[d],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(c)},r=self["webpackChunkwarpnet_frontend"]=self["webpackChunkwarpnet_frontend"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=s.O(void 0,[504],(function(){return s(8509)}));r=s.O(r)})();
//# sourceMappingURL=app.b6044a86.js.map