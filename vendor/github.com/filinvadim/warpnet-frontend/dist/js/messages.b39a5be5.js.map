{"version":3,"file":"js/messages.b39a5be5.js","mappings":"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","sources":["webpack://warpnet-frontend/./src/views/Conversation.vue","webpack://warpnet-frontend/./src/views/Conversation.vue?e9cd","webpack://warpnet-frontend/./src/views/Conversations.vue","webpack://warpnet-frontend/./src/views/Conversations.vue?b98d","webpack://warpnet-frontend/./src/views/Messages.vue","webpack://warpnet-frontend/./src/views/Messages.vue?2e03","webpack://warpnet-frontend/./node_modules/core-js/modules/es.iterator.find.js","webpack://warpnet-frontend/./node_modules/core-js/modules/es.iterator.for-each.js"],"sourcesContent":["<template>\n  <div class=\"flex container h-full w-full\">\n    <SideNav />\n    \n    <div class=\"flex-1 flex flex-col h-full\">\n      <!-- Header -->\n      <div class=\"px-4 py-3 border-b border-lighter flex items-center\">\n        <router-link :to=\"{ name: 'Chats' }\" class=\"mr-4\">\n          <i class=\"fas fa-arrow-left text-xl text-blue\"></i>\n        </router-link>\n        \n        <div v-if=\"chat\" class=\"flex items-center\">\n          <img :src=\"this.otherUser.avatar || 'default_profile.png'\"\n               class=\"w-10 h-10 rounded-full mr-3\" />\n          <div>\n            <p class=\"font-bold\">{{ this.otherUser.username }}</p>\n            <p class=\"text-sm text-dark\">@{{ chat.other_user_id }}</p>\n          </div>\n        </div>\n      </div>\n\n      <!-- Messages -->\n      <div class=\"flex-1 overflow-y-auto p-4\" ref=\"messageContainer\">\n        <div v-if=\"loading\" class=\"flex justify-center\">\n          <Loader :loading=\"loading\" />\n        </div>\n\n        <template v-else>\n          <div v-for=\"message in messages\" :key=\"message.id\" \n               class=\"mb-4 flex\"\n               :class=\"{'justify-end': message.owner_id === currentUserId}\">\n            <div class=\"max-w-3/4 rounded-lg px-4 py-2\"\n                 :class=\"message.owner_id === currentUserId ?\n                        'bg-blue text-white' : 'bg-lighter'\">\n              <p v-linkify>{{ message.content }}</p>\n              <p class=\"text-xs mt-1 text-gray-500\">\n                {{ $filters.timeago(message.created_at) }}\n              </p>\n            </div>\n          </div>\n        </template>\n      </div>\n\n      <!-- Message Input -->\n      <div class=\"border-t border-lighter px-4 py-3\">\n        <form @submit.prevent=\"sendMessage\" class=\"flex\">\n          <input v-model=\"newMessage\" \n                 type=\"text\"\n                 placeholder=\"Type a message...\"\n                 class=\"flex-1 rounded-full border border-lighter px-4 py-2 mr-2\" />\n          <button type=\"submit\" \n                  class=\"bg-blue text-white rounded-full px-6 py-2\">\n            Send\n          </button>\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {mapActions} from 'vuex';\nimport {defineAsyncComponent} from \"vue\";\n\nexport default {\n  name: 'Chat',\n  components: {\n    SideNav: defineAsyncComponent(() => import('../components/SideNav.vue')),\n    Loader: defineAsyncComponent(() => import('../components/Loader.vue')),\n  },\n  data() {\n    return {\n      loading: true,\n      chat: null,\n      messages: [],\n      newMessage: '',\n      messagesCursor: null,\n      chatId: undefined,\n      currentUserId: undefined,\n      otherUser: undefined,\n    };\n  },\n  methods: {\n    ...mapActions(\"warpnet\", [\n      \"getChat\",\n      \"getProfile\",\n      \"sendDirectMessage\",\n    ]),\n    async loadChat() {\n      try {\n        this.chat = await this.getChat({\n          chatId: this.chatId\n        });\n      } catch (error) {\n        console.error('Error loading chat:', error);\n      }\n    },\n\n    async loadMessages() {\n      try {\n        const { messages, cursor } = await this.$store.dispatch('getMessages', {\n          chatId: this.chatId,\n          cursor: this.messagesCursor,\n          limit: 50\n        });\n\n        this.messages = [...messages, ...this.messages];\n        this.messagesCursor = cursor;\n        this.loading = false;\n      } catch (error) {\n        console.error('Error loading messages:', error);\n        this.loading = false;\n      }\n    },\n\n    async sendMessage() {\n      if (!this.newMessage.trim()) return;\n\n      try {\n        const message = await this.sendDirectMessage( {\n          chatId: this.chatId,\n          text: this.newMessage,\n        });\n\n        this.messages.push(message);\n        this.newMessage = '';\n        this.scrollToBottom();\n      } catch (error) {\n        console.error('Error sending message:', error);\n      }\n    },\n\n    scrollToBottom() {\n      this.$nextTick(() => {\n        const container = this.$refs.messageContainer;\n        container.scrollTop = container.scrollHeight;\n      });\n    }\n  },\n\n  async created() {\n    console.log(\"loading component:\", this.$options.name);\n    this.currentUserId = this.$route.params.id;\n    this.chatId = this.$route.params.chatId;\n\n    const otherUserId = this.chatId.split(':')[0];\n\n    this.otherUser = await this.getProfile(otherUserId)\n    await Promise.all([\n      this.loadChat(),\n      this.loadMessages()\n    ]);\n    this.scrollToBottom();\n  }\n};\n</script>","import { render } from \"./Conversation.vue?vue&type=template&id=6e9dd16d\"\nimport script from \"./Conversation.vue?vue&type=script&lang=js\"\nexport * from \"./Conversation.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div id=\"app\" class=\"flex container h-full w-full\">\n    <div class=\"flex container h-full w-full\">\n      <SideNav />\n\n      <div class=\"w-full sm:w-1/3 md:w-1/2 lg:w-1/2 h-full overflow-y-scroll no-scrollbar hidden md:block\">\n        <div class=\"px-5 py-3 border-b border-lighter flex\">\n          <h1 class=\"text-xl font-bold flex-1\">Chats</h1>\n          <i class=\"fas fa-cog text-xl text-blue cursor-pointer\"></i>\n          <i @click=\"newMessage()\" class=\"fas fa-plus-circle ml-3 text-xl text-blue cursor-pointer\"></i>\n        </div>\n\n        <!-- chats -->\n        <Loader :loading=\"loading\" />\n        <div v-if=\"!loading\">\n          <div v-if=\"chats.length === 0\" class=\"flex flex-col items-center justify-center w-full pt-10\">\n            <div class=\"w-1/2 flex flex-col items-center justify-center\">\n              <p class=\"font-bold text-lg\">No chats yet</p>\n              <p class=\"text-sm text-dark\">\n                Wait until someone starts a chat here.\n              </p>\n            </div>\n          </div>\n          <div v-for=\"chat in chats\" :key=\"chat.id\">\n            <div class=\"cursor-pointer\">\n              <div class=\"w-full p-2 pt-1 pb-1 md:p-4 md:pt-2 md:pb-2 border-b hover:bg-lightest flex\"\n                @click=\"selectChat(chat)\">\n                <div class=\"flex-none mr-2 md:mr-4 pt-1\">\n                  <a :href=\"`#/${getUser(chat.id).username}`\">\n                    <img :src=\"`${getUser(chat.id).avatar || 'default_profile.png'}`\"\n                      class=\"h-12 w-12 rounded-full flex-none\"  />\n                  </a>\n                </div>\n                <div class=\"w-full truncate\">\n                  <div class=\"flex items-center w-full\">\n                    <p class=\"font-semibold\">{{ getUser(chat.id).username }}</p>\n                    <p class=\"hidden md:block text-sm text-dark ml-2 truncate\">\n                      @{{ getUser(chat.id).id }}\n                    </p>\n                    <p class=\"text-sm text-dark ml-auto\">\n                      {{ $filters.timeago(chat.lastModified) }}\n                    </p>\n                  </div>\n                  <p class=\"pb-2 truncate\" v-linkify>{{ chat.last_message }}</p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"w-full border-l border-r border-lighter h-screen flex items-center justify-center\">\n        <div class=\"text-center\">\n          <h2 class=\"text-2xl font-bold mb-4\">Select a chat</h2>\n          <p class=\"text-gray-600\">Choose a chat from the list to start chatting</p>\n        </div>\n      </div>\n\n      <NewMessageOverlay\n        v-if=\"showNewMessageModal\"\n        :showNewMessageModal.sync=\"showNewMessageModal\"\n        :profileId=\"this.profileId\"\n        @selected=\"selected\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapActions } from \"vuex\";\nimport {defineAsyncComponent} from \"vue\";\n\nexport default {\n  name: \"Chats\",\n  components: {\n    NewMessageOverlay: defineAsyncComponent(() => import('../components/NewMessageOverlay.vue')),\n    Loader: defineAsyncComponent(() => import('../components/Loader.vue')),\n    SideNav: defineAsyncComponent(() => import('../components/SideNav.vue')),\n  },\n  data() {\n    return {\n      loading: true,\n      showNewMessageModal: false,\n      chats: [],\n      chatsCursor: \"\",\n      profileId: \"\",\n      chatUsers: new Map(),\n    };\n  },\n  methods: {\n    ...mapActions(\"warpnet\", [\n      \"createChat\", \n      \"deleteChat\",\n      \"getChats\",\n      \"getProfile\",\n    ]),\n    newMessage() {\n      this.showNewMessageModal = true;\n    },\n    getUser(chatId) {\n      return this.chatUsers.get(chatId);\n    },\n    async selectChat(chat) {\n      this.$router.push({\n        name: 'Messages',\n        params: {\n          id: this.$route.params.id,\n          chatId: chat.id,\n        },\n      });\n    },\n    async selected(user) {\n      if (!user.id) {\n        return;\n      }\n      this.showNewMessageModal = false;\n\n      // Check if chat already exists\n      const existingChat = this.chats.find(\n        conv => conv.other_user_id === user.id\n      );\n\n      if (existingChat) {\n        await this.selectChat(existingChat);\n      } else {\n        // Create new chat\n        const newChat = await this.createChat({\n          otherUserId: user.id\n        });\n        \n        if (newChat) {\n          await this.selectChat(newChat);\n        }\n      }\n    },\n    async loadChats() {\n      try {\n        const resp = await this.getChats({\n          limit: 20,\n          cursor: this.chatsCursor\n        });\n\n        for (const chat of resp.chats || []) {\n          const user = await this.getProfile(chat.other_user_id)\n          this.chatUsers.set(chat.id, user);\n        }\n        \n        this.chats = [...this.chats, ...resp.chats];\n        this.chatsCursor = resp.cursor;\n        this.loading = false;\n      } catch (error) {\n        console.error(\"Error loading chats:\", error);\n        this.loading = false;\n      }\n    }\n  },\n  async created() {\n    console.log(\"loading component:\", this.$options.name);\n    this.profileId = this.$route.params.id\n    await this.loadChats();\n  }\n};\n</script>\n","import { render } from \"./Conversations.vue?vue&type=template&id=f27b3ed0\"\nimport script from \"./Conversations.vue?vue&type=script&lang=js\"\nexport * from \"./Conversations.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div id=\"app\" class=\"flex container h-full w-full\">\n    <div class=\"flex container h-full w-full\">\n      <SideNav />\n\n      <div\n        class=\"w-full sm:w-1/3 md:w-1/2 lg:w-1/2 h-full overflow-y-scroll no-scrollbar hidden md:block\"\n      >\n        <div\n          class=\"px-5 py-3 border-b border-lighter flex\"\n          @click=\"deselectAll()\"\n        >\n          <h1 class=\"text-xl font-bold flex-1\">Messages</h1>\n          <i class=\"fas fa-cog text-xl text-blue cursor-pointer\"></i>\n          <i\n            @click=\"newMessage()\"\n            class=\"fas fa-plus-circle ml-3 text-xl text-blue cursor-pointer\"\n          ></i>\n        </div>\n\n        <!-- chats -->\n        <Loader :loading=\"loading\" />\n        <div v-if=\"!loading\">\n          <div\n            v-if=\"chats.length === 0\"\n            class=\"flex flex-col items-center justify-center w-full pt-10\"\n          >\n            <div class=\"w-1/2 flex flex-col items-center justify-center\">\n              <p class=\"font-bold text-lg\">No chats yet</p>\n              <p class=\"text-sm text-dark\">\n                Wait until someone starts a chat here.\n              </p>\n            </div>\n          </div>\n          <div\n            v-for=\"chat in chats\"\n            :key=\"chat.id\"\n          >\n            <p>ACTIVE: {{ JSON.stringify(active) }} {{ JSON.stringify(chat) }}</p>\n            <div\n              class=\"cursor-pointer\"\n              :class=\"\n                active && active.chat && chat.id === active.chat.id\n                  ? 'border-r-2 border-blue'\n                  : ''\n              \"\n            >\n              <div\n                class=\"w-full p-2 pt-1 pb-1 md:p-4 md:pt-2 md:pb-2 border-b hover:bg-lightest flex\"\n                @click.stop=\"selectChat(chat)\"\n              >\n                <div class=\"flex-none mr-2 md:mr-4 pt-1\">\n                  <a v-if=\"active && active.otherUser\" :href=\"`#/${active.otherUser.username}`\">\n                    <img\n                      :src=\"\n                        `${active.otherUser.avatar ||\n                          'default_profile.png'}`\n                      \"\n                      class=\"h-12 w-12 rounded-full flex-none\"\n                     />\n                  </a>\n                </div>\n                <div class=\"w-full truncate\">\n                  <div class=\"flex items-center w-full\">\n                    <p class=\"font-semibold\">\n                      {{ chat.other_user_id }}\n                    </p>\n                    <p v-if=\"active && active.otherUser\" class=\"hidden md:block text-sm text-dark ml-2 truncate\">\n                      @{{ active.otherUser.username || \"Anonymous\"}}\n                    </p>\n                    <p class=\"text-sm text-dark ml-auto\">\n                      {{  $filters.timeago(chat.updated_at) }}\n                    </p>\n                  </div>\n\n                  <p class=\"pb-2 truncate\" v-linkify>\n                    {{ chat.last_message }}\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div\n        v-if=\"loading || !active\"\n        class=\"w-full z-0 h-screen border-l border-r border-lighter overflow-y-scroll no-scrollbar relative flex flex-col items-center justify-center\"\n        style=\"display: grid; grid-template-rows: 53px auto\"\n      >\n        <div\n          class=\"top-0 left-0 w-full px-5 pt-1 pb-2 border-lighter flex bg-white\"\n          :class=\"!active ? '' : 'border-b'\"\n        >\n          <button\n            @click=\"gotoHome()\"\n            class=\"block md:hidden rounded-full mr-2 focus:outline-none hover:bg-lightblue\"\n          >\n            <i class=\"fas fa-arrow-left text-blue\"></i>\n          </button>\n        </div>\n        <div class=\"flex flex-col items-center justify-center w-full\">\n          <div class=\"w-3/5\">\n            <p class=\"font-bold text-lg\">You don’t have a message selected</p>\n            <p class=\"text-sm text-dark\">\n              This is where you’ll see messages from people you don’t follow.\n              They won’t know you’ve seen the request until you accept it.\n            </p>\n            <div class=\"flex justify-start mt-5\">\n              <button\n                @click=\"newMessage()\"\n                type=\"button\"\n                class=\"h-10 px-2 text-white font-semibold bg-blue hover:bg-darkblue rounded-full\"\n              >\n                New Message\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div\n        v-if=\"!loading && active\"\n        class=\"w-full border-l border-r border-lighter h-screen\"\n        style=\"display: grid; grid-template-rows: 53px auto 53px;\"\n      >\n        <div\n          class=\"px-5 pt-1 pb-2 border-b border-lighter flex bg-white sticky\"\n          @click=\"deselectAll()\"\n        >\n          <button\n            @click=\"gotoHome()\"\n            class=\"block md:hidden rounded-full mr-2 focus:outline-none hover:bg-lightblue\"\n          >\n            <i class=\"fas fa-arrow-left text-blue\"></i>\n          </button>\n          <div v-if=\"active && active.chat\" class=\"flex-none mr-4\">\n            <a :href=\"`#/${active.chat.other_user_id}`\">\n              <img\n                v-if=\"active && active.otherUser\"\n                :src=\"`${active.otherUser.avatar || 'default_profile.png'}`\"\n                class=\"flex-none w-6 h-6 rounded-full mt-2\"\n               />\n            </a>\n          </div>\n          <div class=\"w-full flex flex-col\">\n            <h1 class=\"text-m font-bold flex-1\">{{ active.otherUser.username }}</h1>\n            <p class=\"text-dark text-xs\">@{{ active.chat.other_user_id }}</p>\n          </div>\n          <i\n            class=\"fas fa-info-circle ml-3 text-xl text-blue mt-2 cursor-pointer\"\n          ></i>\n        </div>\n\n        <div\n          class=\"w-full pt-5 overflow-y-scroll no-scrollbar\"\n          style=\"display: grid; grid-template-rows: auto\"\n          v-scroll:top=\"loadMore\"\n        >\n          <div class=\"w-full px-5 flex flex-col justify-between\">\n            <div\n              class=\"flex flex-col-reverse mt-1 h-full\"\n              style=\"min-height: 100%;\"\n            >\n              <div ref=\"scrollToMe\"></div>\n              <div v-for=\"message in messages\" :key=\"message.id\">\n                <!-- Me -->\n                <div v-if=\"message.owner_id === this.ownerProfile.id\">\n                  <div class=\"flex justify-end\">\n                    <div\n                      class=\"mr-2 py-3 px-4 bg-blue rounded-bl-3xl rounded-tl-3xl rounded-tr-xl text-white\"\n                    >\n                      {{ message.text }}\n                    </div>\n                  </div>\n                  <div class=\"flex justify-end w-full mb-4\">\n                    <p class=\"text-xs text-dark mr-2\">\n                      {{  $filters.time(message.created_at) }}\n                    </p>\n                  </div>\n                </div>\n                <!-- Other -->\n                <div v-if=\"!message.owner_id === this.ownerProfile.id\">\n                  <div class=\"flex justify-start\">\n                    <div class=\"flex-none mr-4\">\n                      <a :href=\"`#/${message.other_user_id}`\">\n                        <img\n                          :src=\"\n                            `${active.otherUser.avatar || 'default_profile.png'}`\n                          \"\n                          class=\"object-cover h-8 w-8 rounded-full self-end\"\n                         />\n                      </a>\n                    </div>\n                    <div\n                      class=\"ml-2 py-3 px-4 bg-lighter rounded-br-3xl rounded-tr-3xl rounded-tl-xl text-black\"\n                    >\n                      {{ message.text }}\n                    </div>\n                  </div>\n                  <div class=\"flex items-center w-full mb-4\">\n                    <p class=\"text-xs text-dark ml-14\">\n                      {{ $filters.time(message.created_at) }}\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"bg-white px-5 p-3 border-t border-lighter flex w-full\">\n          <input\n            ref=\"input\"\n            class=\"pl-5 rounded-full w-full p-2 bg-lighter text-sm focus:bg-white focus:outline-none focus:ring-2 focus:ring-blue\"\n            placeholder=\"Start a new message\"\n            type=\"search\"\n            v-model=\"text\"\n            v-on:keyup.enter=\"sendMessage()\"\n            :disabled=\"disabled\"\n          />\n          <button\n            class=\"rounded-full focus:outline-none right-4 ml-4 w-8 h-8\"\n            :class=\"\n              `${\n                text.length === 0\n                  ? 'opacity-50 cursor-default'\n                  : 'hover:bg-lightblue'\n              }`\n            \"\n            @click=\"sendMessage()\"\n            :disabled=\"disabled\"\n          >\n            <i class=\"fas fa-arrow-right text-xl text-blue\"></i>\n          </button>\n        </div>\n      </div>\n\n      <NewMessageOverlay\n        v-if=\"showNewMessageModal\"\n        :showNewMessageModal.sync=\"showNewMessageModal\"\n        @selected=\"selected\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport {mapActions} from \"vuex\";\nimport {defineAsyncComponent} from \"vue\";\n\nexport default {\n  name: \"Messages\",\n  components: {\n    SideNav: defineAsyncComponent(() => import('@/components/SideNav.vue')),\n    Loader: defineAsyncComponent(() => import('@/components/Loader.vue')),\n    NewMessageOverlay: defineAsyncComponent(() => import('@/components/NewMessageOverlay.vue')),\n  },\n  data() {\n    return {\n      loading: false,\n      text: \"\",\n      disabled: false,\n      showNewMessageModal: false,\n      chats: [],\n      chatsCursor: \"\",\n      messages: [],\n      messagesCursor: \"\",\n      ownerProfile: undefined,\n      active: { chat: {id: \"Loading...\", other_user_id: \"Loading...\"}, otherUser: {avatar: null, username: \"Loading...\"} },\n    };\n  },\n  methods: {\n    ...mapActions(\"warpnet\", [\n        \"getOwnerProfile\",\n        \"getProfile\",\n        \"createChat\",\n        \"deleteChat\",\n        \"getChats\",\n        \"getDirectMessages\",\n        \"sendDirectMessage\",\n    ]),\n    newMessage() {\n      this.showNewMessageModal = true;\n    },\n    gotoHome() {\n      this.$router.push({\n        name: \"Home\",\n      });\n    },\n\n    sendMessage() {\n      if (!this.active || !this.active.chat.other_user_id || this.text.length === 0) return;\n      this.disabled = true; //disable message input temporarily\n      this.sendDirectMessage({\n        chatId: this.active.chat.id,\n        text: this.text,\n      }).then(() => {\n        this.text = \"\";\n        this.disabled = false;\n        this.$nextTick(() => {\n          this.scrollToEnd();\n        });\n      });\n    },\n    scrollToEnd() {\n      this.$nextTick(() => {\n        const el = this.$refs.scrollToMe;\n        if (el) {\n          el.scrollIntoView({ behavior: \"smooth\" });\n        }\n        setTimeout(() => this.$refs.input.focus(), 500);\n      });\n    },\n    async selected(user) {\n      if (!this.ownerProfile.id || !user.id) {\n        return;\n      }\n      this.showNewMessageModal = false;\n      const chatId = `${this.ownerProfile.id}:${user.id}`;\n      const chatIdReversed = `${user.id}:${this.ownerProfile.id}`;\n\n      let currentChat = undefined;\n      this.chats.forEach((chat) => {\n        if (chat.id === chatId || chat.id === chatIdReversed) {\n          currentChat = chat;\n        }\n      });\n      if (!currentChat) {\n        currentChat = {\n          id: chatId,\n          other_user_id: user.id,\n          owner_id: \"\",\n        };\n      }\n      await this.selectChat(currentChat);\n    },\n    async selectChat(chat) {\n      console.log(\"selectChat\", JSON.stringify(chat));\n      this.active = { chat, otherUser: { username: \"Loading...\", avatar: null } };\n\n      const [otherUser, messagesResp] = await Promise.all([\n        this.getProfile(chat.other_user_id),\n        this.getDirectMessages({\n          chatId: chat.id,\n          limit: 20,\n          cursor: this.messagesCursor,\n        }),\n      ]);\n\n      this.active = { chat, otherUser };\n      this.messages = [...this.messages, ...messagesResp.messages];\n      this.messagesCursor = messagesResp.cursor;\n\n      this.scrollToEnd();\n    },\n    deselectAll() {\n      // this.active = undefined;\n    },\n    async loadMore() {\n      if (!this.active || !this.active.chat) return;\n      const messages = await this.getDirectMessages({\n        chatId: this.active.chat.id,\n        limit: 20,\n        cursor: this.messagesCursor,\n      }).catch((error) => {\n        console.error(error);\n      });\n      this.messages = [...this.messages, ...messages];\n    },\n  },\n  async created() {\n    this.loading = true;\n    console.log(\"loading component:\", this.$options.name);\n    this.ownerProfile = await this.getOwnerProfile()\n\n    const chatsResp = await this.getChats({limit:20, cursor:this.chatsCursor})\n    if (!chatsResp || chatsResp.chats.length === 0) {\n      console.error(\"No chats found.\");\n      return;\n    }\n    this.chats = chatsResp.chats;\n    this.chatsCursor = chatsResp.cursor;\n    this.loading = false;\n  },\n};\n</script>\n","import { render } from \"./Messages.vue?vue&type=template&id=7357d116\"\nimport script from \"./Messages.vue?vue&type=script&lang=js\"\nexport * from \"./Messages.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","'use strict';\nvar $ = require('../internals/export');\nvar iterate = require('../internals/iterate');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\n\n// `Iterator.prototype.find` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.find\n$({ target: 'Iterator', proto: true, real: true }, {\n  find: function find(predicate) {\n    anObject(this);\n    aCallable(predicate);\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    return iterate(record, function (value, stop) {\n      if (predicate(value, counter++)) return stop(value);\n    }, { IS_RECORD: true, INTERRUPTED: true }).result;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar iterate = require('../internals/iterate');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\n\n// `Iterator.prototype.forEach` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.foreach\n$({ target: 'Iterator', proto: true, real: true }, {\n  forEach: function forEach(fn) {\n    anObject(this);\n    aCallable(fn);\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    iterate(record, function (value) {\n      fn(value, counter++);\n    }, { IS_RECORD: true });\n  }\n});\n"],"names":["class","key","ref","_createElementBlock","_hoisted_1","_createVNode","_component_SideNav","_createElementVNode","_hoisted_2","_hoisted_3","_component_router_link","to","name","default","_withCtx","_cache","_","$data","chat","_hoisted_4","src","otherUser","avatar","_hoisted_5","_hoisted_6","_toDisplayString","username","_hoisted_7","other_user_id","_createCommentVNode","_hoisted_8","loading","_hoisted_9","_component_Loader","_Fragment","_renderList","messages","message","id","_normalizeClass","owner_id","currentUserId","_createTextVNode","content","_hoisted_10","_ctx","$filters","timeago","created_at","_hoisted_11","onSubmit","_withModifiers","args","$options","sendMessage","$event","newMessage","type","placeholder","components","SideNav","defineAsyncComponent","Loader","data","messagesCursor","chatId","undefined","methods","mapActions","loadChat","this","getChat","error","console","loadMessages","cursor","$store","dispatch","limit","trim","sendDirectMessage","text","push","scrollToBottom","$nextTick","container","$refs","messageContainer","scrollTop","scrollHeight","created","log","$route","params","otherUserId","split","getProfile","Promise","all","__exports__","render","onClick","chats","length","selectChat","href","getUser","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","lastModified","_hoisted_17","last_message","showNewMessageModal","_createBlock","_component_NewMessageOverlay","profileId","onSelected","selected","NewMessageOverlay","chatsCursor","chatUsers","Map","get","$router","user","existingChat","find","conv","newChat","createChat","loadChats","resp","getChats","set","style","deselectAll","JSON","stringify","active","updated_at","gotoHome","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_23","_hoisted_22","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","ownerProfile","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","time","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_40","_hoisted_39","_hoisted_41","_hoisted_42","_hoisted_43","loadMore","_hoisted_44","onKeyup","_withKeys","disabled","_hoisted_45","_hoisted_46","then","scrollToEnd","el","scrollToMe","scrollIntoView","behavior","setTimeout","input","focus","chatIdReversed","currentChat","forEach","messagesResp","getDirectMessages","catch","getOwnerProfile","chatsResp","$","iterate","aCallable","anObject","getIteratorDirect","target","proto","real","predicate","record","counter","value","stop","IS_RECORD","INTERRUPTED","result","fn"],"sourceRoot":""}