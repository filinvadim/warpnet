{"version":3,"file":"js/home.5982511d.js","mappings":"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","sources":["webpack://warpnet-frontend/./src/views/Home.vue","webpack://warpnet-frontend/./src/views/Home.vue?9051"],"sourcesContent":["<template>\n  <div id=\"app\" class=\"flex container h-screen w-full\">\n    <!-- side navigation -->\n    <SideNav />\n\n    <!-- timeline -->\n    <div\n      class=\"w-full h-full overflow-y-scroll no-scrollbar\"\n      v-scroll:bottom=\"loadMore\"\n    >\n      <div\n        class=\"px-5 py-3 border-b border-lighter flex items-center justify-between\"\n      >\n        <h1 class=\"text-xl font-bold\">Home</h1>\n        <button\n            @click=\"toggleInfo\"\n            class=\"fas fa-info-circle text-xl text-blue cursor-pointer hover:bg-lighter\"\n            aria-hidden=\"true\"\n        />\n      </div>\n      <div class=\"px-5 py-3 border-b-8 border-lighter flex\">\n        <div v-if=\"profile\" class=\"flex-none mr-4\">\n          <img\n            :src=\"profile.avatar || 'default_profile.png'\"\n            class=\"flex-none w-12 h-12 rounded-full\"\n\n          />\n        </div>\n        <div class=\"w-full relative\">\n          <textarea\n            v-model=\"tweet.text\"\n            placeholder=\"What's happening?\"\n            class=\"w-full focus:outline-none mt-3 pb-3\"\n          ></textarea>\n          <div v-if=\"imageAttachment\" class=\"relative mt-4 inline-block\">\n            <img\n                :src=\"imageAttachment\"\n                alt=\"Image preview\"\n                class=\"w-32 h-32 object-cover rounded border border-lighter\"\n            />\n            <button\n                @click=\"removeImageAttachment\"\n                type=\"button\"\n                class=\"absolute top-0 right-0 mt-2 mr-2 bg-white bg-opacity-75 rounded-full p-1 hover:bg-red-500\"\n                title=\"Remove image\"\n            >\n              <i class=\"fas fa-times text-red-600 hover:text-white\"></i>\n            </button>\n          </div>\n          <div>\n            <button\n                @click=\"openFileInput('imageUrlFileInput')\"\n                class=\"text-lg text-blue mr-4 far fa-image\"\n            >\n              <input\n                  @change=\"fileChange('imageUrlFileInput')\"\n                  ref=\"imageUrlFileInput\"\n                  accept=\"image/*\"\n                  type=\"file\"\n                  class=\"hidden\"\n              />\n            </button>\n            <i class=\"text-lg text-blue mr-4 fas fa-film cursor-not-allowed\"></i>\n            <i class=\"text-lg text-blue mr-4 far fa-chart-bar cursor-not-allowed\"></i>\n            <i class=\"text-lg text-blue mr-4 far fa-smile cursor-not-allowed\"></i>\n          </div>\n          <button\n            @click=\"addNewTweet\"\n            type=\"button\"\n            class=\"h-10 px-4 text-white font-semibold bg-blue hover:bg-darkblue rounded-full absolute bottom-0 right-0\"\n            :class=\"tweet.text ? '' : 'opacity-50 cursor-not-allowed'\"\n          >\n            Tweet\n          </button>\n        </div>\n      </div>\n\n      <!-- timeline -->\n      <Loader :loading=\"loading\" />\n      <div\n        v-if=\"!loading && timeline.length === 0\"\n        class=\"flex flex-col items-center justify-center w-full pt-10 px-6\"\n      >\n        <p class=\"font-bold text-lg\">Welcome to Warpnet!</p>\n        <p class=\"text-sm text-dark text-center\">\n          This is the best place to see what's happening in your world. Find\n          some people and topics to follow now.\n        </p>\n        <button\n          class=\"text-white bg-blue rounded-full font-semibold mt-4 px-4 py-2 hover:bg-darkblue\"\n        >\n          <p class=\"hidden lg:block\">Let's go!</p>\n          <i class=\"fas fa-plus lg:hidden\"></i>\n        </button>\n      </div>\n      <Tweets :tweets=\"timeline\" />\n    </div>\n    <InfoOverlay\n        :visible=\"showInfo\"\n        :content=\"infoContent\"\n        :position=\"infoPosition\"\n    />\n    <!-- default right bar -->\n    <DefaultRightBar />\n  </div>\n</template>\n\n<script>\nimport {mapActions} from \"vuex\";\nimport {defineAsyncComponent} from \"vue\";\n\nexport default {\n  name: \"Home\",\n  components: {\n    SideNav: defineAsyncComponent(() => import('@/components/SideNav.vue')),\n    DefaultRightBar: defineAsyncComponent(() => import('@/components/DefaultRightBar.vue')),\n    Tweets: defineAsyncComponent(() => import('@/components/Tweets.vue')),\n    Loader: defineAsyncComponent(() => import('@/components/Loader.vue')),\n    InfoOverlay: defineAsyncComponent(() => import('@/components/InfoOverlay.vue')),\n  },\n  data() {\n    return {\n      tweet: {\n        text: \"\",\n        root_id: \"\",\n        image_key: \"\",\n      },\n      loading: true,\n      profile: {},\n      timeline: [],\n      timelineCursor: \"\",\n      showInfo: false,\n      infoContent: '',\n      infoPosition: { top: '0px', left: '0px' },\n      imageAttachment: undefined,\n      videoAttachment: undefined,\n    };\n  },\n  methods: {\n    ...mapActions(\"warpnet\", [\n      \"getOwnerProfile\",\n      \"getMyTimeline\",\n      \"createTweet\",\n      \"getNodeInfo\",\n      \"uploadImage\",\n      \"getImage\",\n    ]),\n    openFileInput(ref) {\n      this.$refs[ref].click();\n    },\n    async fileChange(ref) {\n      const file = this.$refs[ref].files[0];\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => this.imageAttachment = reader.result;\n      reader.onerror = (error) => {\n        console.error(\"Error reading file\", error);\n        alert('Error reading file');\n      };\n    },\n    async removeImageAttachment() {\n      this.imageAttachment = undefined\n    },\n    async addNewTweet() {\n      if (!this.tweet.text) return;\n      if (this.imageAttachment) {\n        this.tweet.image_key = await this.uploadImage(this.imageAttachment)\n      }\n      \n      await this.createTweet({text: this.tweet.text, imageKey: this.tweet.image_key});\n\n      this.tweet.text = \"\";\n      this.tweet.image_key = \"\";\n      this.imageAttachment = undefined;\n\n      const timelineData = await this.getMyTimeline({limit: 20, cursor:\"\"});\n      this.timeline = timelineData.tweets || [];\n      this.timelineCursor = timelineData.cursor;\n    },\n    async loadMore() {\n      if (this.timelineCursor === \"end\") return;\n      const timelineData = await this.getMyTimeline({limit: 20, cursor:this.timelineCursor});\n      this.timeline = this.timeline.concat(timelineData.tweets  || []);\n      this.timelineCursor = timelineData.cursor;\n    },\n    async toggleInfo(event) {\n      if (this.showInfo) {\n        this.showInfo = false;\n        return;\n      }\n\n      const info = await this.getInfo();\n      this.infoContent = typeof info === 'string' ? info : JSON.stringify(info, null, 2);\n\n      const rect = event.target.getBoundingClientRect();\n      this.infoPosition = {\n        top: `${rect.bottom + window.scrollY}px`,\n        left: `${rect.left + window.scrollX}px`,\n      };\n\n      this.showInfo = true;\n    },\n    async getInfo() {\n      return await this.getNodeInfo();\n    },\n  },\n  async created() {\n    console.log(\"loading component:\", this.$options.name);\n\n    this.profile = await this.getOwnerProfile() || {};\n\n    this.profile.background_image = await this.getImage({userId:this.profile.id, key:this.profile.background_image_key});\n    this.profile.avatar = await this.getImage({userId:this.profile.id, key:this.profile.avatar_key})\n\n    const timelineData = await this.getMyTimeline({limit: 20, cursor:\"\"});\n    this.timeline = timelineData.tweets  || [];\n    this.timelineCursor = timelineData.cursor;\n    this.loading = false;\n  },\n};\n</script>","import { render } from \"./Home.vue?vue&type=template&id=4cf80c22\"\nimport script from \"./Home.vue?vue&type=script&lang=js\"\nexport * from \"./Home.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["id","class","key","_createElementBlock","_hoisted_1","_createVNode","_component_SideNav","_hoisted_2","_createElementVNode","_hoisted_3","onClick","_cache","args","$options","toggleInfo","_hoisted_4","$data","profile","_hoisted_5","src","avatar","_hoisted_6","_createCommentVNode","_hoisted_7","$event","tweet","text","placeholder","imageAttachment","_hoisted_8","alt","_hoisted_9","removeImageAttachment","type","title","openFileInput","onChange","fileChange","ref","accept","addNewTweet","_normalizeClass","_component_Loader","loading","timeline","length","_hoisted_10","_createStaticVNode","_component_Tweets","tweets","loadMore","_component_InfoOverlay","visible","showInfo","content","infoContent","position","infoPosition","_component_DefaultRightBar","name","components","SideNav","defineAsyncComponent","DefaultRightBar","Tweets","Loader","InfoOverlay","data","root_id","image_key","timelineCursor","top","left","undefined","videoAttachment","methods","mapActions","this","$refs","click","file","files","reader","FileReader","readAsDataURL","onload","result","onerror","error","console","alert","uploadImage","createTweet","imageKey","timelineData","getMyTimeline","limit","cursor","concat","event","info","getInfo","JSON","stringify","rect","target","getBoundingClientRect","bottom","window","scrollY","scrollX","getNodeInfo","created","log","getOwnerProfile","background_image","getImage","userId","background_image_key","avatar_key","__exports__","render"],"sourceRoot":""}