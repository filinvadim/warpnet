"use strict";(self["webpackChunkwarpnet_frontend"]=self["webpackChunkwarpnet_frontend"]||[]).push([[138],{9699:function(e,l,o){o.r(l),o.d(l,{default:function(){return K}});var t=o(641),r=o(33);const s={id:"app",class:"flex container h-screen w-full"},i={class:"flex container h-screen w-full"},a={class:"w-full md:w-2/3 lg:w-1/2 h-full overflow-y-scroll no-scrollbar"},d={class:"px-5 py-3 border-b border-lighter flex items-center"},n={class:"lg:block ml-4"},u={class:"text-xl font-bold"},f={key:0,class:"text-left text-sm leading-tight text-dark"},p={class:"border-b border-lighter flex",style:{height:"200px",display:"block"}},b={key:0,class:"h-full max-h-full"},c=["src"],w={key:1,class:"bg-gray-400 h-full max-h-full"},h={class:"py-3 flex flex-col"},m={class:"px-3 flex flex-row justify-between"},g=["src"],x={key:1},k={key:2},y={key:0,class:"text-xs md:text-base md:ml-auto mr-1 md:mr-3 text-blue font-bold px-3 py-1 md:px-3 md:py-2 rounded-full border border-blue mb-2 hover:bg-lightblue"},v={key:0,class:"px-3"},C={class:"font-bold text-xl"},L={class:"text-dark"},E={key:0,class:"text-sm font-medium bg-red-900 py-1 px-1 mx-2 rounded text-white align-middle"},P={key:1,class:"text-sm font-medium bg-gray-100 py-1 px-1 mx-2 rounded text-gray-500 align-middle"},_={class:"my-2"},M={class:"flex flex-col md:flex-row mt-1 mb-2"},U={key:0,class:"flex flex-row mr-4"},F=["href"],X={key:1,class:"flex flex-row mr-4"},Q={class:"text-dark"},S={key:0,class:"flex flex-row mt-1"},$={class:"font-bold"},T={class:"font-bold"},I={key:1,class:"px-5"},O={class:"text-black text-lg"},W={key:2,class:"flex flex-row justify-evenly mt-2"},j={key:0,class:"flex flex-col items-center justify-center w-full pt-10"},V={class:"font-bold text-lg"},D={class:"text-sm text-dark"},Y={key:0,class:"text-white bg-blue rounded-full font-semibold mt-4 px-4 py-2 hover:bg-darkblue"},B={class:"hidden md:block w-1/3 z-0 h-full border-l border-lighter px-6 py-2 overflow-y-scroll no-scrollbar relative"};function H(e,l,o,H,N,A){const R=(0,t.g2)("SideNav"),z=(0,t.g2)("Loader"),J=(0,t.g2)("Tweets"),q=(0,t.g2)("DefaultRightBar"),G=(0,t.g2)("SetUpProfileOverlay"),K=(0,t.g2)("EditProfileOverlay"),Z=(0,t.gN)("scroll");return(0,t.uX)(),(0,t.CE)("div",s,[(0,t.Lk)("div",i,[(0,t.bF)(R),(0,t.bo)(((0,t.uX)(),(0,t.CE)("div",a,[(0,t.Lk)("div",d,[(0,t.Lk)("button",{onClick:l[0]||(l[0]=e=>A.gotoHome()),class:"rounded-full md:pr-2 focus:outline-none hover:bg-lightblue"},l[10]||(l[10]=[(0,t.Lk)("i",{class:"fas fa-arrow-left text-blue"},null,-1)])),(0,t.Lk)("div",n,[(0,t.Lk)("h1",u,(0,r.v_)(N.profile.username||"Anonymous"),1),N.noUser?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("p",f,(0,r.v_)(N.profile.tweets_count||0)+" Tweets ",1))])]),(0,t.Lk)("div",p,[N.profile.background_image?((0,t.uX)(),(0,t.CE)("div",b,[(0,t.Lk)("img",{src:N.profile.background_image,class:"h-full w-full object-cover",alt:"Background image"},null,8,c)])):(0,t.Q3)("",!0),N.profile.background_image?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("div",w))]),(0,t.Lk)("div",h,[(0,t.Lk)("div",m,[N.profile?((0,t.uX)(),(0,t.CE)("img",{key:0,src:N.profile.avatar||"default_profile.png",class:"w-24 h-24 md:w-32 md:h-32 rounded-full border-white",style:{"margin-top":"-80px","border-width":"6px"}},null,8,g)):(0,t.Q3)("",!0),A.isMySelf(N.profile.id)&&N.profile?((0,t.uX)(),(0,t.CE)("div",x,[null===N.profile.avatar||"default_profile.png"===N.profile.avatar?((0,t.uX)(),(0,t.CE)("button",{key:0,onClick:l[1]||(l[1]=e=>A.setUpProfile()),class:"text-xs md:text-base md:ml-auto text-blue font-bold px-4 py-2 rounded-full border border-blue mb-2 hover:bg-lightblue"}," Set up profile ")):(0,t.Q3)("",!0),null!==N.profile.avatar&&"default_profile.png"!==N.profile.avatar?((0,t.uX)(),(0,t.CE)("button",{key:1,onClick:l[2]||(l[2]=e=>A.editProfile()),class:"text-xs md:text-base md:ml-auto text-blue font-bold px-4 py-2 rounded-full border border-blue mb-2 hover:bg-lightblue"}," Edit profile ")):(0,t.Q3)("",!0)])):(0,t.Q3)("",!0),N.noUser||N.isSelf||N.loading?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("div",k,[l[11]||(l[11]=(0,t.Lk)("button",{class:"text-xs md:text-base md:ml-auto mr-1 md:mr-3 text-blue font-bold px-3 py-1 md:px-3 md:py-2 rounded-full border border-blue mb-2 hover:bg-lightblue"},[(0,t.Lk)("i",{class:"fas fa-ellipsis-h"})],-1)),A.isFollower()?((0,t.uX)(),(0,t.CE)("button",y,[(0,t.Lk)("i",{onClick:l[3]||(l[3]=e=>A.sendMessage()),class:"fas fa-envelope"})])):(0,t.Q3)("",!0),A.isFollowed()?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("button",{key:1,onClick:l[4]||(l[4]=e=>A.follow()),class:"text-xs md:text-base md:ml-auto text-blue font-bold px-2 py-1 md:px-4 md:py-2 rounded-full border border-blue mb-2 hover:bg-lightblue w-24 md:w-28"}," Follow ")),A.isFollowed()?((0,t.uX)(),(0,t.CE)("button",{key:2,onMouseover:l[5]||(l[5]=e=>N.followingLabel="Unfollow"),onMouseleave:l[6]||(l[6]=e=>N.followingLabel="Following"),onClick:l[7]||(l[7]=e=>A.unfollow()),class:"text-xs md:text-base md:ml-auto mr-1 md:mr-3 text-white bg-blue font-bold px-3 py-1 md:px-3 md:py-2 rounded-full border mb-2 hover:bg-red-700 w-22 md:w-28"},(0,r.v_)(N.followingLabel),33)):(0,t.Q3)("",!0)]))]),N.noUser||N.loading?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("div",v,[(0,t.Lk)("p",C,(0,r.v_)(N.profile.username||"..."),1),(0,t.Lk)("p",L,[(0,t.eW)(" @"+(0,r.v_)(N.profile.id||"")+" ",1),N.profile.isOffline?((0,t.uX)(),(0,t.CE)("span",E,"Offline")):(0,t.Q3)("",!0),A.isFollower()&&!N.isSelf?((0,t.uX)(),(0,t.CE)("span",P,"Follows you")):(0,t.Q3)("",!0)]),(0,t.Lk)("p",_,(0,r.v_)(N.profile.bio||""),1),(0,t.Lk)("div",M,[N.profile.website?((0,t.uX)(),(0,t.CE)("div",U,[l[12]||(l[12]=(0,t.Lk)("i",{class:"fas fa-link text-dark align-text-bottom pt-1 mr-2"},null,-1)),(0,t.Lk)("a",{href:N.profile.website,target:"_blank",class:"text-dark"},(0,r.v_)(N.profile.website.replace(/^https?:\/\//,"")),9,F)])):(0,t.Q3)("",!0),A.joinedDate()?((0,t.uX)(),(0,t.CE)("div",X,[l[13]||(l[13]=(0,t.Lk)("i",{class:"far fa-calendar-alt text-dark align-text-bottom pt-1 mr-2"},null,-1)),(0,t.Lk)("p",Q,"Joined "+(0,r.v_)(A.joinedDate()),1)])):(0,t.Q3)("",!0)]),N.noUser||N.loading?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("div",S,[(0,t.Lk)("button",{onClick:l[8]||(l[8]=e=>A.goToFollowing()),class:"mr-4 flex flex-row hover:underline"},[(0,t.Lk)("span",$,(0,r.v_)(N.profile.followees_count||0),1),l[14]||(l[14]=(0,t.Lk)("span",{class:"text-dark whitespace-pre"}," Following",-1))]),(0,t.Lk)("button",{onClick:l[9]||(l[9]=e=>A.goToFollowers()),class:"flex flex-row hover:underline"},[(0,t.Lk)("span",T,(0,r.v_)(N.profile.followers_count||0),1),l[15]||(l[15]=(0,t.Lk)("span",{class:"text-dark whitespace-pre"}," Followers",-1))])]))])),N.noUser?((0,t.uX)(),(0,t.CE)("div",I,[(0,t.Lk)("p",O," @"+(0,r.v_)(e.$route.params.id),1)])):(0,t.Q3)("",!0),N.noUser||N.loading?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("div",W,l[16]||(l[16]=[(0,t.Lk)("button",{class:"flex-grow text-dark font-bold border-b-2 border-blue p-1 md:px-2 md:py-4 hover:bg-lightblue"}," Tweets ",-1),(0,t.Lk)("button",{class:"cursor-not-allowed flex-grow text-dark font-bold border-b-2 p-1 md:px-2 md:py-4 hover:bg-lightblue"}," Tweets & replies ",-1),(0,t.Lk)("button",{class:"cursor-not-allowed flex-grow text-dark font-bold border-b-2 p-1 md:px-2 md:py-4 hover:bg-lightblue"}," Media ",-1),(0,t.Lk)("button",{class:"cursor-not-allowed flex-grow text-dark font-bold border-b-2 p-1 md:px-2 md:py-4 hover:bg-lightblue"}," Likes ",-1)])))]),(0,t.bF)(z,{loading:N.loading},null,8,["loading"]),N.noUser||N.loading||0!==N.tweets.length?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("div",j,[(0,t.Lk)("p",V,[(0,t.Lk)("span",null,(0,r.v_)(N.isSelf?"You":`${N.profile.username||"User"}`),1),l[17]||(l[17]=(0,t.eW)(" haven't tweeted yet "))]),(0,t.Lk)("p",D,[l[18]||(l[18]=(0,t.eW)(" When ")),(0,t.Lk)("span",null,(0,r.v_)(N.isSelf?"you post":`${N.profile.username||"user"} posts`),1),l[19]||(l[19]=(0,t.eW)(" a tweet, it'll show up here. "))]),N.isSelf?((0,t.uX)(),(0,t.CE)("button",Y,l[20]||(l[20]=[(0,t.Lk)("p",{class:"hidden lg:block"},"Tweet now",-1),(0,t.Lk)("i",{class:"fas fa-plus lg:hidden"},null,-1)]))):(0,t.Q3)("",!0)])),N.noUser?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)(J,{key:1,tweets:N.tweets},null,8,["tweets"]))])),[[Z,A.loadMore,"bottom"]]),(0,t.Lk)("div",B,[(0,t.bF)(q)]),N.showSetUpProfileModal?((0,t.uX)(),(0,t.Wv)(G,{key:0,showSetUpProfileModal:N.showSetUpProfileModal},null,8,["showSetUpProfileModal"])):(0,t.Q3)("",!0),N.showEditProfileModal?((0,t.uX)(),(0,t.Wv)(K,{key:1,showEditProfileModal:N.showEditProfileModal},null,8,["showEditProfileModal"])):(0,t.Q3)("",!0)])])}o(4114);var N=o(6278),A=o(5093),R=o.n(A),z=o(3856),J={name:"Profile",components:{SideNav:(0,t.$V)((()=>o.e(55).then(o.bind(o,5055)))),DefaultRightBar:(0,t.$V)((()=>o.e(5).then(o.bind(o,5)))),SearchBar:(0,t.$V)((()=>o.e(143).then(o.bind(o,5143)))),Loader:(0,t.$V)((()=>o.e(945).then(o.bind(o,4945)))),EditProfileOverlay:(0,t.$V)((()=>o.e(618).then(o.bind(o,1618)))),SetUpProfileOverlay:(0,t.$V)((()=>o.e(493).then(o.bind(o,1493)))),Tweets:(0,t.$V)((()=>o.e(767).then(o.bind(o,767))))},data(){return{showSetUpProfileModal:!1,showEditProfileModal:!1,isSelf:!1,followingLabel:"Following",loading:!0,noUser:!1,userProfile:{},profile:{},tweets:[],tweetsCursor:"",users:[],usersCursor:"",followers:[],followersCursor:"",followings:[],followingsCursor:""}},methods:{...(0,N.i0)("warpnet",["getOwnerProfile"]),isMySelf(e){return e===this.userProfile.id},joinedDate(e){return R()(e).format("MMMM YYYY")},gotoHome(){this.$router.push({name:"Home"})},sendMessage(){this.$router.push({name:"Messages",params:{id:this.userProfile.id}})},isFollower(){return z.m.isFollower(this.userProfile.id)},isFollowed(){return z.m.isFollowed(this.userProfile.id)},goToFollowing(){this.$router.push({name:"Following",params:{id:this.profile.id}})},goToFollowers(){this.$router.push({name:"Followers",params:{id:this.profile.id}})},setUpProfile(){this.showSetUpProfileModal=!0},editProfile(){this.showEditProfileModal=!0},async follow(){try{await z.m.followUser(this.profile.id)}catch(e){console.error(`failed to follow [${this.profile.id}]`,e)}},async unfollow(){try{await z.m.unfollowUser(this.profile.id)}catch(e){console.error(`failed to unfollow [${this.profile.id}]`,e)}},async loadMore(){if("end"===this.tweetsCursor)return;const e=await z.m.getTweets({userId:this.profile.id,limit:20,cursor:this.tweetsCursor});this.tweets=this.tweets.concat(e.tweets||[]),this.tweetsCursor=e.cursor}},async created(){console.log("loading component:",this.$options.name);try{this.loading=!0;const e=this.$route.params.id;if(!e)return void(this.noUser=!0);if(this.userProfile=await this.getOwnerProfile(),this.profile=await z.m.getProfile(e),!this.profile)return void(this.noUser=!0);this.profile.background_image=await z.m.getImage({userId:e,key:this.profile.background_image_key}),this.profile.avatar=await z.m.getImage({userId:e,key:this.profile.avatar_key}),this.isSelf=this.isMySelf(e);const[l,o,t,r]=await Promise.all([z.m.getUsers({userId:e,limit:20,cursor:this.usersCursor}),z.m.getTweets({userId:e,limit:20,cursor:this.tweetsCursor}),z.m.getFollowers({userId:e,limit:20,cursor:this.followersCursor}),z.m.getFollowees({userId:e,limit:20,cursor:this.followingsCursor})]);this.users=l.users||[],this.usersCursor=l.cursor,this.tweets=o.tweets||[],this.tweetsCursor=o.cursor,this.followers=t.users||[],this.followersCursor=t.cursor,this.followings=r.users||[],this.followingsCursor=r.cursor}catch(e){console.error("Failed to load profile:",e),this.noUser=!0}finally{this.loading=!1}}},q=o(6262);const G=(0,q.A)(J,[["render",H]]);var K=G}}]);
//# sourceMappingURL=profile.a6799404.js.map