(function(){var e={5358:function(e,t,s){var n={"./af":5177,"./af.js":5177,"./ar":1509,"./ar-dz":1488,"./ar-dz.js":1488,"./ar-kw":8676,"./ar-kw.js":8676,"./ar-ly":2353,"./ar-ly.js":2353,"./ar-ma":4496,"./ar-ma.js":4496,"./ar-ps":6947,"./ar-ps.js":6947,"./ar-sa":2682,"./ar-sa.js":2682,"./ar-tn":9756,"./ar-tn.js":9756,"./ar.js":1509,"./az":5533,"./az.js":5533,"./be":8959,"./be.js":8959,"./bg":7777,"./bg.js":7777,"./bm":4903,"./bm.js":4903,"./bn":1290,"./bn-bd":7357,"./bn-bd.js":7357,"./bn.js":1290,"./bo":1545,"./bo.js":1545,"./br":1470,"./br.js":1470,"./bs":4429,"./bs.js":4429,"./ca":7306,"./ca.js":7306,"./cs":6464,"./cs.js":6464,"./cv":3635,"./cv.js":3635,"./cy":4226,"./cy.js":4226,"./da":3601,"./da.js":3601,"./de":7853,"./de-at":6111,"./de-at.js":6111,"./de-ch":4697,"./de-ch.js":4697,"./de.js":7853,"./dv":708,"./dv.js":708,"./el":4691,"./el.js":4691,"./en-au":3872,"./en-au.js":3872,"./en-ca":8298,"./en-ca.js":8298,"./en-gb":6195,"./en-gb.js":6195,"./en-ie":6584,"./en-ie.js":6584,"./en-il":5543,"./en-il.js":5543,"./en-in":9033,"./en-in.js":9033,"./en-nz":9402,"./en-nz.js":9402,"./en-sg":3004,"./en-sg.js":3004,"./eo":2934,"./eo.js":2934,"./es":7650,"./es-do":838,"./es-do.js":838,"./es-mx":7730,"./es-mx.js":7730,"./es-us":6575,"./es-us.js":6575,"./es.js":7650,"./et":3035,"./et.js":3035,"./eu":3508,"./eu.js":3508,"./fa":119,"./fa.js":119,"./fi":527,"./fi.js":527,"./fil":5995,"./fil.js":5995,"./fo":2477,"./fo.js":2477,"./fr":5498,"./fr-ca":6435,"./fr-ca.js":6435,"./fr-ch":7892,"./fr-ch.js":7892,"./fr.js":5498,"./fy":7071,"./fy.js":7071,"./ga":1734,"./ga.js":1734,"./gd":217,"./gd.js":217,"./gl":7329,"./gl.js":7329,"./gom-deva":2124,"./gom-deva.js":2124,"./gom-latn":3383,"./gom-latn.js":3383,"./gu":5050,"./gu.js":5050,"./he":1713,"./he.js":1713,"./hi":3861,"./hi.js":3861,"./hr":6308,"./hr.js":6308,"./hu":609,"./hu.js":609,"./hy-am":7160,"./hy-am.js":7160,"./id":4063,"./id.js":4063,"./is":9374,"./is.js":9374,"./it":8383,"./it-ch":1827,"./it-ch.js":1827,"./it.js":8383,"./ja":3827,"./ja.js":3827,"./jv":9722,"./jv.js":9722,"./ka":1794,"./ka.js":1794,"./kk":7088,"./kk.js":7088,"./km":6870,"./km.js":6870,"./kn":4451,"./kn.js":4451,"./ko":3164,"./ko.js":3164,"./ku":8174,"./ku-kmr":6181,"./ku-kmr.js":6181,"./ku.js":8174,"./ky":8474,"./ky.js":8474,"./lb":9680,"./lb.js":9680,"./lo":5867,"./lo.js":5867,"./lt":5766,"./lt.js":5766,"./lv":9532,"./lv.js":9532,"./me":8076,"./me.js":8076,"./mi":1848,"./mi.js":1848,"./mk":306,"./mk.js":306,"./ml":3739,"./ml.js":3739,"./mn":9053,"./mn.js":9053,"./mr":6169,"./mr.js":6169,"./ms":3386,"./ms-my":2297,"./ms-my.js":2297,"./ms.js":3386,"./mt":7075,"./mt.js":7075,"./my":2264,"./my.js":2264,"./nb":2274,"./nb.js":2274,"./ne":8235,"./ne.js":8235,"./nl":2572,"./nl-be":3784,"./nl-be.js":3784,"./nl.js":2572,"./nn":4566,"./nn.js":4566,"./oc-lnc":9330,"./oc-lnc.js":9330,"./pa-in":9849,"./pa-in.js":9849,"./pl":4418,"./pl.js":4418,"./pt":9834,"./pt-br":8303,"./pt-br.js":8303,"./pt.js":9834,"./ro":4457,"./ro.js":4457,"./ru":2271,"./ru.js":2271,"./sd":1221,"./sd.js":1221,"./se":3478,"./se.js":3478,"./si":7538,"./si.js":7538,"./sk":5784,"./sk.js":5784,"./sl":6637,"./sl.js":6637,"./sq":6794,"./sq.js":6794,"./sr":5719,"./sr-cyrl":3322,"./sr-cyrl.js":3322,"./sr.js":5719,"./ss":6e3,"./ss.js":6e3,"./sv":1011,"./sv.js":1011,"./sw":748,"./sw.js":748,"./ta":1025,"./ta.js":1025,"./te":1885,"./te.js":1885,"./tet":8861,"./tet.js":8861,"./tg":6571,"./tg.js":6571,"./th":5802,"./th.js":5802,"./tk":9527,"./tk.js":9527,"./tl-ph":9231,"./tl-ph.js":9231,"./tlh":1052,"./tlh.js":1052,"./tr":5096,"./tr.js":5096,"./tzl":9846,"./tzl.js":9846,"./tzm":1765,"./tzm-latn":7711,"./tzm-latn.js":7711,"./tzm.js":1765,"./ug-cn":8414,"./ug-cn.js":8414,"./uk":6618,"./uk.js":6618,"./ur":158,"./ur.js":158,"./uz":7609,"./uz-latn":4856,"./uz-latn.js":4856,"./uz.js":7609,"./vi":1135,"./vi.js":1135,"./x-pseudo":4051,"./x-pseudo.js":4051,"./yo":2218,"./yo.js":2218,"./zh-cn":2648,"./zh-cn.js":2648,"./zh-hk":1632,"./zh-hk.js":1632,"./zh-mo":1541,"./zh-mo.js":1541,"./zh-tw":304,"./zh-tw.js":304};function o(e){var t=i(e);return s(t)}function i(e){if(!s.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=i,e.exports=o,o.id=5358},7054:function(e,t,s){"use strict";var n=s(3751),o=s(641);const i={id:"app",class:"w-full h-full"};function a(e,t,s,n,a,r){const l=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",i,[((0,o.uX)(),(0,o.Wv)(l,{key:e.$route.fullPath}))])}var r={name:"App"},l=s(6262);const c=(0,l.A)(r,[["render",a]]);var u=c,d=(s(4114),s(5220)),m=s(33);const f={class:"flex w-full h-screen flex-col-reverse md:flex-row"},p={class:"flex w-full md:w-1/2 h-full"},g={class:"flex items-center justify-center w-full h-full"},h={class:"w-full md:w-1/2 flex flex-col font-bold p-5 md:p-0"},w={key:0,class:"fixed w-full h-full top-0 left-0 flex items-center justify-center"},b={class:"modal-main bg-white w-11/12 max-w-md mx-auto rounded-lg z-50 overflow-y-auto max-h-full"},v={key:0},y={class:"pl-1 pr-4 py-1 h-12"},k={class:"pt-5 px-8"},x={class:"w-full bg-lightblue border-b-2 border-dark mb-8 p-2"},T={key:1},S={class:"pl-1 pr-4 py-1 h-12"},E={key:2},_={class:"pl-1 pr-4 py-1 h-12"},j={class:"pt-5 px-8"},N={class:"w-full bg-lightblue border-b-2 border-dark p-2"},A=["type"],M={key:3},P={class:"pl-1 pr-4 py-1 h-12"},O={class:"pt-5 px-8"};function L(e,t,s,i,a,r){const l=(0,o.gN)("escape");return(0,o.bo)(((0,o.uX)(),(0,o.CE)("div",f,[t[29]||(t[29]=(0,o.Fv)('<div class="flex w-full md:w-1/2 h-full bg-blue p-5 md:p-0"><div class="flex items-center justify-center w-full h-full"><div class="flex flex-col"><div class="flex items-center"><i class="fas fa-search text-white text-2xl mr-5"></i><p class="text-white font-bold text-xl">Follow your interests.</p></div><div class="flex items-center mt-10"><i class="fas fa-user-friends text-white text-2xl mr-4"></i><p class="text-white font-bold text-xl"> Hear what people are talking about. </p></div><div class="flex items-center mt-10"><i class="fas fa-comment text-white text-2xl mr-5"></i><p class="text-white font-bold text-xl">Join the conversation.</p></div></div></div></div>',1)),(0,o.Lk)("div",p,[(0,o.Lk)("div",g,[(0,o.Lk)("div",h,[t[13]||(t[13]=(0,o.Lk)("p",{class:"text-3xl mb-12"}," Dive deep into the Warp and see what happens... ",-1)),t[14]||(t[14]=(0,o.Lk)("p",null,"Join Warpnet today.",-1)),a.isFirstRun?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[0]||(t[0]=(0,n.D$)((t=>e.setSignupStep("step1")),["prevent"])),class:"rounded-full bg-blue font-bold text-lg text-white mt-4 p-3 hover:bg-darkblue"}," Sign up ")):((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[1]||(t[1]=(0,n.D$)(((...e)=>r.showSignInPage&&r.showSignInPage(...e)),["prevent"])),class:"rounded-full border border-blue bg-white font-bold text-lg text-blue mt-4 p-3 hover:bg-lightblue"}," Log in "))])])]),""!==e.showModal?((0,o.uX)(),(0,o.CE)("div",w,[(0,o.Lk)("div",{class:"absolute w-full h-full bg-gray-900 opacity-50",onClick:t[2]||(t[2]=(0,n.D$)((e=>r.setSignUpStep("")),["prevent"]))}),(0,o.Lk)("div",b,["step1"===e.showModal?((0,o.uX)(),(0,o.CE)("div",v,[(0,o.Lk)("div",y,[(0,o.Lk)("button",{onClick:t[3]||(t[3]=e=>r.setSignUpStep("step2")),class:(0,m.C4)(["rounded-full bg-blue font-bold text-white mt-2 p-1 pl-3 pr-3 relative right-0 float-right hover:bg-darkblue",""+(a.username?"":"opacity-50 cursor-not-allowed")])}," Next ",2),t[15]||(t[15]=(0,o.Lk)("i",{class:"flex justify-center fab text-blue text-2xl mt-2 mb-8"},null,-1))]),(0,o.Lk)("div",k,[t[17]||(t[17]=(0,o.Lk)("div",{class:"flex justify-between items-center pb-8"},[(0,o.Lk)("p",{class:"text-2xl font-bold"},"Create your account")],-1)),(0,o.Lk)("div",x,[t[16]||(t[16]=(0,o.Lk)("p",{class:"text-dark"},"Username",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>a.username=e),class:"w-full bg-lightblue text-lg",type:"text"},null,512),[[n.Jo,a.username]])])])])):(0,o.Q3)("",!0),"step2"===e.showModal?((0,o.uX)(),(0,o.CE)("div",T,[(0,o.Lk)("div",S,[(0,o.Lk)("button",{onClick:t[5]||(t[5]=e=>r.setSignUpStep("step1")),class:"absolute rounded-full p-2 pl-3 hover:bg-lightblue"},t[18]||(t[18]=[(0,o.Lk)("i",{class:"fas fa-arrow-left text-blue"},null,-1)])),(0,o.Lk)("button",{onClick:t[6]||(t[6]=e=>r.setSignUpStep("step3")),class:"rounded-full bg-blue font-bold text-white mt-2 p-1 pl-3 pr-3 relative right-0 float-right hover:bg-darkblue"}," Next "),t[19]||(t[19]=(0,o.Lk)("i",{class:"flex justify-center fab text-blue text-2xl mt-2 mb-8"},null,-1))]),t[20]||(t[20]=(0,o.Fv)('<div class="pt-5 px-8"><div class="flex justify-between items-center pb-8"><p class="text-2xl font-bold">Customize your experience</p></div><div class="mt-5 mb-8"><p class="font-bold text-xl mb-1">Get more out of Warpnet</p><div class="flex justify-between items-top"><p> TODO. </p><input class="mt-1 ml-2 mr-2" type="checkbox"></div></div><div class="mt-5 mb-8"><p class="font-bold text-xl mb-1">Connect with people you know</p><div class="flex justify-between items-top"><p> TODO. </p><input class="mt-1 ml-2 mr-2" type="checkbox"></div></div><div class="mt-5 mb-5"><p class="font-bold text-xl mb-1">Personalized ads</p><div class="flex justify-between items-top"><p> You will always see ads on Warpnet based on your Warpnet activity. When this setting is enabled, Warpnet may further personalise ads from Warpnet advertisers, on and off Warpnet, by combining your Warpnet activity with other online activity and information from our partners. </p><input class="mt-1 ml-2 mr-2" type="checkbox"></div></div></div>',1))])):(0,o.Q3)("",!0),"step3"===e.showModal?((0,o.uX)(),(0,o.CE)("div",E,[(0,o.Lk)("div",_,[(0,o.Lk)("button",{onClick:t[7]||(t[7]=e=>r.setSignUpStep("step2")),class:"absolute rounded-full p-2 pl-3 hover:bg-lightblue"},t[21]||(t[21]=[(0,o.Lk)("i",{class:"fas fa-arrow-left text-blue"},null,-1)])),(0,o.Lk)("button",{onClick:t[8]||(t[8]=e=>r.setSignUpStep("step4")),class:"rounded-full bg-blue font-bold text-white mt-2 p-1 pl-3 pr-3 relative right-0 float-right hover:bg-darkblue"}," Next "),t[22]||(t[22]=(0,o.Lk)("i",{class:"flex justify-center fab text-blue text-2xl mt-2 mb-8"},null,-1))]),(0,o.Lk)("div",j,[t[24]||(t[24]=(0,o.Lk)("div",{class:"flex justify-between items-center pb-4"},[(0,o.Lk)("p",{class:"text-2xl font-bold"},"You'll need a password")],-1)),(0,o.Lk)("div",N,[t[23]||(t[23]=(0,o.Lk)("p",{class:"leading-tight text-dark"},"Password",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>a.password=e),class:"w-full bg-lightblue text-lg",type:""+(a.revealPassword?"text":"password")},null,8,A),[[n.hp,a.password]])]),(0,o.Lk)("button",{onClick:t[10]||(t[10]=e=>a.revealPassword=!a.revealPassword),class:"text-blue pl-2"}," Reveal password ")])])):(0,o.Q3)("",!0),"step4"===e.showModal?((0,o.uX)(),(0,o.CE)("div",M,[(0,o.Lk)("div",P,[(0,o.Lk)("button",{onClick:t[11]||(t[11]=e=>r.setSignUpStep("step3")),class:"absolute rounded-full p-2 pl-3 hover:bg-lightblue"},t[25]||(t[25]=[(0,o.Lk)("i",{class:"fas fa-arrow-left text-blue"},null,-1)])),t[26]||(t[26]=(0,o.Lk)("p",{class:"flex items-start ml-12 p-2 text-xl font-extrabold"}," Step 4 of 5 ",-1))]),(0,o.Lk)("div",O,[t[27]||(t[27]=(0,o.Lk)("div",{class:"flex justify-between items-center pb-8"},[(0,o.Lk)("p",{class:"text-2xl font-bold"},"Create your account")],-1)),t[28]||(t[28]=(0,o.Lk)("p",null,[(0,o.eW)(" By signing up, you agree to our "),(0,o.Lk)("a",{href:"#",class:"text-blue"},"Terms"),(0,o.eW)(", "),(0,o.Lk)("a",{href:"#",class:"text-blue"},"Privacy Policy"),(0,o.eW)(" and ")],-1)),(0,o.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>r.signMeUp&&r.signMeUp(...e)),class:"w-full rounded-full mt-4 py-3 bg-blue text-white font-bold hover:bg-darkblue"}," Sign up ")])])):(0,o.Q3)("",!0)])])):(0,o.Q3)("",!0)])),[[l,r.esc]])}var R=s(6278),I=(s(6573),s(8100),s(7936),s(7467),s(4732),s(9577),s(7526)),C=s(5380),W=s(8287);let U;function D(){return U||(U=new F("ws://localhost:4002/v1/api/ws")),U}class F{constructor(e){this.dh=C.getDiffieHellman("modp14"),this.dh.generateKeys(),this.url=e,this.publicKey=this.dh.getPublicKey(),this.externalPublicKey=null,this.aesKey=null,this.socket=null,this.secretRenew=!1,this.messagesMap=new Map([["",{}]])}splitMessage(e){let t=e.split(":");return 2!==t.length&&console.error("Invalid message format:",e),t}async deriveKey(e,t){const s=await crypto.subtle.importKey("raw",e,"HKDF",!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"HKDF",salt:(new TextEncoder).encode(t),info:new Uint8Array,hash:"SHA-256"},s,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])}async encryptMessage(e,t){const s=crypto.getRandomValues(new Uint8Array(12)),n=await crypto.subtle.encrypt({name:"AES-GCM",iv:s},e,(new TextEncoder).encode(t));return{ciphertext:W.Buffer.from(new Uint8Array(n)),nonce:W.Buffer.from(s)}}async decryptMessage(e,t,s){const n=await crypto.subtle.decrypt({name:"AES-GCM",iv:s},e,t);return(new TextDecoder).decode(n)}async onMessage(e){console.log("Message received:",e.data);const t="string"===typeof e.data?e.data:JSON.stringify(e.data),s=W.Buffer.from(t,"base64");if(!this.aesKey)return console.log("Received server public key"),this.externalPublicKey=s,await this.computeSecret(H()),void console.log("Shared secret established.");const[n,o]=this.splitMessage(t),i=W.Buffer.from(n,"base64"),a=W.Buffer.from(o,"base64");let r="";try{r=await this.decryptMessage(this.aesKey,i,a)}catch(c){return void console.error("Error decrypting message:",c.message)}let l=null;try{l=JSON.parse(r)}catch(u){return console.error("JSON parsing:",u.message),void this.socket.send(u.message)}l&&(l.token&&!this.secretRenew&&(await this.computeSecret(l.token),this.secretRenew=!0,console.log("secret renewed")),this.messagesMap.get(l.message_id)||console.log("not requested message received:",l),this.messagesMap.set(l.message_id,l))}onError(e){console.error("WebSocket error:",e)}onClose(){console.log("WebSocket connection closed")}close(){this.socket&&(this.socket.removeEventListener("open",this.onOpen.bind(this)),this.socket.removeEventListener("close",this.onClose.bind(this)),this.socket.removeEventListener("message",this.onMessage.bind(this)),this.socket.removeEventListener("error",this.onError.bind(this)),this.socket.close(),this.socket=null)}async computeSecret(e){const t=this.dh.computeSecret(this.externalPublicKey);this.aesKey=await this.deriveKey(t,e)}connect(){console.log("connect called");try{this.socket=new WebSocket(this.url),this.socket.addEventListener("open",this.onOpen.bind(this)),this.socket.addEventListener("close",this.onClose.bind(this)),this.socket.addEventListener("message",this.onMessage.bind(this)),this.socket.addEventListener("error",this.onError.bind(this))}catch(e){console.error("Error while connecting WebSocket:",e)}}onOpen(){console.log("WebSocket connection opened"),this.socket.send(this.publicKey.toString("base64")),console.log("Public key is sent.")}async getResponse(e){const t=25;let s=0;while(s<t){const t=this.messagesMap.get(e);if(t)break;await new Promise((e=>setTimeout(e,200))),s++}if(s>=t)throw new Error("Token not found after maximum retries.");let n=this.messagesMap.get(e);return this.messagesMap.delete(e),n}async sendMessage(e){let t=G();if(e.message_id=t,this.messagesMap.set(e.id,null),e=JSON.stringify(e),!this.aesKey)throw console.log("Sending message: not authenticated!"),new Error("Not authenticated!");if(this.socket.readyState!==WebSocket.OPEN)return void console.error("WebSocket is not open");const{ciphertext:s,nonce:n}=await this.encryptMessage(this.aesKey,e),o=`${I.fromByteArray(s)}:${I.fromByteArray(n)}`;return await this.socket.send(o),t}}function H(){const e=new Date;return e.toISOString().split("T")[0]}function G(){let e=(new Date).getTime(),t="undefined"!==typeof performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(s){let n=16*Math.random();return e>0?(n=(e+n)%16|0,e=Math.floor(e/16)):(n=(t+n)%16|0,t=Math.floor(t/16)),("x"===s?n:3&n|8).toString(16)}))}const z=D();function B(){z.socket&&z.socket.readyState===WebSocket.OPEN?console.log("WebSocket is already connected."):(z.connect(),z.setupCallback((async e=>{sessionStorage.setItem("owner",e.user)})))}var $={client:z,loginUser({commit:e},t){e("USER_LOGIN",t)},async logoutUser({commit:e,dispatch:t}){await z.sendMessage({event_type:"LogoutEvent"}),z.close(),e("USER_LOGOUT"),sessionStorage.clear(),t("signup/setSignupStep","",{root:!0}),t("warpnet/unsubscribeNotifications",null,{root:!0}),t("warpnet/resetState",null,{root:!0}),t("profilePage/resetState",null,{root:!0}),Z.push("/")},async signInUser({dispatch:e,commit:t},s){let n=await z.sendMessage({event_type:"LoginEvent",username:s.username,password:s.password}),o=await z.getResponse(n);sessionStorage.setItem("owner",o.user),t("USER_SIGNUP",o.user),await e("loginUser",o.user),await e("warpnet/setProfile",o.user,null,{root:!0}),await e("warpnet/subscribeNotifications",null,{root:!0}),Z.push({name:"Home"})},async loginUserIfAlreadyAuthenticated({dispatch:e}){const t=sessionStorage.getItem("owner");t&&(console.log("user is logged in already"),await e("loginUser",t),await e("warpnet/setProfile",null,{root:!0}),await e("warpnet/subscribeNotifications",null,{root:!0}))}},K={name:"Root",data(){return{username:"",password:"",revealPassword:!1,isFirstRun:!1}},mounted(){this.isFirstRun=window.isFirstRun||!1,console.log("Is first run:",this.isFirstRun),B()},computed:{...(0,R.L8)("signup",["showModal"]),...(0,R.L8)("authentication",["user"])},methods:{showSignInPage(){this.$router.push("LogIn")},...(0,R.i0)("signup",["setSignupStep"]),...(0,R.i0)("authentication",["signInUser","logoutUser"]),async signMeUp(){try{await this.signInUser({username:this.username,password:this.password}),this.setSignupStep("step5")}catch(e){this.logoutUser(),alert("Error signing up, please check console for error detail"),console.log("error signing up:",e)}},setSignUpStep(e){switch(e){case"step2":if(!this.username)return;break;case"step4":break}this.setSignupStep(e)},esc(){this.setSignupStep("")}}};const V=(0,l.A)(K,[["render",L]]);var J=V,q=(s(8992),s(7550),async(e,t,s)=>{const n=e.matched.some((e=>e.meta.protected)),o=sessionStorage.getItem("owner");!n||o?s():s("/")});const Y=[{path:"/",name:"Root",component:J},{path:"/login",name:"Login",component:()=>s.e(966).then(s.bind(s,7182))},{path:"/home",name:"Home",component:()=>Promise.all([s.e(812),s.e(962)]).then(s.bind(s,7828)),meta:{protected:!0}},{path:"/search",name:"Search",component:()=>Promise.all([s.e(812),s.e(187)]).then(s.bind(s,7884)),meta:{protected:!0}},{path:"/hashtag",name:"Hashtag",component:()=>Promise.all([s.e(812),s.e(541)]).then(s.bind(s,850)),meta:{protected:!0}},{path:"/notifications",name:"Notifications",component:()=>s.e(893).then(s.bind(s,5960)),meta:{protected:!0}},{path:"/messages",name:"Messages",component:()=>s.e(871).then(s.bind(s,3745)),props:!0,meta:{protected:!0}},{path:"/:username",name:"Profile",component:()=>Promise.all([s.e(812),s.e(138)]).then(s.bind(s,5043)),meta:{protected:!0}},{path:"/:username/followers",name:"Followers",component:()=>Promise.all([s.e(342),s.e(596)]).then(s.bind(s,8672)),props:!0,meta:{protected:!0}},{path:"/:username/following",name:"Following",component:()=>Promise.all([s.e(342),s.e(856)]).then(s.bind(s,5626)),props:!0,meta:{protected:!0}}],X=(0,d.aE)({history:(0,d.LA)(),routes:Y});X.beforeEach(q);const Q=X.push;X.push=function(e,t,s){return t||s?Q.call(this,e,t,s):Q.call(this,e).catch((e=>(0,d.Pq)(e,d.$c.duplicated)?e:Promise.reject(e)))};var Z=X,ee={USER_LOGIN(e,t){e.user=t,e.loggedIn=!0},USER_LOGOUT(e){e.loggedIn=!1,e.user=void 0,e.profile=null},USER_SIGNUP(e,t){e.user=t}},te={loggedIn:e=>e.loggedIn,user:e=>e.user};const se=()=>({loggedIn:!1,user:void 0});var ne={namespaced:!0,actions:$,mutations:ee,getters:te,state:se},oe={setSignupStep({commit:e},t){e("SIGNUP_STEP_SET",t)}},ie={SIGNUP_STEP_SET(e,t){e.step=t}},ae={showModal:e=>e.step};const re=()=>({step:""});var le={namespaced:!0,actions:oe,mutations:ie,getters:ae,state:re};s(7642),s(8004),s(3853),s(5876),s(2475),s(5024),s(1698);const ce=D();var ue={async setProfile({commit:e}){const t=sessionStorage.getItem("owner");e("PROFILE_SET",t)},async getProfileByusername(e){let t=await ce.sendMessage({user_id:e,timestamp:(new Date).toISOString()});return await ce.getResponse(t)},async loadProfile({commit:e,rootState:t},s){if(s)if(t.warpnet.profile.username===s){const t=sessionStorage.getItem("owner");e("PROFILE_SET",t)}else{const t=await this.getProfileByusername(s);e("PROFILE_SET",t)}},async loadMyTimeline({dispatch:e}){await e("getMyTimeline",20)},async loadTweets({dispatch:e,rootState:t},s){if(s)if(t.warpnet.profile.username===s)await e("getTweets",{userId:t.warpnet.profile.id,limit:20});else{const t=await getProfileByusername(s);await e("getTweets",{userId:t.id,limit:10})}},async getMyTimeline({commit:e},t,s){let n=sessionStorage.getItem("owner"),o=await ce.sendMessage({event_type:"GetTimelineEvent",user_id:n.user_id,limit:t,cursor:s,timestamp:(new Date).toISOString()});const i=await ce.getResponse(o);e("WARPNET_TIMELINE",i)},async createTweet({commit:e,dispatch:t},{text:s}){let n=sessionStorage.getItem("owner"),o=await ce.sendMessage({tweet:{user_id:n.user_id,username:n.username,text:s,created_at:(new Date).toISOString()},timestamp:(new Date).toISOString()});const i=await ce.getResponse(o);e("WARPNET_CREATE",i),await t("getMyTimeline",20)},async getTweets({commit:e},{userId:t,limit:s,nextCursor:n}){let o=await ce.sendMessage({event_type:"GetTweetsEvent",user_id:t,limit:s,cursor:n,timestamp:(new Date).toISOString()});const i=await ce.getResponse(o);e("WARPNET_TIMELINE",i)},async loadMoreTweets({commit:e,getters:t},s){if(!t.nextTokenTweets)return;const n=await this.getTweets(e,{userId:t.profile.id,limit:s,nextCursor:t.nextTokenTweets});e("WARPNET_LOADMORE_TWEETS",n)},async loadMoreMyTimeline({commit:e,getters:t},s){if(!t.nextTokenTweets)return;const n=await this.getMyTimeline(e,s,t.nextTokenTweets);e("WARPNET_LOADMORE_TWEETS",n)},async replyTweet({dispatch:e},{rootId:t,parentId:s,text:n}){await reply(t,s,n),await e("getMyTimeline",20)},async likeTweet(e,t){await like(t)},async unlikeTweet(e,t){await unlike(t)},async retweetTweet(e,t){await retweet(t)},async unretweetTweet(e,t){await unretweet(t)},async getImageUploadUrl(e,{extension:t,contentType:s}){return await getImageUploadUrl(t,s)},async editMyProfile({commit:e},t){const s=await editMyProfile(t);return e("PROFILE_SET",s),s},async followUser(e,t){await follow(t)},async unfollowUser(e,t){await unfollow(t)},async getFollowers({commit:e},{userId:t,limit:s}){const n=await getFollowers(t,s);e("WARPNET_FOLLOWERS",n)},async getFollowing({commit:e},{userId:t,limit:s}){const n=await getFollowing(t,s);e("WARPNET_FOLLOWING",n)},async loadSearch({commit:e},{query:t,mode:s,limit:n}){},async loadMoreSearch({commit:e,getters:t},{query:s,mode:n,limit:o}){},resetSearch({commit:e}){const t={results:[],nextToken:void 0};e("WARPNET_SEARCH",t)},async loadSearchHashTag({commit:e},{query:t,mode:s,limit:n}){},async loadMoreSearchHashTag({commit:e,getters:t},{query:s,mode:n,limit:o}){},resetSearchHashTag({commit:e}){const t={results:[],nextToken:void 0};e("WARPNET_SEARCH_HASHTAG",t)},async subscribeNotifications({commit:e,getters:t,dispatch:s}){if(!t.profile.id||t.subscription)return;const n=(e,t,s)=>{const n=e<t.otherUserId?`${e}_${t.otherUserId}`:`${t.otherUserId}_${e}`;return s&&s.id===n},o=t.profile.id,i=getOnNotifiedSubscription(o).subscribe({next:async({value:i})=>{const a=i.data.onNotified;"DMed"===a.type?(await s("loadConversations",20),n(o,a,t.conversation)&&await s("getDirectMessages",{limit:10,message:a.message,otherUserId:a.otherUserId}),e("WARPNET_MESSAGES_NEW",a)):(await s("getMyTimeline",20),e("WARPNET_NOTIFICATIONS_NEW",a))}});e("WARPNET_NOTIFICATIONS_SUBSCRIBE",i)},resetNotifications({commit:e}){e("WARPNET_NOTIFICATIONS_RESET")},unsubscribeNotifications({commit:e}){e("WARPNET_NOTIFICATIONS_UNSUBSCRIBE")},async loadConversations({commit:e},t){const s=await listConversations(t);e("WARPNET_CONVERSATIONS_LOAD",s)},resetMessages({commit:e}){e("WARPNET_MESSAGES_RESET")},async getDirectMessages({commit:e},{otherUserId:t,limit:s,nextToken:n}){const o=await getDirectMessages(t,s,n);e("WARPNET_MESSAGES_LOAD",o)},async loadMoreDirectMessages({commit:e,getters:t},{otherUserId:s,limit:n}){if(!t.nextTokenMessages)return;const o=await getDirectMessages(s,n,t.nextTokenMessages);e("WARPNET_LOADMORE_MESSAGES",o)},async sendDirectMessage({commit:e,dispatch:t},{message:s,otherUserId:n}){await sendDirectMessage(s,n),await t("loadConversations",10);const o=await getDirectMessages(n,10);e("WARPNET_MESSAGES_LOAD",o)},setActiveConversation({commit:e},t){e("WARPNET_CONVERSATION_ACTIVE_SET",t)},resetState({commit:e}){e("WARPNET_RESET_STATE")}},de={PROFILE_SET(e,t){e.profile=t},WARPNET_TIMELINE(e,{tweets:t,nextToken:s}){e.tweets.tweets=t,e.tweets.nextToken=s},WARPNET_CREATE(e,t){const s=[...e.tweets.tweets];e.tweets.tweets=s.unshift(t)},WARPNET_FOLLOWERS(e,{profiles:t,nextToken:s}){e.followers.followers=t,e.followers.nextToken=s},WARPNET_FOLLOWING(e,{profiles:t,nextToken:s}){e.following.following=t,e.following.nextToken=s},WARPNET_LOADMORE_TWEETS(e,{tweets:t,nextToken:s}){e.tweets.tweets=[...e.tweets.tweets,...t],e.tweets.nextToken=s},WARPNET_SEARCH(e,{results:t,nextToken:s}){e.search.results=t,e.search.nextToken=s},WARPNET_LOADMORE_SEARCH(e,{results:t,nextToken:s}){e.search.results=[...e.search.results,...t],e.search.nextToken=s},WARPNET_SEARCH_HASHTAG(e,{results:t,nextToken:s}){e.search.results=t,e.search.nextToken=s},WARPNET_LOADMORE_SEARCH_HASHTAG(e,{results:t,nextToken:s}){e.search.results=[...e.search.results,...t],e.search.nextToken=s},WARPNET_NOTIFICATIONS_SUBSCRIBE(e,t){e.notifications.subscription=t,e.notifications.newNotifications=0,e.notifications.messages.newMessages=0},WARPNET_NOTIFICATIONS_UNSUBSCRIBE(e){let t=e.notifications.subscription;t&&(t.unsubscribe(),e.notifications.subscription=void 0)},WARPNET_NOTIFICATIONS_NEW(e,t){"Mentioned"===t?.type?e.notifications.mentions=[t,...e.notifications.mentions]:e.notifications.all=[t,...e.notifications.all],e.notifications.newNotifications=e.notifications.newNotifications+1},WARPNET_NOTIFICATIONS_RESET(e){e.notifications.newNotifications=0},WARPNET_CONVERSATIONS_LOAD(e,{conversations:t,nextToken:s}){e.notifications.messages.conversations=t,e.notifications.messages.nextToken=s},WARPNET_MESSAGES_NEW(e,t){let s=e.notifications.messages.conversationsSet,n=e.notifications.messages.active.conversation;const o=e.profile.id<t.otherUserId?`${e.profile.id}_${t.otherUserId}`:`${t.otherUserId}_${e.profile.id}`,i=e=>!e||e.id!==o;i(n)&&(s.has(o)||s.add(o),e.notifications.messages.newMessages=e.notifications.messages.newMessages+1,e.notifications.messages.conversations=[...e.notifications.messages.conversations])},WARPNET_MESSAGES_RESET(e){e.notifications.messages.newMessages=0},WARPNET_MESSAGES_LOAD(e,{messages:t,nextToken:s}){e.notifications.messages.active.messages=t,e.notifications.messages.active.nextTokenMessages=s},WARPNET_LOADMORE_MESSAGES(e,{messages:t,nextToken:s}){e.notifications.messages.active.messages=[...e.notifications.messages.active.messages,...t],e.notifications.messages.active.nextTokenMessages=s},WARPNET_MESSAGES_SEND(e,t){e.notifications.messages.active.messages=[...e.notifications.messages.active.messages,t]},WARPNET_CONVERSATION_ACTIVE_SET(e,t){let s=e.notifications.messages.conversationsSet;s&&t&&s.has(t.id)&&(s.delete(t.id),e.notifications.messages.newMessages=0),e.notifications.messages.conversationsSet=s,e.notifications.messages.active.conversation=t,e.notifications.messages.active.messages=[],e.notifications.messages.active.nextTokenMessages=void 0},WARPNET_RESET_STATE(e){Object.assign(e,{profile:{id:"",created_at:"1970-01-01",avatar:"default_profile.png"},tweets:{tweets:[],nextToken:void 0},followers:{followers:[],nextToken:void 0},following:{following:[],nextToken:void 0},search:{results:[],nextToken:void 0},notifications:{all:[],mentions:[],newNotifications:0,subscription:void 0,messages:{conversations:[],nextToken:void 0,newMessages:0,conversationsSet:new Set,active:{conversation:void 0,messages:[],nextTokenMessages:void 0}}}})}},me=s(5093),fe=s.n(me),pe={profile:e=>e.profile,tweets:e=>e.tweets.tweets,nextTokenTweets:e=>e.tweets.nextToken,joinedDate:e=>fe()(e.profile.created_at).format("MMMM YYYY"),isSelf:e=>t=>e.profile.username===t,followers:e=>e.followers.followers,nextTokenFollowers:e=>e.followers.nextToken,following:e=>e.following.following,nextTokenFollowing:e=>e.following.nextToken,search:e=>e.search.results,nextTokenSearch:e=>e.search.nextToken,searchHashTag:e=>e.search.results,nextTokenSearchHashTag:e=>e.search.nextToken,all:e=>e.notifications.all,mentions:e=>e.notifications.mentions,newNotifications:e=>e.notifications.newNotifications,subscription:e=>e.notifications.subscription,newMessages:e=>e.notifications.messages.newMessages,conversationsSet:e=>e.notifications.messages.conversationsSet,hasNewMessages:e=>t=>{const s=e.notifications.messages.conversationsSet,n=e.notifications.messages.active.conversation;return s.has(t.id)&&(n&&t.id!==n.id||!n)},conversations:e=>e.notifications.messages.conversations,nextTokenConversations:e=>e.notifications.messages.conversations.nextToken,messages:e=>e.notifications.messages.active.messages,nextTokenMessages:e=>e.notifications.messages.active.nextTokenMessages,conversation:e=>e.notifications.messages.active.conversation};const ge={profile:{id:"",created_at:"2022-03-27",avatar:"default_profile.png",bio:"",background_image:"",followers_num:0,following_num:0,username:"Anonymous",tweets_num:0,likes_num:0,node_id:""},tweets:{tweets:[],nextToken:void 0},followers:{followers:[],nextToken:void 0},following:{following:[],nextToken:void 0},search:{results:[],nextToken:void 0},notifications:{all:[],mentions:[],newNotifications:0,subscription:void 0,messages:{conversations:[],nextToken:void 0,newMessages:0,conversationsSet:new Set,active:{conversation:void 0,messages:[],nextTokenMessages:void 0}}}},he=()=>({...ge});var we={namespaced:!0,actions:ue,mutations:de,getters:pe,state:he};const be=(0,R.y$)({modules:{authentication:ne,signup:le,warpnet:we,profilePage:we}});var ve=be,ye={bind:function(e,t){"function"===typeof t.value&&(e.__callback__=s=>{27===s.keyCode&&t.value(s,e)},e.addEventListener("keyup",e.__callback__))},unbind:function(e){e.removeEventListener("keyup",e.__callback__),e.__callback__=null}},ke={bind:function(e,t){"function"===typeof t.value&&(e.__callback__=s=>{if("top"==t.arg){if(!e)return;const n=0==e.scrollTop;if(!n)return;t.value(s,e)}else if("bottom"==t.arg){if(!e)return;const n=Math.ceil(e.offsetHeight+e.scrollTop)>=e.scrollHeight;if(!n)return;t.value(s,e)}else t.value(s,e)},e.addEventListener("scroll",e.__callback__))},unbind:function(e){e.removeEventListener("scroll",e.__callback__),e.__callback__=null}},xe=s(5264);s(4028),s(5204);const Te={formatHref:{hashtag:e=>`#/hashtag?m=Latest&hash=${Date.now()}&q=${escape("#"+e.substr(1))}`,mention:e=>`#/${e.substr(1)}`},target:(e,t)=>"mention"==t||"hashtag"==t?void 0:"_blank",truncate:25,ignoreTags:["script","style"]};var Se={bind:function(e){let t=e.innerHTML;e.innerHTML=(0,xe.A)(t,Te)}},Ee={install(e){e.directive("escape",ye),e.directive("scroll",ke),e.directive("linkify",Se)}};function _e(e){return 0===fe()().diff(e,"days")?fe()(e).fromNow(!0):fe()(e).format("MMM D")}function je(e){const t=fe()(e),s=fe()().startOf("day"),n=fe()().subtract(1,"day").startOf("day");return t<=n?t.format("MMM D, h:mm A"):t<=s?`Yesterday, ${t.format("h:mm A")}`:t.format("h:mm A")}fe().updateLocale("en",{monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],relativeTime:{past:"%ss",s:"Now",ss:"%ss",m:"%dm",mm:"%dm",h:"%dh",hh:"%dh"}}),fe().updateLocale("en",{monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Ne={install(e){e.config.globalProperties.$filters={timeago:_e,time:je}}};const Ae={aws_appsync_graphqlEndpoint:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_APPSYNC_GRAPHQL_ENDPOINT,aws_appsync_region:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_APPSYNC_REGION,aws_appsync_authenticationType:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_APPSYNC_AUTHENTICATION_TYPE},Me=(0,n.Ef)(u);Me.config.globalProperties.$appConfig=Ae,Me.use(Z),Me.use(ve),Me.use(Ee),Me.use(Ne),Me.mount("#app")},7790:function(){},3776:function(){}},t={};function s(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(i.exports,i,i.exports,s),i.loaded=!0,i.exports}s.m=e,function(){var e=[];s.O=function(t,n,o,i){if(!n){var a=1/0;for(u=0;u<e.length;u++){n=e[u][0],o=e[u][1],i=e[u][2];for(var r=!0,l=0;l<n.length;l++)(!1&i||a>=i)&&Object.keys(s.O).every((function(e){return s.O[e](n[l])}))?n.splice(l--,1):(r=!1,i<a&&(a=i));if(r){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[n,o,i]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){s.f={},s.e=function(e){return Promise.all(Object.keys(s.f).reduce((function(t,n){return s.f[n](e,t),t}),[]))}}(),function(){s.u=function(e){return"js/"+({138:"profile",187:"search",541:"hashtag",596:"followers",856:"following",871:"messages",893:"notifications",962:"home",966:"login"}[e]||e)+"."+{138:"867f6c0c",187:"6dc05068",342:"cb27b8c5",541:"874ea240",596:"33a74959",812:"9a9b3033",856:"724cfe01",871:"63a6ad05",893:"bfd656a0",962:"87a30e0c",966:"e3f513ed"}[e]+".js"}}(),function(){s.miniCssF=function(e){}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="warpnet-frontend:";s.l=function(n,o,i,a){if(e[n])e[n].push(o);else{var r,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+i){r=d;break}}r||(l=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,s.nc&&r.setAttribute("nonce",s.nc),r.setAttribute("data-webpack",t+i),r.src=n),e[n]=[o];var m=function(t,s){r.onerror=r.onload=null,clearTimeout(f);var o=e[n];if(delete e[n],r.parentNode&&r.parentNode.removeChild(r),o&&o.forEach((function(e){return e(s)})),t)return t(s)},f=setTimeout(m.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=m.bind(null,r.onerror),r.onload=m.bind(null,r.onload),l&&document.head.appendChild(r)}}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){s.p="/"}(),function(){var e={524:0};s.f.j=function(t,n){var o=s.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var i=new Promise((function(s,n){o=e[t]=[s,n]}));n.push(o[2]=i);var a=s.p+s.u(t),r=new Error,l=function(n){if(s.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var i=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;r.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",r.name="ChunkLoadError",r.type=i,r.request=a,o[1](r)}};s.l(a,l,"chunk-"+t,t)}},s.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,i,a=n[0],r=n[1],l=n[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(o in r)s.o(r,o)&&(s.m[o]=r[o]);if(l)var u=l(s)}for(t&&t(n);c<a.length;c++)i=a[c],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(u)},n=self["webpackChunkwarpnet_frontend"]=self["webpackChunkwarpnet_frontend"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=s.O(void 0,[504],(function(){return s(7054)}));n=s.O(n)})();
//# sourceMappingURL=app.1ea66579.js.map