"use strict";(self["webpackChunkwarpnet_frontend"]=self["webpackChunkwarpnet_frontend"]||[]).push([[962],{4641:function(e,t,i){i.r(t),i.d(t,{default:function(){return v}});var o=i(641),l=i(3751),n=i(33);const a={id:"app",class:"flex container h-screen w-full"},s={class:"w-full h-full overflow-y-scroll no-scrollbar"},r={class:"px-5 py-3 border-b border-lighter flex items-center justify-between"},c={class:"px-5 py-3 border-b-8 border-lighter flex"},d={key:0,class:"flex-none mr-4"},f=["src"],g={class:"w-full relative"},h={key:0,class:"relative mt-4 inline-block"},u=["src"],m={key:0,class:"flex flex-col items-center justify-center w-full pt-10 px-6"};function p(e,t,i,p,b,w){const x=(0,o.g2)("SideNav"),k=(0,o.g2)("Loader"),v=(0,o.g2)("Tweets"),y=(0,o.g2)("InfoOverlay"),I=(0,o.g2)("DefaultRightBar"),L=(0,o.gN)("scroll");return(0,o.uX)(),(0,o.CE)("div",a,[(0,o.bF)(x),(0,o.bo)(((0,o.uX)(),(0,o.CE)("div",s,[(0,o.Lk)("div",r,[t[6]||(t[6]=(0,o.Lk)("h1",{class:"text-xl font-bold"},"Home",-1)),(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>w.toggleInfo&&w.toggleInfo(...e)),class:"fas fa-info-circle text-xl text-blue cursor-pointer hover:bg-lighter","aria-hidden":"true"})]),(0,o.Lk)("div",c,[b.profile?((0,o.uX)(),(0,o.CE)("div",d,[(0,o.Lk)("img",{src:b.profile.avatar||"default_profile.png",class:"flex-none w-12 h-12 rounded-full"},null,8,f)])):(0,o.Q3)("",!0),(0,o.Lk)("div",g,[(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>b.tweet.text=e),placeholder:"What's happening?",class:"w-full focus:outline-none mt-3 pb-3"},null,512),[[l.Jo,b.tweet.text]]),b.imageAttachment?((0,o.uX)(),(0,o.CE)("div",h,[(0,o.Lk)("img",{src:b.imageAttachment,alt:"Image preview",class:"w-32 h-32 object-cover rounded border border-lighter"},null,8,u),(0,o.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>w.removeImageAttachment&&w.removeImageAttachment(...e)),type:"button",class:"absolute top-0 right-0 mt-2 mr-2 bg-white bg-opacity-75 rounded-full p-1 hover:bg-red-500",title:"Remove image"},t[7]||(t[7]=[(0,o.Lk)("i",{class:"fas fa-times text-red-600 hover:text-white"},null,-1)]))])):(0,o.Q3)("",!0),(0,o.Lk)("div",null,[(0,o.Lk)("button",{onClick:t[4]||(t[4]=e=>w.openFileInput("imageUrlFileInput")),class:"text-lg text-blue mr-4 far fa-image"},[(0,o.Lk)("input",{onChange:t[3]||(t[3]=e=>w.fileChange("imageUrlFileInput")),ref:"imageUrlFileInput",accept:"image/*",type:"file",class:"hidden"},null,544)]),t[8]||(t[8]=(0,o.Lk)("i",{class:"text-lg text-blue mr-4 fas fa-film cursor-not-allowed"},null,-1)),t[9]||(t[9]=(0,o.Lk)("i",{class:"text-lg text-blue mr-4 far fa-chart-bar cursor-not-allowed"},null,-1)),t[10]||(t[10]=(0,o.Lk)("i",{class:"text-lg text-blue mr-4 far fa-smile cursor-not-allowed"},null,-1))]),(0,o.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>w.addNewTweet&&w.addNewTweet(...e)),type:"button",class:(0,n.C4)(["h-10 px-4 text-white font-semibold bg-blue hover:bg-darkblue rounded-full absolute bottom-0 right-0",b.tweet.text?"":"opacity-50 cursor-not-allowed"])}," Tweet ",2)])]),(0,o.bF)(k,{loading:b.loading},null,8,["loading"]),b.loading||0!==b.timeline.length?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",m,t[11]||(t[11]=[(0,o.Fv)('<p class="font-bold text-lg">Welcome to Warpnet!</p><p class="text-sm text-dark text-center"> This is the best place to see what&#39;s happening in your world. Find some people and topics to follow now. </p><button class="text-white bg-blue rounded-full font-semibold mt-4 px-4 py-2 hover:bg-darkblue"><p class="hidden lg:block">Let&#39;s go!</p><i class="fas fa-plus lg:hidden"></i></button>',3)]))),(0,o.bF)(v,{tweets:b.timeline},null,8,["tweets"])])),[[L,w.loadMore,"bottom"]]),(0,o.bF)(y,{visible:b.showInfo,content:b.infoContent,position:b.infoPosition},null,8,["visible","content","position"]),(0,o.bF)(I)])}var b=i(1787),w={name:"Home",components:{SideNav:(0,o.$V)((()=>i.e(214).then(i.bind(i,3214)))),DefaultRightBar:(0,o.$V)((()=>i.e(321).then(i.bind(i,6321)))),Tweets:(0,o.$V)((()=>i.e(666).then(i.bind(i,8666)))),Loader:(0,o.$V)((()=>i.e(394).then(i.bind(i,5394)))),InfoOverlay:(0,o.$V)((()=>i.e(818).then(i.bind(i,8818))))},data(){return{tweet:{text:"",root_id:"",image_key:""},loading:!0,profile:{},timeline:[],showInfo:!1,infoContent:"",infoPosition:{top:"0px",left:"0px"},imageAttachment:void 0,videoAttachment:void 0}},methods:{openFileInput(e){this.$refs[e].click()},async fileChange(e){const t=this.$refs[e].files[0],i=new FileReader;i.readAsDataURL(t),i.onload=()=>this.imageAttachment=i.result,i.onerror=e=>{console.error("Error reading file",e),alert("Error reading file")}},async removeImageAttachment(){this.imageAttachment=void 0},async addNewTweet(){this.tweet.text&&(this.imageAttachment&&(this.tweet.image_key=await b.n.uploadImage(this.imageAttachment)),await b.n.createTweet({text:this.tweet.text,imageKey:this.tweet.image_key}),this.tweet.text="",this.tweet.image_key="",this.imageAttachment=void 0,this.timeline=await b.n.getMyTimeline(!0))},async loadMore(){const e=await b.n.getMyTimeline(!1);this.timeline=this.timeline.concat(e)},async toggleInfo(e){if(this.showInfo)return void(this.showInfo=!1);this.infoContent=await this.getInfo();const t=e.target.getBoundingClientRect();this.infoPosition={top:`${t.bottom+window.scrollY}px`,left:`${t.left+window.scrollX}px`},this.showInfo=!0},async getInfo(){return await b.n.getNodeInfo()}},async created(){console.log("loading component:",this.$options.name),this.profile=b.n.getOwnerProfile(),this.profile.background_image=await b.n.getImage({userId:this.profile.id,key:this.profile.background_image_key}),this.profile.avatar=await b.n.getImage({userId:this.profile.id,key:this.profile.avatar_key}),this.timeline=await b.n.getMyTimeline(!0),this.loading=!1}},x=i(6262);const k=(0,x.A)(w,[["render",p]]);var v=k}}]);
//# sourceMappingURL=home.584e3339.js.map