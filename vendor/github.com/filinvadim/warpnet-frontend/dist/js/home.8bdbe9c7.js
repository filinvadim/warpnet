"use strict";(self["webpackChunkwarpnet_frontend"]=self["webpackChunkwarpnet_frontend"]||[]).push([[962],{9163:function(e,t,i){i.r(t),i.d(t,{default:function(){return y}});var o=i(641),n=i(3751),l=i(33);const r={id:"app",class:"flex container h-screen w-full"},a={class:"w-full h-full overflow-y-scroll no-scrollbar"},s={class:"px-5 py-3 border-b border-lighter flex items-center justify-between"},c={class:"px-5 py-3 border-b-8 border-lighter flex"},h={key:0,class:"flex-none mr-4"},u=["src"],d={class:"w-full relative"},f={key:0,class:"relative mt-4 inline-block"},m=["src"],g={key:0,class:"flex flex-col items-center justify-center w-full pt-10 px-6"};function p(e,t,i,p,w,b){const x=(0,o.g2)("SideNav"),v=(0,o.g2)("Loader"),y=(0,o.g2)("Tweets"),k=(0,o.g2)("InfoOverlay"),C=(0,o.g2)("DefaultRightBar"),I=(0,o.gN)("scroll");return(0,o.uX)(),(0,o.CE)("div",r,[(0,o.bF)(x),(0,o.bo)(((0,o.uX)(),(0,o.CE)("div",a,[(0,o.Lk)("div",s,[t[6]||(t[6]=(0,o.Lk)("h1",{class:"text-xl font-bold"},"Home",-1)),(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>b.toggleInfo&&b.toggleInfo(...e)),class:"fas fa-info-circle text-xl text-blue cursor-pointer hover:bg-lighter","aria-hidden":"true"})]),(0,o.Lk)("div",c,[w.profile?((0,o.uX)(),(0,o.CE)("div",h,[(0,o.Lk)("img",{src:w.profile.avatar||"default_profile.png",class:"flex-none w-12 h-12 rounded-full"},null,8,u)])):(0,o.Q3)("",!0),(0,o.Lk)("div",d,[(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>w.tweet.text=e),placeholder:"What's happening?",class:"w-full focus:outline-none mt-3 pb-3"},null,512),[[n.Jo,w.tweet.text]]),w.imageAttachment?((0,o.uX)(),(0,o.CE)("div",f,[(0,o.Lk)("img",{src:w.imageAttachment,alt:"Image preview",class:"w-32 h-32 object-cover rounded border border-lighter"},null,8,m),(0,o.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>b.removeImageAttachment&&b.removeImageAttachment(...e)),type:"button",class:"absolute top-0 right-0 mt-2 mr-2 bg-white bg-opacity-75 rounded-full p-1 hover:bg-red-500",title:"Remove image"},t[7]||(t[7]=[(0,o.Lk)("i",{class:"fas fa-times text-red-600 hover:text-white"},null,-1)]))])):(0,o.Q3)("",!0),(0,o.Lk)("div",null,[(0,o.Lk)("button",{onClick:t[4]||(t[4]=e=>b.openFileInput("imageUrlFileInput")),class:"text-lg text-blue mr-4 far fa-image"},[(0,o.Lk)("input",{onChange:t[3]||(t[3]=e=>b.fileChange("imageUrlFileInput")),ref:"imageUrlFileInput",accept:"image/*",type:"file",class:"hidden"},null,544)]),t[8]||(t[8]=(0,o.Lk)("i",{class:"text-lg text-blue mr-4 fas fa-film cursor-not-allowed"},null,-1)),t[9]||(t[9]=(0,o.Lk)("i",{class:"text-lg text-blue mr-4 far fa-chart-bar cursor-not-allowed"},null,-1)),t[10]||(t[10]=(0,o.Lk)("i",{class:"text-lg text-blue mr-4 far fa-smile cursor-not-allowed"},null,-1))]),(0,o.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>b.addNewTweet&&b.addNewTweet(...e)),type:"button",class:(0,l.C4)(["h-10 px-4 text-white font-semibold bg-blue hover:bg-darkblue rounded-full absolute bottom-0 right-0",w.tweet.text?"":"opacity-50 cursor-not-allowed"])}," Tweet ",2)])]),(0,o.bF)(v,{loading:w.loading},null,8,["loading"]),w.loading||0!==w.timeline.length?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",g,t[11]||(t[11]=[(0,o.Fv)('<p class="font-bold text-lg">Welcome to Warpnet!</p><p class="text-sm text-dark text-center"> This is the best place to see what&#39;s happening in your world. Find some people and topics to follow now. </p><button class="text-white bg-blue rounded-full font-semibold mt-4 px-4 py-2 hover:bg-darkblue"><p class="hidden lg:block">Let&#39;s go!</p><i class="fas fa-plus lg:hidden"></i></button>',3)]))),(0,o.bF)(y,{tweets:w.timeline},null,8,["tweets"])])),[[I,b.loadMore,"bottom"]]),(0,o.bF)(k,{visible:w.showInfo,content:w.infoContent,position:w.infoPosition},null,8,["visible","content","position"]),(0,o.bF)(C)])}i(6573),i(8100),i(7936),i(8111),i(1701),i(7467),i(4732),i(9577);var w=i(6278),b={name:"Home",components:{SideNav:(0,o.$V)((()=>i.e(322).then(i.bind(i,6322)))),DefaultRightBar:(0,o.$V)((()=>i.e(61).then(i.bind(i,4061)))),Tweets:(0,o.$V)((()=>i.e(230).then(i.bind(i,5230)))),Loader:(0,o.$V)((()=>i.e(587).then(i.bind(i,5587)))),InfoOverlay:(0,o.$V)((()=>i.e(460).then(i.bind(i,8460))))},data(){return{tweet:{text:"",root_id:"",imageKey:""},loading:!0,profile:{},timeline:[],timelineCursor:"",showInfo:!1,infoContent:"",infoPosition:{top:"0px",left:"0px"},imageAttachment:void 0,videoAttachment:void 0}},methods:{...(0,w.i0)("warpnet",["getOwnerProfile","getMyTimeline","createTweet","getNodeInfo","uploadImage"]),openFileInput(e){this.$refs[e].click()},async fileChange(e){const t=this.$refs[e].files[0],i=new FileReader;i.readAsDataURL(t),i.onload=()=>this.imageAttachment=i.result,i.onerror=e=>{console.error("Error reading file",e),alert("Error reading file")}},async removeImageAttachment(){this.imageAttachment=void 0},async addNewTweet(){if(!this.tweet.text)return;if(this.imageAttachment){try{this.tweet.imageKey=await this.hashString(this.imageAttachment)}catch(t){return void console.error(t)}try{await this.uploadImage({key:this.tweet.imageKey,imgFile:this.imageAttachment})}catch(t){console.error(t)}}try{await this.createTweet({text:this.tweet.text,imageKey:this.tweet.imageKey})}catch(t){return void console.error(t)}this.tweet.text="",this.tweet.imageKey="",this.imageAttachment=void 0;const e=await this.getMyTimeline({limit:20,cursor:this.timelineCursor});this.timeline=e.tweets||[],this.timelineCursor=e.cursor},async loadMore(){if("end"===this.timelineCursor)return;const e=await this.getMyTimeline({limit:20,cursor:this.timelineCursor});this.timeline=this.timeline.concat(e.tweets||[]),this.timelineCursor=e.cursor},async toggleInfo(e){if(this.showInfo)return void(this.showInfo=!1);const t=await this.getInfo();this.infoContent="string"===typeof t?t:JSON.stringify(t,null,2);const i=e.target.getBoundingClientRect();this.infoPosition={top:`${i.bottom+window.scrollY}px`,left:`${i.left+window.scrollX}px`},this.showInfo=!0},async getInfo(){return await this.getNodeInfo()},async hashString(e){const t=new TextEncoder,i=t.encode(e),o=await crypto.subtle.digest("SHA-256",i),n=Array.from(new Uint8Array(o));return n.map((e=>e.toString(16).padStart(2,"0"))).join("")}},async created(){console.log("loading component:",this.$options.name),this.profile=await this.getOwnerProfile()||{};const e=await this.getMyTimeline({limit:20,cursor:this.timelineCursor});this.timeline=e.tweets||[],this.timelineCursor=e.cursor,this.loading=!1}},x=i(6262);const v=(0,x.A)(b,[["render",p]]);var y=v},713:function(e,t,i){var o=i(9565),n=i(9306),l=i(8551),r=i(1767),a=i(9462),s=i(6319),c=a((function(){var e=this.iterator,t=l(o(this.next,e)),i=this.done=!!t.done;if(!i)return s(e,this.mapper,[t.value,this.counter++],!0)}));e.exports=function(e){return l(this),n(e),new c(r(this),{mapper:e})}},1701:function(e,t,i){var o=i(6518),n=i(713),l=i(6395);o({target:"Iterator",proto:!0,real:!0,forced:l},{map:n})}}]);
//# sourceMappingURL=home.8bdbe9c7.js.map