"use strict";(self["webpackChunkwarpnet_frontend"]=self["webpackChunkwarpnet_frontend"]||[]).push([[138],{4039:function(e,t,l){l.d(t,{A:function(){return y}});var o=l(641);const r={class:"hidden md:block w-1/3 h-full border-l border-lighter px-6 py-2 relative min-w-max"};function i(e,t,l,i,s,a){const n=(0,o.g2)("SearchBar"),d=(0,o.g2)("WhoToFollow");return(0,o.uX)(),(0,o.CE)("div",r,[(0,o.bF)(n),(0,o.bF)(d)])}var s=l(6159),a=l(33);const n={class:"w-full rounded-lg bg-lightest my-4"},d=["onClick","src","alt"],u={class:"hidden lg:block ml-4"},f=["onClick"],c={class:"text-left text-sm leading-tight text-dark"},h=["onClick"];function p(e,t,l,r,i,s){return(0,o.uX)(),(0,o.CE)("div",n,[t[0]||(t[0]=(0,o.Lk)("div",{class:"p-3"},[(0,o.Lk)("p",{class:"text-lg font-bold"},"Who to follow")],-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.profiles,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:"w-full flex hover:bg-lighter p-3 border-t border-lighter"},[(0,o.Lk)("img",{onClick:t=>s.pushToProfilePage(e.id),src:e.avatar||"default_profile.png",class:"w-12 h-12 rounded-full cursor-pointer",alt:e.username},null,8,d),(0,o.Lk)("div",u,[(0,o.Lk)("p",{onClick:t=>s.pushToProfilePage(e.id),class:"text-left text-sm font-bold leading-tight cursor-pointer"},(0,a.v_)(e.username),9,f),(0,o.Lk)("p",c,(0,a.v_)(e.id.slice(0,8))+"...",1)]),(0,o.Lk)("button",{onClick:t=>s.follow(e.id),class:"ml-auto text-sm text-blue font-bold px-4 py-1 rounded-full border border-blue m-2"}," Follow ",8,h)])))),128)),t[1]||(t[1]=(0,o.Lk)("button",{class:"p-3 w-full hover:bg-lighter text-left text-blue border-t border-lighter"}," Show More ",-1))])}l(4114),l(8111),l(2489);var b=l(6278),g={name:"WhoToFollow",data(){return{userProfile:void 0,profiles:[],profilesCursor:""}},methods:{...(0,b.i0)("warpnet",["getUsers","getProfile","followUser","unfollowUser"]),async pushToProfilePage(e){this.$router.push({name:"Profile",params:{id:e}})},async follow(e){try{await this.followUser(e)}catch(t){console.error(`failed to follow [${e}]`,t)}},async unfollow(e){try{await this.unfollowUser(e)}catch(t){console.error(`failed to unfollow [${e}]`,t)}}},async created(){try{let e;this.userProfile=await this.getProfile(this.$route.params.id),e="Home"===this.$route.name?this.userProfile.id:this.$route.params.id;const t=await this.getUsers(e,20,this.profilesCursor);this.profiles=t.users.filter((e=>e.id!==this.userProfile.id)),this.profilesCursor=t.cursor}catch(e){console.error("Failed to load who to follow:",e),this.profiles=[]}}},w=l(6262);const m=(0,w.A)(g,[["render",p]]);var k=m,v={name:"DefaultRightBar",components:{SearchBar:s.A,WhoToFollow:k}};const x=(0,w.A)(v,[["render",i]]);var y=x},6159:function(e,t,l){l.d(t,{A:function(){return d}});var o=l(641),r=l(3751);function i(e,t,l,i,s,a){return(0,o.uX)(),(0,o.CE)("div",null,[t[2]||(t[2]=(0,o.Lk)("i",{class:"fas fa-search absolute mt-2 ml-5 text-sm text-light"},null,-1)),(0,o.bo)((0,o.Lk)("input",{class:"pl-12 rounded-full w-full p-2 bg-lighter text-sm mb-4",placeholder:"Search Tweet","onUpdate:modelValue":t[0]||(t[0]=e=>s.query=e),onKeyup:t[1]||(t[1]=(0,r.jR)((e=>a.submit()),["enter"]))},null,544),[[r.Jo,s.query]])])}l(4114);var s={name:"SearchBar",data(){return{query:""}},methods:{submit(){this.$router.push({name:"Search",query:{q:this.query}})}}},a=l(6262);const n=(0,a.A)(s,[["render",i]]);var d=n},5764:function(e,t,l){l.r(t),l.d(t,{default:function(){return De}});var o=l(641),r=l(33);const i={id:"app",class:"flex container h-screen w-full"},s={class:"flex container h-screen w-full"},a={class:"w-full md:w-2/3 lg:w-1/2 h-full overflow-y-scroll no-scrollbar"},n={class:"px-5 py-3 border-b border-lighter flex items-center"},d={class:"lg:block ml-4"},u={class:"text-xl font-bold"},f={key:0,class:"text-left text-sm leading-tight text-dark"},c={class:"border-b border-lighter flex",style:{height:"200px",display:"block"}},h={key:0,class:"h-full max-h-full"},p=["src"],b={key:1,class:"bg-gray-400 h-full max-h-full"},g={class:"py-3 flex flex-col"},w={class:"px-3 flex flex-row justify-between"},m=["src"],k={key:1},v={key:2},x={key:0,class:"text-xs md:text-base md:ml-auto mr-1 md:mr-3 text-blue font-bold px-3 py-1 md:px-3 md:py-2 rounded-full border border-blue mb-2 hover:bg-lightblue"},y={key:0,class:"px-3"},L={class:"font-bold text-xl"},C={class:"text-dark"},P={key:0,class:"text-sm font-medium bg-red-900 py-1 px-1 mx-2 rounded text-white align-middle"},E={key:1,class:"text-sm font-medium bg-gray-100 py-1 px-1 mx-2 rounded text-gray-500 align-middle"},U={class:"my-2"},F={class:"flex flex-col md:flex-row mt-1 mb-2"},M={key:0,class:"flex flex-row mr-4"},_=["href"],S={key:1,class:"flex flex-row mr-4"},X={class:"text-dark"},I={key:0,class:"flex flex-row mt-1"},$={class:"font-bold"},Q={class:"font-bold"},T={key:1,class:"px-5"},A={class:"text-black text-lg"},D={key:2,class:"flex flex-row justify-evenly mt-2"},W={key:0,class:"flex flex-col items-center justify-center w-full pt-10"},j={class:"font-bold text-lg"},B={class:"text-sm text-dark"},Y={key:0,class:"text-white bg-blue rounded-full font-semibold mt-4 px-4 py-2 hover:bg-darkblue"},H={class:"hidden md:block w-1/3 z-0 h-full border-l border-lighter px-6 py-2 overflow-y-scroll no-scrollbar relative"};function O(e,t,l,O,R,K){const q=(0,o.g2)("SideNav"),J=(0,o.g2)("Loader"),V=(0,o.g2)("Tweets"),N=(0,o.g2)("DefaultRightBar"),z=(0,o.g2)("SetUpProfileOverlay"),G=(0,o.g2)("EditProfileOverlay"),Z=(0,o.gN)("scroll");return(0,o.uX)(),(0,o.CE)("div",i,[(0,o.Lk)("div",s,[(0,o.bF)(q),(0,o.bo)(((0,o.uX)(),(0,o.CE)("div",a,[(0,o.Lk)("div",n,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>K.gotoHome()),class:"rounded-full md:pr-2 focus:outline-none hover:bg-lightblue"},t[10]||(t[10]=[(0,o.Lk)("i",{class:"fas fa-arrow-left text-blue"},null,-1)])),(0,o.Lk)("div",d,[(0,o.Lk)("h1",u,(0,r.v_)(R.profile.username||"Anonymous"),1),R.noUser?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("p",f,(0,r.v_)(R.profile.tweets_count||0)+" Tweets ",1))])]),(0,o.Lk)("div",c,[R.profile.background_image?((0,o.uX)(),(0,o.CE)("div",h,[(0,o.Lk)("img",{src:R.profile.background_image,class:"h-full w-full object-cover",alt:"Background image"},null,8,p)])):(0,o.Q3)("",!0),R.profile.background_image?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",b))]),(0,o.Lk)("div",g,[(0,o.Lk)("div",w,[R.profile?((0,o.uX)(),(0,o.CE)("img",{key:0,src:R.profile.avatar||"default_profile.png",class:"w-24 h-24 md:w-32 md:h-32 rounded-full border-white",style:{"margin-top":"-80px","border-width":"6px"},alt:"Profile avatar"},null,8,m)):(0,o.Q3)("",!0),K.isMySelf(R.profile.id)&&R.profile?((0,o.uX)(),(0,o.CE)("div",k,[null===R.profile.avatar||"default_profile.png"===R.profile.avatar?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[1]||(t[1]=e=>K.setUpProfile()),class:"text-xs md:text-base md:ml-auto text-blue font-bold px-4 py-2 rounded-full border border-blue mb-2 hover:bg-lightblue"}," Set up profile ")):(0,o.Q3)("",!0),null!==R.profile.avatar&&"default_profile.png"!==R.profile.avatar?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[2]||(t[2]=e=>K.editProfile()),class:"text-xs md:text-base md:ml-auto text-blue font-bold px-4 py-2 rounded-full border border-blue mb-2 hover:bg-lightblue"}," Edit profile ")):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0),R.noUser||R.isSelf||R.loading?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",v,[t[11]||(t[11]=(0,o.Lk)("button",{class:"text-xs md:text-base md:ml-auto mr-1 md:mr-3 text-blue font-bold px-3 py-1 md:px-3 md:py-2 rounded-full border border-blue mb-2 hover:bg-lightblue"},[(0,o.Lk)("i",{class:"fas fa-ellipsis-h"})],-1)),K.isFollower()?((0,o.uX)(),(0,o.CE)("button",x,[(0,o.Lk)("i",{onClick:t[3]||(t[3]=e=>K.sendMessage()),class:"fas fa-envelope"})])):(0,o.Q3)("",!0),K.isFollowed()?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[4]||(t[4]=e=>K.follow()),class:"text-xs md:text-base md:ml-auto text-blue font-bold px-2 py-1 md:px-4 md:py-2 rounded-full border border-blue mb-2 hover:bg-lightblue w-24 md:w-28"}," Follow ")),K.isFollowed()?((0,o.uX)(),(0,o.CE)("button",{key:2,onMouseover:t[5]||(t[5]=e=>R.followingLabel="Unfollow"),onMouseleave:t[6]||(t[6]=e=>R.followingLabel="Following"),onClick:t[7]||(t[7]=e=>K.unfollow()),class:"text-xs md:text-base md:ml-auto mr-1 md:mr-3 text-white bg-blue font-bold px-3 py-1 md:px-3 md:py-2 rounded-full border mb-2 hover:bg-red-700 w-22 md:w-28"},(0,r.v_)(R.followingLabel),33)):(0,o.Q3)("",!0)]))]),R.noUser||R.loading?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",y,[(0,o.Lk)("p",L,(0,r.v_)(R.profile.username||"..."),1),(0,o.Lk)("p",C,[(0,o.eW)(" @"+(0,r.v_)(R.profile.id||"")+" ",1),R.profile.isOffline?((0,o.uX)(),(0,o.CE)("span",P,"Offline")):(0,o.Q3)("",!0),K.isFollower()&&!R.isSelf?((0,o.uX)(),(0,o.CE)("span",E,"Follows you")):(0,o.Q3)("",!0)]),(0,o.Lk)("p",U,(0,r.v_)(R.profile.bio||""),1),(0,o.Lk)("div",F,[R.profile.website?((0,o.uX)(),(0,o.CE)("div",M,[t[12]||(t[12]=(0,o.Lk)("i",{class:"fas fa-link text-dark align-text-bottom pt-1 mr-2"},null,-1)),(0,o.Lk)("a",{href:R.profile.website,target:"_blank",class:"text-dark"},(0,r.v_)(R.profile.website.replace(/^https?:\/\//,"")),9,_)])):(0,o.Q3)("",!0),K.joinedDate()?((0,o.uX)(),(0,o.CE)("div",S,[t[13]||(t[13]=(0,o.Lk)("i",{class:"far fa-calendar-alt text-dark align-text-bottom pt-1 mr-2"},null,-1)),(0,o.Lk)("p",X,"Joined "+(0,r.v_)(K.joinedDate()),1)])):(0,o.Q3)("",!0)]),R.noUser||R.loading?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",I,[(0,o.Lk)("button",{onClick:t[8]||(t[8]=e=>K.goToFollowing()),class:"mr-4 flex flex-row hover:underline"},[(0,o.Lk)("span",$,(0,r.v_)(R.profile.followees_count||0),1),t[14]||(t[14]=(0,o.Lk)("span",{class:"text-dark whitespace-pre"}," Following",-1))]),(0,o.Lk)("button",{onClick:t[9]||(t[9]=e=>K.goToFollowers()),class:"flex flex-row hover:underline"},[(0,o.Lk)("span",Q,(0,r.v_)(R.profile.followers_count||0),1),t[15]||(t[15]=(0,o.Lk)("span",{class:"text-dark whitespace-pre"}," Followers",-1))])]))])),R.noUser?((0,o.uX)(),(0,o.CE)("div",T,[(0,o.Lk)("p",A," @"+(0,r.v_)(e.$route.params.id),1)])):(0,o.Q3)("",!0),R.noUser||R.loading?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",D,t[16]||(t[16]=[(0,o.Lk)("button",{class:"flex-grow text-dark font-bold border-b-2 border-blue p-1 md:px-2 md:py-4 hover:bg-lightblue"}," Tweets ",-1),(0,o.Lk)("button",{class:"flex-grow text-dark font-bold border-b-2 p-1 md:px-2 md:py-4 hover:bg-lightblue"}," Tweets & replies ",-1),(0,o.Lk)("button",{class:"flex-grow text-dark font-bold border-b-2 p-1 md:px-2 md:py-4 hover:bg-lightblue"}," Media ",-1),(0,o.Lk)("button",{class:"flex-grow text-dark font-bold border-b-2 p-1 md:px-2 md:py-4 hover:bg-lightblue"}," Likes ",-1)])))]),(0,o.bF)(J,{loading:R.loading},null,8,["loading"]),R.noUser||R.loading||0!==R.tweets.length?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",W,[(0,o.Lk)("p",j,[(0,o.Lk)("span",null,(0,r.v_)(R.isSelf?"You":`${R.profile.username||"User"}`),1),t[17]||(t[17]=(0,o.eW)(" haven't tweeted yet "))]),(0,o.Lk)("p",B,[t[18]||(t[18]=(0,o.eW)(" When ")),(0,o.Lk)("span",null,(0,r.v_)(R.isSelf?"you post":`${R.profile.username||"user"} posts`),1),t[19]||(t[19]=(0,o.eW)(" a tweet, it'll show up here. "))]),R.isSelf?((0,o.uX)(),(0,o.CE)("button",Y,t[20]||(t[20]=[(0,o.Lk)("p",{class:"hidden lg:block"},"Tweet now",-1),(0,o.Lk)("i",{class:"fas fa-plus lg:hidden"},null,-1)]))):(0,o.Q3)("",!0)])),R.noUser?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(V,{key:1,tweets:R.tweets},null,8,["tweets"]))])),[[Z,K.loadMore,"bottom"]]),(0,o.Lk)("div",H,[(0,o.bF)(N)]),R.showSetUpProfileModal?((0,o.uX)(),(0,o.Wv)(z,{key:0,showSetUpProfileModal:R.showSetUpProfileModal},null,8,["showSetUpProfileModal"])):(0,o.Q3)("",!0),R.showEditProfileModal?((0,o.uX)(),(0,o.Wv)(G,{key:1,showEditProfileModal:R.showEditProfileModal},null,8,["showEditProfileModal"])):(0,o.Q3)("",!0)])])}l(4114),l(8111),l(3579);var R=l(2493),K=l(6159);function q(e,t,l,r,i,s){const a=(0,o.g2)("Tweet");return(0,o.uX)(),(0,o.CE)("div",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.tweets,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id},[(0,o.bF)(a,{tweet:e},null,8,["tweet"])])))),128))])}var J=l(7981),V={name:"Tweets",props:["tweets"],components:{Tweet:J.A}},N=l(6262);const z=(0,N.A)(V,[["render",q]]);var G=z,Z=l(3751);const ee={class:"fixed w-full h-full top-0 left-0 flex items-center justify-center"},te={class:"modal-main bg-white mx-auto rounded-lg z-50 overflow-y-auto",style:{height:"80%",width:"40%"}},le={class:"pl-1 pr-4 py-1 h-12"},oe={class:"pt-5 px-8"},re={class:"mt-16 w-full flex items-center justify-center"},ie={class:"relative"},se=["src"];function ae(e,t,l,r,i,s){return(0,o.uX)(),(0,o.CE)("div",ee,[(0,o.Lk)("div",{class:"absolute w-full h-full bg-gray-900 opacity-50",onClick:t[0]||(t[0]=(0,Z.D$)((t=>e.$emit("update:showSetUpProfileModal",!1)),["prevent"]))}),(0,o.Lk)("div",te,[(0,o.Lk)("div",le,[null===i.newImage||"default_profile.png"===i.newImage?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[1]||(t[1]=t=>e.$emit("update:showSetUpProfileModal",!1)),class:"rounded-full bg-white font-bold text-blue mt-2 p-1 px-3 relative right-0 float-right focus:outline-none hover:bg-lightblue"}," Skip for now ")):(0,o.Q3)("",!0),null!==i.newImage&&"default_profile.png"!==i.newImage?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[2]||(t[2]=(...e)=>s.finishSetUpProfile&&s.finishSetUpProfile(...e)),class:"rounded-full bg-blue font-bold text-white mt-2 p-1 px-4 relative right-0 float-right focus:outline-none hover:bg-darkblue"}," Next ")):(0,o.Q3)("",!0),t[5]||(t[5]=(0,o.Lk)("i",{class:"relative fab text-blue text-2xl mt-2 mb-8",style:{"margin-left":"50%"}},null,-1))]),(0,o.Lk)("div",oe,[t[8]||(t[8]=(0,o.Lk)("div",{class:"flex justify-between items-center mb-5"},[(0,o.Lk)("p",{class:"text-2xl font-bold"},"Pick a profile picture")],-1)),t[9]||(t[9]=(0,o.Lk)("p",{class:"text-dark"},"Have a favorite selfie? Upload it now.",-1)),(0,o.Lk)("div",re,[(0,o.Lk)("div",ie,[t[7]||(t[7]=(0,o.Lk)("div",{class:"absolute w-32 h-32 rounded-full bg-gray-600 opacity-50"},null,-1)),(0,o.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>s.openFileInput&&s.openFileInput(...e)),class:"absolute hover:bg-gray-800 p-3 rounded-full",style:{left:"50%",top:"50%",transform:"translate(-50%, -50%)"}},[t[6]||(t[6]=(0,o.Lk)("i",{class:"text-2xl fas fa-camera text-white"},null,-1)),(0,o.Lk)("input",{onChange:t[3]||(t[3]=(...e)=>s.fileChange&&s.fileChange(...e)),ref:"fileInput",accept:"image/*",type:"file",class:"hidden"},null,544)]),(0,o.Lk)("img",{class:"w-32 h-32 rounded-full",src:i.newImage,alt:"Profile picture"},null,8,se)])])])])])}var ne=l(6278),de={name:"SetUpProfileOverlay",props:{showSetUpProfileModal:{type:Boolean,required:!0}},data(){return{newImage:"default_profile.png",profile:{}}},methods:{...(0,ne.i0)("warpnet",["editMyProfile"]),handleKeyup(e){"Escape"===e.key&&this.$emit("update:showSetUpProfileModal",!1)},openFileInput(){this.$refs.fileInput.click()},async fileChange(){const e=this.$refs.fileInput.files[0],t=new FileReader;t.readAsDataURL(e),t.onload=()=>this.newImage=t.result,t.onerror=e=>alert(e)},async finishSetUpProfile(){const e={username:this.profile.username,avatar:this.newImage};this.profile=await this.editMyProfile(e),this.$emit("update:showSetUpProfileModal",!1)}},mounted(){window.addEventListener("keyup",this.handleKeyup)},beforeDestroy(){window.removeEventListener("keyup",this.handleKeyup)}};const ue=(0,N.A)(de,[["render",ae]]);var fe=ue;const ce={class:"fixed w-full h-full top-0 left-0 flex items-center justify-center"},he={class:"modal-main bg-white mx-auto rounded-lg z-50 overflow-y-auto no-scrollbar",style:{height:"85%",width:"40%"}},pe={class:"pl-1 pr-4 py-1 h-16 border-b-2 border-lightblue"},be={class:"flex flex-row mt-1 ml-4"},ge={class:"border-l-2 border-r-2 border-white"},we={class:"relative",style:{height:"200px",display:"block"}},me={key:0,class:"h-full max-h-full"},ke=["src"],ve={key:1,class:"bg-gray-400 h-full max-h-full"},xe={class:"p-3 flex flex-col"},ye={style:{"margin-top":"-80px"},class:"relative w-32 h-32 rounded-full mb-6"},Le=["src"],Ce={class:"w-full bg-lightest border-b-2 border-dark mb-6 py-1 px-3"},Pe={class:"w-full bg-lightest border-b-2 border-dark mb-6 py-1 px-3"},Ee={class:"w-full bg-lightest border-b-2 border-dark mb-6 py-1 px-3"},Ue={class:"w-full bg-lightest border-b-2 border-dark mb-24 py-1 px-3"};function Fe(e,t,l,r,i,s){return(0,o.uX)(),(0,o.CE)("div",ce,[(0,o.Lk)("div",{class:"absolute w-full h-full bg-gray-900 opacity-50",onClick:t[0]||(t[0]=(0,Z.D$)((t=>e.$emit("update:showEditProfileModal",!1)),["prevent"]))}),(0,o.Lk)("div",he,[(0,o.Lk)("div",pe,[(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>s.saveProfile&&s.saveProfile(...e)),class:"rounded-full bg-blue font-bold text-white mt-2 p-1 px-4 relative right-0 float-right focus:outline-none hover:bg-darkblue"}," Save "),(0,o.Lk)("div",be,[(0,o.Lk)("i",{onClick:t[2]||(t[2]=t=>e.$emit("update:showEditProfileModal",!1)),class:"fas fa-times text-blue text-2xl mb-8 mr-6 rounded-full bg-white p-2 px-3 hover:bg-lightblue cursor-pointer"}),t[11]||(t[11]=(0,o.Lk)("p",{class:"text-xl pt-1 font-bold"},"Edit profile",-1))])]),(0,o.Lk)("div",ge,[(0,o.Lk)("div",we,[t[13]||(t[13]=(0,o.Lk)("div",{class:"absolute w-full max-w-full h-full max-h-full bg-gray-600 opacity-50"},null,-1)),(0,o.Lk)("button",{onClick:t[4]||(t[4]=e=>s.openFileInput("backgroundFileInput")),class:"absolute hover:bg-gray-800 p-3 rounded-full",style:{"margin-left":"45%","margin-top":"80px"}},[t[12]||(t[12]=(0,o.Lk)("i",{class:"text-2xl fas fa-camera text-white"},null,-1)),(0,o.Lk)("input",{onChange:t[3]||(t[3]=e=>s.fileChange("backgroundFileInput","background_image")),ref:"backgroundFileInput",accept:"image/*",type:"file",class:"hidden"},null,544)]),i.background_image?((0,o.uX)(),(0,o.CE)("div",me,[(0,o.Lk)("img",{src:i.background_image,class:"h-full w-full object-cover",alt:"Background"},null,8,ke)])):(0,o.Q3)("",!0),i.background_image?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",ve))]),(0,o.Lk)("div",xe,[(0,o.Lk)("div",ye,[t[15]||(t[15]=(0,o.Lk)("div",{class:"absolute w-32 h-32 rounded-full bg-gray-600 opacity-50 border-4 border-white"},null,-1)),(0,o.Lk)("button",{onClick:t[6]||(t[6]=e=>s.openFileInput("imageUrlFileInput")),class:"absolute hover:bg-gray-800 p-3 rounded-full ml-10 mt-10"},[t[14]||(t[14]=(0,o.Lk)("i",{class:"text-2xl fas fa-camera text-white"},null,-1)),(0,o.Lk)("input",{onChange:t[5]||(t[5]=e=>s.fileChange("imageUrlFileInput","avatar")),ref:"imageUrlFileInput",accept:"image/*",type:"file",class:"hidden"},null,544)]),(0,o.Lk)("img",{src:i.avatar,class:"w-32 h-32 rounded-full border-4 border-white",alt:"Avatar"},null,8,Le)]),(0,o.Lk)("div",Ce,[t[16]||(t[16]=(0,o.Lk)("label",{class:"text-dark",for:"username"},"Name",-1)),(0,o.bo)((0,o.Lk)("input",{id:"username","onUpdate:modelValue":t[7]||(t[7]=e=>i.username=e),class:"w-full bg-lightest text-lg focus:outline-none",type:"text",required:""},null,512),[[Z.Jo,i.username,void 0,{trim:!0}]])]),(0,o.Lk)("div",Pe,[t[17]||(t[17]=(0,o.Lk)("label",{class:"text-dark",for:"bio"},"Bio",-1)),(0,o.bo)((0,o.Lk)("textarea",{id:"bio","onUpdate:modelValue":t[8]||(t[8]=e=>i.bio=e),class:"w-full bg-lightest text-lg focus:outline-none",placeholder:"Add your bio"},null,512),[[Z.Jo,i.bio,void 0,{trim:!0}]])]),(0,o.Lk)("div",Ee,[t[18]||(t[18]=(0,o.Lk)("label",{class:"text-dark",for:"website"},"Website",-1)),(0,o.bo)((0,o.Lk)("input",{id:"website","onUpdate:modelValue":t[9]||(t[9]=e=>i.website=e),class:"w-full bg-lightest text-lg focus:outline-none",type:"url",placeholder:"Add your website"},null,512),[[Z.Jo,i.website,void 0,{trim:!0}]])]),(0,o.Lk)("div",Ue,[t[19]||(t[19]=(0,o.Lk)("label",{class:"text-dark",for:"birthdate"},"Birth date",-1)),(0,o.bo)((0,o.Lk)("input",{id:"birthdate","onUpdate:modelValue":t[10]||(t[10]=e=>i.birthdate=e),class:"w-full bg-lightest text-lg focus:outline-none",type:"date",placeholder:"Add your birth date"},null,512),[[Z.Jo,i.birthdate]])])])])])])}var Me=l(5093),_e=l.n(Me),Se={name:"EditProfileOverlay",props:{showEditProfileModal:Boolean},data(){return{profile:{},username:void 0,background_image:void 0,avatar:void 0,bio:void 0,website:void 0,birthdate:void 0}},methods:{...(0,ne.i0)("warpnet",["editMyProfile","getOwnerProfile"]),handleKeyup(e){"Escape"===e.key&&this.$emit("update:showEditProfileModal",!1)},openFileInput(e){this.$refs[e].click()},async fileChange(e,t){const l=this.$refs[e].files[0],o=new FileReader;o.readAsDataURL(l),o.onload=()=>this[t]=o.result,o.onerror=e=>alert(e)},async saveProfile(){const e={username:this.username,avatar:this.avatar,background_image:this.background_image,bio:this.bio,website:this.website,birthdate:this.birthdate?_e()(this.birthdate,"YYYY-MM-DD").format("YYYY-MM-DD"):null};this.profile=await this.editMyProfile(e),this.background_image=this.profile.background_image,this.avatar=this.profile.avatar,this.$emit("update:showEditProfileModal",!1)}},mounted(){window.addEventListener("keyup",this.handleKeyup)},beforeDestroy(){window.removeEventListener("keyup",this.handleKeyup)},async created(){this.profile=await this.getOwnerProfile(),this.username=this.profile.username,this.background_image=this.profile.background_image,this.avatar=this.profile.avatar,this.bio=this.profile.bio,this.website=this.profile.website,this.birthdate=this.profile.birthdate}};const Xe=(0,N.A)(Se,[["render",Fe],["__scopeId","data-v-138b3392"]]);var Ie=Xe,$e=l(5587),Qe=l(4039),Te={name:"Profile",components:{DefaultRightBar:Qe.A,SideNav:R.A,SearchBar:K.A,Tweets:G,SetUpProfileOverlay:fe,EditProfileOverlay:Ie,Loader:$e.A},data(){return{chat:void 0,showSetUpProfileModal:!1,showEditProfileModal:!1,isSelf:!1,followingLabel:"Following",loading:!0,noUser:!1,userProfile:{},profile:{},tweets:[],tweetsCursor:"",users:[],usersCursor:"",followers:[],followersCursor:"",followings:[],followingsCursor:""}},methods:{...(0,ne.i0)("warpnet",["getTweets","getFollowers","getFollowing","getProfile","getUsers","followUser","unfollowUser","getOwnerProfile","getConversation"]),isMySelf(e){return e===this.userProfile.id},joinedDate(e){return _e()(e).format("MMMM YYYY")},gotoHome(){this.$router.push({name:"Home"})},sendMessage(){this.$router.push({name:"Messages",params:{id:this.userProfile.id,chatId:this.chat.id}})},isFollower(){return this.followers.some((e=>e.id===this.userProfile.id))},isFollowed(){return this.followings.some((e=>e.id===this.userProfile.id))},goToFollowing(){this.$router.push({name:"Following",params:{id:this.profile.id}})},goToFollowers(){this.$router.push({name:"Followers",params:{id:this.profile.id}})},setUpProfile(){this.showSetUpProfileModal=!0},editProfile(){this.showEditProfileModal=!0},async follow(){try{await this.followUser(this.profile.id)}catch(e){console.error(`failed to follow [${this.profile.id}]`,e)}},async unfollow(){try{await this.unfollowUser(this.profile.id)}catch(e){console.error(`failed to unfollow [${this.profile.id}]`,e)}},async loadMore(){const e=await this.getTweets(this.profile.id,20,this.tweetsCursor);this.tweets=this.tweets.concat(e.tweets||[]),this.tweetsCursor=e.cursor}},async created(){try{this.loading=!0;const e=this.$route.params.id;if(!e)return void(this.noUser=!0);if(this.userProfile=await this.getOwnerProfile(),this.profile=await this.getProfile(e),!this.profile)return void(this.noUser=!0);this.isSelf=this.isMySelf(e),this.isSelf||(this.chat=await this.getConversation(this.userProfile.id,e));const[t,l,o,r]=await Promise.all([this.getUsers(e,20,this.usersCursor),this.getTweets(e,20,this.tweetsCursor),this.getFollowers(e,20,this.followersCursor),this.getFollowing(e,20,this.followingsCursor)]);this.users=t.users||[],this.usersCursor=t.cursor,this.tweets=l.tweets||[],this.tweetsCursor=l.cursor,this.followers=o.users||[],this.followersCursor=o.cursor,this.followings=r.users||[],this.followingsCursor=r.cursor}catch(e){console.error("Failed to load profile:",e),this.noUser=!0}finally{this.loading=!1}}};const Ae=(0,N.A)(Te,[["render",O]]);var De=Ae},6319:function(e,t,l){var o=l(8551),r=l(9539);e.exports=function(e,t,l,i){try{return i?t(o(l)[0],l[1]):t(l)}catch(s){r(e,"throw",s)}}},2529:function(e){e.exports=function(e,t){return{value:e,done:t}}},6279:function(e,t,l){var o=l(6840);e.exports=function(e,t,l){for(var r in t)o(e,r,t[r],l);return e}},9462:function(e,t,l){var o=l(9565),r=l(2360),i=l(6699),s=l(6279),a=l(8227),n=l(1181),d=l(5966),u=l(7657).IteratorPrototype,f=l(2529),c=l(9539),h=a("toStringTag"),p="IteratorHelper",b="WrapForValidIterator",g=n.set,w=function(e){var t=n.getterFor(e?b:p);return s(r(u),{next:function(){var l=t(this);if(e)return l.nextHandler();if(l.done)return f(void 0,!0);try{var o=l.nextHandler();return l.returnHandlerResult?o:f(o,l.done)}catch(r){throw l.done=!0,r}},return:function(){var l=t(this),r=l.iterator;if(l.done=!0,e){var i=d(r,"return");return i?o(i,r):f(void 0,!0)}if(l.inner)try{c(l.inner.iterator,"normal")}catch(s){return c(r,"throw",s)}return r&&c(r,"normal"),f(void 0,!0)}})},m=w(!0),k=w(!1);i(k,h,"Iterator Helper"),e.exports=function(e,t,l){var o=function(o,r){r?(r.iterator=o.iterator,r.next=o.next):r=o,r.type=t?b:p,r.returnHandlerResult=!!l,r.nextHandler=e,r.counter=0,r.done=!1,g(this,r)};return o.prototype=t?m:k,o}},2489:function(e,t,l){var o=l(6518),r=l(9565),i=l(9306),s=l(8551),a=l(1767),n=l(9462),d=l(6319),u=l(6395),f=n((function(){var e,t,l,o=this.iterator,i=this.predicate,a=this.next;while(1){if(e=s(r(a,o)),t=this.done=!!e.done,t)return;if(l=e.value,d(o,i,[l,this.counter++],!0))return l}}));o({target:"Iterator",proto:!0,real:!0,forced:u},{filter:function(e){return s(this),i(e),new f(a(this),{predicate:e})}})}}]);
//# sourceMappingURL=profile.3c032681.js.map