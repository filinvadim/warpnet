"use strict";(self["webpackChunkwarpnet_frontend"]=self["webpackChunkwarpnet_frontend"]||[]).push([[962],{4039:function(e,t,r){r.d(t,{A:function(){return k}});var l=r(641);const o={class:"hidden md:block w-1/3 h-full border-l border-lighter px-6 py-2 relative min-w-max"};function i(e,t,r,i,n,s){const a=(0,l.g2)("SearchBar"),u=(0,l.g2)("WhoToFollow");return(0,l.uX)(),(0,l.CE)("div",o,[(0,l.bF)(a),(0,l.bF)(u)])}var n=r(6159),s=r(33);const a={class:"w-full rounded-lg bg-lightest my-4"},u=["onClick","src","alt"],c={class:"hidden lg:block ml-4"},d=["onClick"],f={class:"text-left text-sm leading-tight text-dark"},h=["onClick"];function p(e,t,r,o,i,n){return(0,l.uX)(),(0,l.CE)("div",a,[t[0]||(t[0]=(0,l.Lk)("div",{class:"p-3"},[(0,l.Lk)("p",{class:"text-lg font-bold"},"Who to follow")],-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.profiles,(e=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:"w-full flex hover:bg-lighter p-3 border-t border-lighter"},[(0,l.Lk)("img",{onClick:t=>n.pushToProfilePage(e.id),src:e.avatar||"default_profile.png",class:"w-12 h-12 rounded-full cursor-pointer",alt:e.username},null,8,u),(0,l.Lk)("div",c,[(0,l.Lk)("p",{onClick:t=>n.pushToProfilePage(e.id),class:"text-left text-sm font-bold leading-tight cursor-pointer"},(0,s.v_)(e.username),9,d),(0,l.Lk)("p",f,(0,s.v_)(e.id.slice(0,8))+"...",1)]),(0,l.Lk)("button",{onClick:t=>n.follow(e.id),class:"ml-auto text-sm text-blue font-bold px-4 py-1 rounded-full border border-blue m-2"}," Follow ",8,h)])))),128)),t[1]||(t[1]=(0,l.Lk)("button",{class:"p-3 w-full hover:bg-lighter text-left text-blue border-t border-lighter"}," Show More ",-1))])}r(4114),r(8111),r(2489);var w=r(6278),m={name:"WhoToFollow",data(){return{userProfile:void 0,profiles:[],profilesCursor:""}},methods:{...(0,w.i0)("warpnet",["getUsers","getProfile","followUser","unfollowUser"]),async pushToProfilePage(e){this.$router.push({name:"Profile",params:{id:e}})},async follow(e){try{await this.followUser(e)}catch(t){console.error(`failed to follow [${e}]`,t)}},async unfollow(e){try{await this.unfollowUser(e)}catch(t){console.error(`failed to unfollow [${e}]`,t)}}},async created(){try{let e;this.userProfile=await this.getProfile(this.$route.params.id),e="Home"===this.$route.name?this.userProfile.id:this.$route.params.id;const t=await this.getUsers(e,20,this.profilesCursor);this.profiles=t.users.filter((e=>e.id!==this.userProfile.id)),this.profilesCursor=t.cursor}catch(e){console.error("Failed to load who to follow:",e),this.profiles=[]}}},g=r(6262);const b=(0,g.A)(m,[["render",p]]);var x=b,v={name:"DefaultRightBar",components:{SearchBar:n.A,WhoToFollow:x}};const y=(0,g.A)(v,[["render",i]]);var k=y},6159:function(e,t,r){r.d(t,{A:function(){return u}});var l=r(641),o=r(3751);function i(e,t,r,i,n,s){return(0,l.uX)(),(0,l.CE)("div",null,[t[2]||(t[2]=(0,l.Lk)("i",{class:"fas fa-search absolute mt-2 ml-5 text-sm text-light"},null,-1)),(0,l.bo)((0,l.Lk)("input",{class:"pl-12 rounded-full w-full p-2 bg-lighter text-sm mb-4",placeholder:"Search Tweet","onUpdate:modelValue":t[0]||(t[0]=e=>n.query=e),onKeyup:t[1]||(t[1]=(0,o.jR)((e=>s.submit()),["enter"]))},null,544),[[o.Jo,n.query]])])}r(4114);var n={name:"SearchBar",data(){return{query:""}},methods:{submit(){this.$router.push({name:"Search",query:{q:this.query}})}}},s=r(6262);const a=(0,s.A)(n,[["render",i]]);var u=a},5041:function(e,t,r){r.r(t),r.d(t,{default:function(){return P}});var l=r(641),o=r(3751),i=r(33);const n={id:"app",class:"flex container h-screen w-full"},s={class:"w-full h-full overflow-y-scroll no-scrollbar"},a={class:"px-5 py-3 border-b-8 border-lighter flex"},u={key:0,class:"flex-none mr-4"},c=["src"],d={class:"w-full relative"},f={key:0,class:"flex flex-col items-center justify-center w-full pt-10 px-6"};function h(e,t,r,h,p,w){const m=(0,l.g2)("SideNav"),g=(0,l.g2)("Loader"),b=(0,l.g2)("Timeline"),x=(0,l.g2)("DefaultRightBar"),v=(0,l.gN)("scroll");return(0,l.uX)(),(0,l.CE)("div",n,[(0,l.bF)(m),(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",s,[t[4]||(t[4]=(0,l.Lk)("div",{class:"px-5 py-3 border-b border-lighter flex items-center justify-between"},[(0,l.Lk)("h1",{class:"text-xl font-bold"},"Home"),(0,l.Lk)("i",{class:"far fa-star text-xl text-blue"})],-1)),(0,l.Lk)("div",a,[p.profile?((0,l.uX)(),(0,l.CE)("div",u,[(0,l.Lk)("img",{src:p.profile.avatar||"default_profile.png",class:"flex-none w-12 h-12 rounded-full",alt:"Profile avatar"},null,8,c)])):(0,l.Q3)("",!0),(0,l.Lk)("div",d,[(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>p.tweet.text=e),placeholder:"What's happening?",class:"w-full focus:outline-none mt-3 pb-3"},null,512),[[o.Jo,p.tweet.text]]),t[2]||(t[2]=(0,l.Lk)("div",null,[(0,l.Lk)("i",{class:"text-lg text-blue mr-4 far fa-image"}),(0,l.Lk)("i",{class:"text-lg text-blue mr-4 fas fa-film"}),(0,l.Lk)("i",{class:"text-lg text-blue mr-4 far fa-chart-bar"}),(0,l.Lk)("i",{class:"text-lg text-blue mr-4 far fa-smile"})],-1)),(0,l.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>w.addNewTweet&&w.addNewTweet(...e)),type:"button",class:(0,i.C4)(["h-10 px-4 text-white font-semibold bg-blue hover:bg-darkblue rounded-full absolute bottom-0 right-0",p.tweet.text?"":"opacity-50 cursor-not-allowed"])}," Tweet ",2)])]),(0,l.bF)(g,{loading:p.loading},null,8,["loading"]),p.loading||0!==p.timeline.length?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",f,t[3]||(t[3]=[(0,l.Fv)('<p class="font-bold text-lg">Welcome to Warpnet!</p><p class="text-sm text-dark text-center"> This is the best place to see what&#39;s happening in your world. Find some people and topics to follow now. </p><button class="text-white bg-blue rounded-full font-semibold mt-4 px-4 py-2 hover:bg-darkblue"><p class="hidden lg:block">Let&#39;s go!</p><i class="fas fa-plus lg:hidden"></i></button>',3)]))),(0,l.bF)(b,{timeline:p.timeline},null,8,["timeline"])])),[[v,w.loadMore,"bottom"]]),(0,l.bF)(x)])}var p=r(146),w=r(4039);function m(e,t,r,o,i,n){const s=(0,l.g2)("Tweet"),a=(0,l.g2)("Retweet");return(0,l.uX)(),(0,l.CE)("div",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.timeline,(e=>((0,l.uX)(),(0,l.CE)("div",{key:e.id},[e.retweeted_by&&""!==e.retweeted_by?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(s,{key:0,tweet:e},null,8,["tweet"])),e.retweeted_by&&""!==e.retweeted_by?((0,l.uX)(),(0,l.Wv)(a,{key:1,tweet:e},null,8,["tweet"])):(0,l.Q3)("",!0)])))),128))])}var g=r(652),b=r(5481),x={name:"Timeline",props:["timeline","profile","timelineCursor"],components:{Tweet:g.A,Retweet:b.A}},v=r(6262);const y=(0,v.A)(x,[["render",m]]);var k=y,C=r(5587),L=r(6278),T={name:"Home",components:{SideNav:p.A,DefaultRightBar:w.A,Timeline:k,Loader:C.A},data(){return{tweet:{text:"",root_id:""},loading:!0,profile:{},timeline:[],timelineCursor:""}},methods:{...(0,L.i0)("warpnet",["getOwnerProfile","getMyTimeline","createTweet"]),async addNewTweet(){if(!this.tweet.text)return;await this.createTweet(this.tweet.text),this.tweet.text="";const e=await this.getMyTimeline(20,this.timelineCursor);this.timeline=e.tweets||[],this.timelineCursor=e.cursor},async loadMore(){const e=await this.getMyTimeline(20,this.timelineCursor);this.timeline=this.timeline.concat(e.tweets||[]),this.timelineCursor=e.cursor}},async created(){try{this.timeline.length>0&&(this.loading=!1),this.profile=await this.getOwnerProfile()||{};const e=await this.getMyTimeline(20,this.timelineCursor);this.timeline=e.tweets||[],this.timelineCursor=e.cursor,this.loading=!1}catch(e){console.error("Failed to load home page:",e),this.loading=!1}}};const F=(0,v.A)(T,[["render",h]]);var P=F},6319:function(e,t,r){var l=r(8551),o=r(9539);e.exports=function(e,t,r,i){try{return i?t(l(r)[0],r[1]):t(r)}catch(n){o(e,"throw",n)}}},2529:function(e){e.exports=function(e,t){return{value:e,done:t}}},6279:function(e,t,r){var l=r(6840);e.exports=function(e,t,r){for(var o in t)l(e,o,t[o],r);return e}},9462:function(e,t,r){var l=r(9565),o=r(2360),i=r(6699),n=r(6279),s=r(8227),a=r(1181),u=r(5966),c=r(7657).IteratorPrototype,d=r(2529),f=r(9539),h=s("toStringTag"),p="IteratorHelper",w="WrapForValidIterator",m=a.set,g=function(e){var t=a.getterFor(e?w:p);return n(o(c),{next:function(){var r=t(this);if(e)return r.nextHandler();if(r.done)return d(void 0,!0);try{var l=r.nextHandler();return r.returnHandlerResult?l:d(l,r.done)}catch(o){throw r.done=!0,o}},return:function(){var r=t(this),o=r.iterator;if(r.done=!0,e){var i=u(o,"return");return i?l(i,o):d(void 0,!0)}if(r.inner)try{f(r.inner.iterator,"normal")}catch(n){return f(o,"throw",n)}return o&&f(o,"normal"),d(void 0,!0)}})},b=g(!0),x=g(!1);i(x,h,"Iterator Helper"),e.exports=function(e,t,r){var l=function(l,o){o?(o.iterator=l.iterator,o.next=l.next):o=l,o.type=t?w:p,o.returnHandlerResult=!!r,o.nextHandler=e,o.counter=0,o.done=!1,m(this,o)};return l.prototype=t?b:x,l}},2489:function(e,t,r){var l=r(6518),o=r(9565),i=r(9306),n=r(8551),s=r(1767),a=r(9462),u=r(6319),c=r(6395),d=a((function(){var e,t,r,l=this.iterator,i=this.predicate,s=this.next;while(1){if(e=n(o(s,l)),t=this.done=!!e.done,t)return;if(r=e.value,u(l,i,[r,this.counter++],!0))return r}}));l({target:"Iterator",proto:!0,real:!0,forced:c},{filter:function(e){return n(this),i(e),new d(s(this),{predicate:e})}})}}]);
//# sourceMappingURL=home.bf1327ba.js.map