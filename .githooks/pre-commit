#!/bin/bash

FILE="version"

if [ ! -f "$FILE" ]; then
    echo "Version file not found!"
    exit 1
fi

CURRENT_VERSION=$(cat $FILE)
IFS='.' read -r MAJOR MINOR PATCH <<< "$CURRENT_VERSION"
PATCH=$((PATCH + 1))
NEW_VERSION="$MAJOR.$MINOR.$PATCH"
echo "$NEW_VERSION" > $FILE
git add .
git tag -a "v$NEW_VERSION" -m "Release version $NEW_VERSION"
echo "Version updated to $NEW_VERSION and tag created."