(function(){var e={5358:function(e,t,s){var n={"./af":5177,"./af.js":5177,"./ar":1509,"./ar-dz":1488,"./ar-dz.js":1488,"./ar-kw":8676,"./ar-kw.js":8676,"./ar-ly":2353,"./ar-ly.js":2353,"./ar-ma":4496,"./ar-ma.js":4496,"./ar-ps":6947,"./ar-ps.js":6947,"./ar-sa":2682,"./ar-sa.js":2682,"./ar-tn":9756,"./ar-tn.js":9756,"./ar.js":1509,"./az":5533,"./az.js":5533,"./be":8959,"./be.js":8959,"./bg":7777,"./bg.js":7777,"./bm":4903,"./bm.js":4903,"./bn":1290,"./bn-bd":7357,"./bn-bd.js":7357,"./bn.js":1290,"./bo":1545,"./bo.js":1545,"./br":1470,"./br.js":1470,"./bs":4429,"./bs.js":4429,"./ca":7306,"./ca.js":7306,"./cs":6464,"./cs.js":6464,"./cv":3635,"./cv.js":3635,"./cy":4226,"./cy.js":4226,"./da":3601,"./da.js":3601,"./de":7853,"./de-at":6111,"./de-at.js":6111,"./de-ch":4697,"./de-ch.js":4697,"./de.js":7853,"./dv":708,"./dv.js":708,"./el":4691,"./el.js":4691,"./en-au":3872,"./en-au.js":3872,"./en-ca":8298,"./en-ca.js":8298,"./en-gb":6195,"./en-gb.js":6195,"./en-ie":6584,"./en-ie.js":6584,"./en-il":5543,"./en-il.js":5543,"./en-in":9033,"./en-in.js":9033,"./en-nz":9402,"./en-nz.js":9402,"./en-sg":3004,"./en-sg.js":3004,"./eo":2934,"./eo.js":2934,"./es":7650,"./es-do":838,"./es-do.js":838,"./es-mx":7730,"./es-mx.js":7730,"./es-us":6575,"./es-us.js":6575,"./es.js":7650,"./et":3035,"./et.js":3035,"./eu":3508,"./eu.js":3508,"./fa":119,"./fa.js":119,"./fi":527,"./fi.js":527,"./fil":5995,"./fil.js":5995,"./fo":2477,"./fo.js":2477,"./fr":5498,"./fr-ca":6435,"./fr-ca.js":6435,"./fr-ch":7892,"./fr-ch.js":7892,"./fr.js":5498,"./fy":7071,"./fy.js":7071,"./ga":1734,"./ga.js":1734,"./gd":217,"./gd.js":217,"./gl":7329,"./gl.js":7329,"./gom-deva":2124,"./gom-deva.js":2124,"./gom-latn":3383,"./gom-latn.js":3383,"./gu":5050,"./gu.js":5050,"./he":1713,"./he.js":1713,"./hi":3861,"./hi.js":3861,"./hr":6308,"./hr.js":6308,"./hu":609,"./hu.js":609,"./hy-am":7160,"./hy-am.js":7160,"./id":4063,"./id.js":4063,"./is":9374,"./is.js":9374,"./it":8383,"./it-ch":1827,"./it-ch.js":1827,"./it.js":8383,"./ja":3827,"./ja.js":3827,"./jv":9722,"./jv.js":9722,"./ka":1794,"./ka.js":1794,"./kk":7088,"./kk.js":7088,"./km":6870,"./km.js":6870,"./kn":4451,"./kn.js":4451,"./ko":3164,"./ko.js":3164,"./ku":8174,"./ku-kmr":6181,"./ku-kmr.js":6181,"./ku.js":8174,"./ky":8474,"./ky.js":8474,"./lb":9680,"./lb.js":9680,"./lo":5867,"./lo.js":5867,"./lt":5766,"./lt.js":5766,"./lv":9532,"./lv.js":9532,"./me":8076,"./me.js":8076,"./mi":1848,"./mi.js":1848,"./mk":306,"./mk.js":306,"./ml":3739,"./ml.js":3739,"./mn":9053,"./mn.js":9053,"./mr":6169,"./mr.js":6169,"./ms":3386,"./ms-my":2297,"./ms-my.js":2297,"./ms.js":3386,"./mt":7075,"./mt.js":7075,"./my":2264,"./my.js":2264,"./nb":2274,"./nb.js":2274,"./ne":8235,"./ne.js":8235,"./nl":2572,"./nl-be":3784,"./nl-be.js":3784,"./nl.js":2572,"./nn":4566,"./nn.js":4566,"./oc-lnc":9330,"./oc-lnc.js":9330,"./pa-in":9849,"./pa-in.js":9849,"./pl":4418,"./pl.js":4418,"./pt":9834,"./pt-br":8303,"./pt-br.js":8303,"./pt.js":9834,"./ro":4457,"./ro.js":4457,"./ru":2271,"./ru.js":2271,"./sd":1221,"./sd.js":1221,"./se":3478,"./se.js":3478,"./si":7538,"./si.js":7538,"./sk":5784,"./sk.js":5784,"./sl":6637,"./sl.js":6637,"./sq":6794,"./sq.js":6794,"./sr":5719,"./sr-cyrl":3322,"./sr-cyrl.js":3322,"./sr.js":5719,"./ss":6e3,"./ss.js":6e3,"./sv":1011,"./sv.js":1011,"./sw":748,"./sw.js":748,"./ta":1025,"./ta.js":1025,"./te":1885,"./te.js":1885,"./tet":8861,"./tet.js":8861,"./tg":6571,"./tg.js":6571,"./th":5802,"./th.js":5802,"./tk":9527,"./tk.js":9527,"./tl-ph":9231,"./tl-ph.js":9231,"./tlh":1052,"./tlh.js":1052,"./tr":5096,"./tr.js":5096,"./tzl":9846,"./tzl.js":9846,"./tzm":1765,"./tzm-latn":7711,"./tzm-latn.js":7711,"./tzm.js":1765,"./ug-cn":8414,"./ug-cn.js":8414,"./uk":6618,"./uk.js":6618,"./ur":158,"./ur.js":158,"./uz":7609,"./uz-latn":4856,"./uz-latn.js":4856,"./uz.js":7609,"./vi":1135,"./vi.js":1135,"./x-pseudo":4051,"./x-pseudo.js":4051,"./yo":2218,"./yo.js":2218,"./zh-cn":2648,"./zh-cn.js":2648,"./zh-hk":1632,"./zh-hk.js":1632,"./zh-mo":1541,"./zh-mo.js":1541,"./zh-tw":304,"./zh-tw.js":304};function o(e){var t=a(e);return s(t)}function a(e){if(!s.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=a,e.exports=o,o.id=5358},656:function(e,t,s){"use strict";var n=s(3751),o=s(641);const a={id:"app",class:"w-full h-full"};function i(e,t,s,n,i,r){const l=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",a,[((0,o.uX)(),(0,o.Wv)(l,{key:e.$route.fullPath}))])}var r={name:"App"},l=s(6262);const c=(0,l.A)(r,[["render",i]]);var d=c,u=s(2849),m=s(6278),p=s(6095),f={USER_LOGIN(e,t){e.user=t,e.loggedIn=!0},USER_LOGOUT(e){e.loggedIn=!1,e.user=void 0,e.profile=null},USER_SIGNUP(e,t){e.user=t}},g={loggedIn:e=>e.loggedIn,user:e=>e.user};const w=()=>({loggedIn:!1,user:void 0});var h={namespaced:!0,actions:p.A,mutations:f,getters:g,state:w},T={setSignupStep({commit:e},t){e("SIGNUP_STEP_SET",t)}},_={SIGNUP_STEP_SET(e,t){e.step=t}},E={showModal:e=>e.step};const b=()=>({step:""});var y={namespaced:!0,actions:T,mutations:_,getters:E,state:b};s(7642),s(8004),s(3853),s(5876),s(2475),s(5024),s(1698);const v=async()=>{const e=await API.graphql({query:gql`
      query getMyProfile {
        getMyProfile {
          id
          username
          avatar
          background_image
          bio
          location
          website
          birthdate
          created_at
          followers_num
          following_num
          tweets_num
          likes_num
        }
      }
    `,authMode:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_APPSYNC_AUTHENTICATION_TYPE}),t=e.data.getMyProfile;return t.avatar=t.avatar||"default_profile.png",t},k=async e=>{const t=await API.graphql({query:gql`
      query getProfile($username: String!) {
        getProfile(username: $username) {
          id
          name
          username
          avatar
          background_image
          bio
          location
          website
          birthdate
          created_at
          followers_num
          following_num
          tweets_num
          likes_num
          following
          followedBy
        }
      }
    `,variables:{username:e},authMode:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_APPSYNC_AUTHENTICATION_TYPE}),s=t.data.getProfile||{};return s.avatar=s.avatar||"default_profile.png",s},A=async(e,t)=>{const s=await API.graphql({query:gql`
      query getMyTimeline($limit: Int!, $nextToken: String) {
        getMyTimeline(limit: $limit, nextToken: $nextToken) {
          nextToken
          tweets {
            __typename
            id
            profile {
              id
              name
              username
              avatar
            }
            created_at
            ... on Tweet {
              text
              liked
              likes
              retweeted
              retweets
              replies
            }
            ... on Retweet {
              retweetOf {
                id
                profile {
                  id
                  name
                  username
                  avatar
                }
                created_at
                ... on Tweet {
                  text
                  liked
                  likes
                  retweeted
                  retweets
                  replies
                }
                ... on Reply {
                  text
                  liked
                  likes
                  retweeted
                  retweets
                  replies
                }
              }
            }
            ... on Reply {
              text
              liked
              likes
              retweeted
              retweets
              replies
              inReplyToTweet {
                id
                profile {
                  id
                  name
                  username
                  avatar
                }
                created_at
                ... on Tweet {
                  text
                  liked
                  likes
                  retweeted
                  retweets
                  replies
                }
                ... on Reply {
                  text
                  liked
                  likes
                  retweeted
                  retweets
                  replies
                }
                ... on Retweet {
                  retweetOf {
                    id
                  }
                }
              }
              inReplyToUsers {
                id
                name
                username
                avatar
              }
            }
          }
        }
      }
    `,variables:{limit:e,nextToken:t},authMode:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_APPSYNC_AUTHENTICATION_TYPE});return s.data.getMyTimeline},S=async(e,t,s)=>{const n=await API.graphql({query:gql`
      query getTweets($userId: ID!, $limit: Int!, $nextToken: String) {
        getTweets(userId: $userId, limit: $limit, nextToken: $nextToken) {
          nextToken
          tweets {
            ... on Tweet {
              id
              created_at
              text
              liked
              likes
              retweeted
              retweets
              replies
              profile {
                id
                name
                username
                avatar
              }
            }
            ... on Reply {
              text
              liked
              likes
              retweeted
              retweets
              replies
              inReplyToTweet {
                id
                profile {
                  id
                  name
                  username
                  avatar
                }
                created_at
                ... on Tweet {
                  text
                  liked
                  likes
                  retweeted
                  retweets
                  replies
                }
                ... on Reply {
                  text
                  liked
                  likes
                  retweeted
                  retweets
                  replies
                }
              }
              inReplyToUsers {
                id
                name
                username
                avatar
              }
            }
          }
        }
      }
    `,variables:{userId:e,limit:t,nextToken:s},authMode:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_APPSYNC_AUTHENTICATION_TYPE});return n.data.getTweets},P=async(e,t)=>{const s=await API.graphql({query:gql`
      query getImageUploadUrl($extension: String, $contentType: String) {
        getImageUploadUrl(extension: $extension, contentType: $contentType)
      }
    `,variables:{extension:e,contentType:t},authMode:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_APPSYNC_AUTHENTICATION_TYPE});return s.data.getImageUploadUrl},I=async e=>{const t=await API.graphql({query:gql`
      mutation editMyProfile($newProfile: ProfileInput!) {
        editMyProfile(newProfile: $newProfile) {
          background_image
          bio
          created_at
          birthdate
          followers_num
          following_num
          id
          avatar
          likes_num
          location
          name
          username
          tweets_num
          website
        }
      }
    `,variables:{newProfile:e},authMode:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_APPSYNC_AUTHENTICATION_TYPE});return t.data.editMyProfile},x=async e=>{const t=await API.graphql({query:gql`
      mutation tweet($text: String!) {
        tweet(text: $text) {
          created_at
          id
          liked
          likes
          profile {
            avatar
            name
            username
          }
          replies
          retweeted
          retweets
          text
        }
      }
    `,variables:{text:e},authMode:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_APPSYNC_AUTHENTICATION_TYPE});return t.data.tweet},N=async e=>{await API.graphql({query:gql`
      mutation retweet($tweetId: ID!) {
        retweet(tweetId: $tweetId) {
          id
          created_at
        }
      }
    `,variables:{tweetId:e},authMode:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_APPSYNC_AUTHENTICATION_TYPE})},j=async e=>{await API.graphql({query:gql`
      mutation unretweet($tweetId: ID!) {
        unretweet(tweetId: $tweetId)
      }
    `,variables:{tweetId:e},authMode:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_APPSYNC_AUTHENTICATION_TYPE})},M=async e=>{await API.graphql({query:gql`
      mutation like($tweetId: ID!) {
        like(tweetId: $tweetId)
      }
    `,variables:{tweetId:e},authMode:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_APPSYNC_AUTHENTICATION_TYPE})},O=async e=>{await API.graphql({query:gql`
      mutation unlike($tweetId: ID!) {
        unlike(tweetId: $tweetId)
      }
    `,variables:{tweetId:e},authMode:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_APPSYNC_AUTHENTICATION_TYPE})},U=async(e,t)=>{const s=await API.graphql({query:gql`
      mutation reply($tweetId: ID!, $text: String!) {
        reply(tweetId: $tweetId, text: $text) {
          id
          created_at
          liked
          likes
          profile {
            avatar
            name
            username
          }
          replies
          retweeted
          retweets
          text
        }
      }
    `,variables:{tweetId:e,text:t},authMode:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_APPSYNC_AUTHENTICATION_TYPE});return s.data.reply},R=async e=>{await API.graphql({query:gql`
      mutation follow($userId: ID!) {
        follow(userId: $userId)
      }
    `,variables:{userId:e},authMode:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_APPSYNC_AUTHENTICATION_TYPE})},L=async e=>{await API.graphql({query:gql`
      mutation unfollow($userId: ID!) {
        unfollow(userId: $userId)
      }
    `,variables:{userId:e},authMode:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_APPSYNC_AUTHENTICATION_TYPE})},C=async(e,t=10)=>{const s=await API.graphql({query:gql`
      query getFollowers($userId: ID!, $limit: Int!) {
        getFollowers(userId: $userId, limit: $limit) {
          profiles {
            id
            name
            username
            avatar
            bio
            ... on OtherProfile {
              following
              followedBy
            }
          }
          nextToken
        }
      }
    `,variables:{userId:e,limit:t},authMode:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_APPSYNC_AUTHENTICATION_TYPE});return s.data.getFollowers},$=async(e,t=10)=>{const s=await API.graphql({query:gql`
      query getFollowing($userId: ID!, $limit: Int!) {
        getFollowing(userId: $userId, limit: $limit) {
          profiles {
            id
            name
            username
            avatar
            bio
            ... on OtherProfile {
              following
              followedBy
            }
          }
          nextToken
        }
      }
    `,variables:{userId:e,limit:t},authMode:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_APPSYNC_AUTHENTICATION_TYPE});return s.data.getFollowing},D=async(e,t,s,n)=>{const o=void 0;return o.data.search},W=async(e,t,s,n)=>{const o=void 0;return o.data.getHashTag},q=e=>{const t={query:gql`
      subscription onNotified($userId: ID!) {
        onNotified(userId: $userId) {
          ... on Retweeted {
            id
            created_at
            retweetedBy
            tweetId
            retweetId
            type
          }
          ... on Liked {
            id
            created_at
            likedBy
            tweetId
            type
          }
          ... on Mentioned {
            id
            created_at
            mentionedBy
            mentionedByTweetId
            type
          }
          ... on Replied {
            id
            created_at
            repliedBy
            tweetId
            replyTweetId
            type
          }
          ... on DMed {
            id
            message
            created_at
            otherUserId
            type
          }
        }
      }
    `,variables:{userId:e}};return API.graphql(t)},H=async(e,t)=>{const s=await API.graphql({query:gql`
      query listConversations($limit: Int!, $nextToken: String) {
        listConversations(limit: $limit, nextToken: $nextToken) {
          conversations {
            id
            otherUser {
              id
              name
              username
              avatar
              background_image
              bio
              location
              website
              birthdate
              created_at
              followers_num
              following_num
              tweets_num
              likes_num
              following
              followedBy
            }
            lastMessage
            lastModified
          }
          nextToken
        }
      }
    `,variables:{limit:e,nextToken:t},authMode:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_APPSYNC_AUTHENTICATION_TYPE});return s.data.listConversations},V=async(e,t,s)=>{const n=await API.graphql({query:gql`
      query getDirectMessages(
        $otherUserId: ID!
        $limit: Int!
        $nextToken: String
      ) {
        getDirectMessages(
          otherUserId: $otherUserId
          limit: $limit
          nextToken: $nextToken
        ) {
          messages {
            messageId
            message
            timestamp
            from {
              avatar
              username
            }
          }
          nextToken
        }
      }
    `,variables:{otherUserId:e,limit:t,nextToken:s},authMode:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_APPSYNC_AUTHENTICATION_TYPE});return n.data.getDirectMessages},B=async(e,t)=>{const s=await API.graphql({query:gql`
      mutation sendDirectMessage($message: String!, $otherUserId: ID!) {
        sendDirectMessage(message: $message, otherUserId: $otherUserId) {
          id
          message: lastMessage
          lastModified
          otherUser {
            name
            username
            avatar
          }
        }
      }
    `,variables:{message:e,otherUserId:t},authMode:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_APPSYNC_AUTHENTICATION_TYPE});return s.data.sendDirectMessage};var Y={async setProfile({commit:e}){const t=await v();e("PROFILE_SET",t)},async loadProfile({commit:e,rootState:t},s){if(s)if(t.warpnet.profile.username===s){const t=await v();e("PROFILE_SET",t)}else{const t=await k(s);e("PROFILE_SET",t)}},async loadMyTimeline({dispatch:e}){await e("getMyTimeline",10)},async loadTweets({dispatch:e,rootState:t},s){if(s)if(t.warpnet.profile.username===s)await e("getTweets",{userId:t.warpnet.profile.id,limit:10});else{const t=await k(s);await e("getTweets",{userId:t.id,limit:10})}},async getMyTimeline({commit:e},t){const s=await A(t);e("WARPNET_TIMELINE",s)},async createTweet({commit:e,dispatch:t},{text:s}){const n=await x(s);e("WARPNET_CREATE",n),await t("getMyTimeline",10)},async getTweets({commit:e},{userId:t,limit:s,nextToken:n}){const o=await S(t,s,n);e("WARPNET_TIMELINE",o)},async likeTweet(e,t){await M(t)},async unlikeTweet(e,t){await O(t)},async retweetTweet(e,t){await N(t)},async unretweetTweet(e,t){await j(t)},async replyTweet({dispatch:e},{tweetId:t,text:s}){await U(t,s),await e("getMyTimeline",10)},async getImageUploadUrl(e,{extension:t,contentType:s}){return await P(t,s)},async editMyProfile({commit:e},t){const s=await I(t);return e("PROFILE_SET",s),s},async followUser(e,t){await R(t)},async unfollowUser(e,t){await L(t)},async getFollowers({commit:e},{userId:t,limit:s}){const n=await C(t,s);e("WARPNET_FOLLOWERS",n)},async getFollowing({commit:e},{userId:t,limit:s}){const n=await $(t,s);e("WARPNET_FOLLOWING",n)},async loadMoreTweets({commit:e,getters:t},s){if(!t.nextTokenTweets)return;const n=await S(t.profile.id,s,t.nextTokenTweets);e("WARPNET_LOADMORE_TWEETS",n)},async loadMoreMyTimeline({commit:e,getters:t},s){if(!t.nextTokenTweets)return;const n=await A(s,t.nextTokenTweets);e("WARPNET_LOADMORE_TWEETS",n)},async loadSearch({commit:e},{query:t,mode:s,limit:n}){const o=await D(t,s,n);e("WARPNET_SEARCH",o)},async loadMoreSearch({commit:e,getters:t},{query:s,mode:n,limit:o}){if(!t.nextTokenSearch)return;const a=await D(s,n,o,t.nextTokenSearch);e("WARPNET_LOADMORE_SEARCH",a)},resetSearch({commit:e}){const t={results:[],nextToken:void 0};e("WARPNET_SEARCH",t)},async loadSearchHashTag({commit:e},{query:t,mode:s,limit:n}){const o=t||" ",a=await W(o,s,n);e("WARPNET_SEARCH_HASHTAG",a)},async loadMoreSearchHashTag({commit:e,getters:t},{query:s,mode:n,limit:o}){if(!t.nextTokenSearch)return;const a=s||" ",i=await W(a,n,o,t.nextTokenSearch);e("WARPNET_LOADMORE_SEARCH_HASHTAG",i)},resetSearchHashTag({commit:e}){const t={results:[],nextToken:void 0};e("WARPNET_SEARCH_HASHTAG",t)},async subscribeNotifications({commit:e,getters:t,dispatch:s}){if(!t.profile.id||t.subscription)return;const n=(e,t,s)=>{const n=e<t.otherUserId?`${e}_${t.otherUserId}`:`${t.otherUserId}_${e}`;return s&&s.id==n},o=t.profile.id,a=q(o).subscribe({next:async({value:a})=>{const i=a.data.onNotified;"DMed"==i.type?(await s("loadConversations",10),n(o,i,t.conversation)&&await s("getDirectMessages",{limit:10,message:i.message,otherUserId:i.otherUserId}),e("WARPNET_MESSAGES_NEW",i)):(await s("getMyTimeline",10),e("WARPNET_NOTIFICATIONS_NEW",i))}});e("WARPNET_NOTIFICATIONS_SUBSCRIBE",a)},resetNotifications({commit:e}){e("WARPNET_NOTIFICATIONS_RESET")},unsubscribeNotifications({commit:e}){e("WARPNET_NOTIFICATIONS_UNSUBSCRIBE")},async loadConversations({commit:e},t){const s=await H(t);e("WARPNET_CONVERSATIONS_LOAD",s)},resetMessages({commit:e}){e("WARPNET_MESSAGES_RESET")},async getDirectMessages({commit:e},{otherUserId:t,limit:s,nextToken:n}){const o=await V(t,s,n);e("WARPNET_MESSAGES_LOAD",o)},async loadMoreDirectMessages({commit:e,getters:t},{otherUserId:s,limit:n}){if(!t.nextTokenMessages)return;const o=await V(s,n,t.nextTokenMessages);e("WARPNET_LOADMORE_MESSAGES",o)},async sendDirectMessage({commit:e,dispatch:t},{message:s,otherUserId:n}){await B(s,n),await t("loadConversations",10);const o=await V(n,10);e("WARPNET_MESSAGES_LOAD",o)},setActiveConversation({commit:e},t){e("WARPNET_CONVERSATION_ACTIVE_SET",t)},resetState({commit:e}){e("WARPNET_RESET_STATE")}},F={PROFILE_SET(e,t){e.profile=t},WARPNET_TIMELINE(e,{tweets:t,nextToken:s}){e.tweets.tweets=t,e.tweets.nextToken=s},WARPNET_CREATE(e,t){const s=[...e.tweets.tweets];e.tweets.tweets=s.unshift(t)},WARPNET_FOLLOWERS(e,{profiles:t,nextToken:s}){e.followers.followers=t,e.followers.nextToken=s},WARPNET_FOLLOWING(e,{profiles:t,nextToken:s}){e.following.following=t,e.following.nextToken=s},WARPNET_LOADMORE_TWEETS(e,{tweets:t,nextToken:s}){e.tweets.tweets=[...e.tweets.tweets,...t],e.tweets.nextToken=s},WARPNET_SEARCH(e,{results:t,nextToken:s}){e.search.results=t,e.search.nextToken=s},WARPNET_LOADMORE_SEARCH(e,{results:t,nextToken:s}){e.search.results=[...e.search.results,...t],e.search.nextToken=s},WARPNET_SEARCH_HASHTAG(e,{results:t,nextToken:s}){e.search.results=t,e.search.nextToken=s},WARPNET_LOADMORE_SEARCH_HASHTAG(e,{results:t,nextToken:s}){e.search.results=[...e.search.results,...t],e.search.nextToken=s},WARPNET_NOTIFICATIONS_SUBSCRIBE(e,t){e.notifications.subscription=t,e.notifications.newNotifications=0,e.notifications.messages.newMessages=0},WARPNET_NOTIFICATIONS_UNSUBSCRIBE(e){let t=e.notifications.subscription;t&&(t.unsubscribe(),e.notifications.subscription=void 0)},WARPNET_NOTIFICATIONS_NEW(e,t){"Mentioned"===t?.type?e.notifications.mentions=[t,...e.notifications.mentions]:e.notifications.all=[t,...e.notifications.all],e.notifications.newNotifications=e.notifications.newNotifications+1},WARPNET_NOTIFICATIONS_RESET(e){e.notifications.newNotifications=0},WARPNET_CONVERSATIONS_LOAD(e,{conversations:t,nextToken:s}){e.notifications.messages.conversations=t,e.notifications.messages.nextToken=s},WARPNET_MESSAGES_NEW(e,t){let s=e.notifications.messages.conversationsSet,n=e.notifications.messages.active.conversation;const o=e.profile.id<t.otherUserId?`${e.profile.id}_${t.otherUserId}`:`${t.otherUserId}_${e.profile.id}`,a=e=>!e||e.id!==o;a(n)&&(s.has(o)||s.add(o),e.notifications.messages.newMessages=e.notifications.messages.newMessages+1,e.notifications.messages.conversations=[...e.notifications.messages.conversations])},WARPNET_MESSAGES_RESET(e){e.notifications.messages.newMessages=0},WARPNET_MESSAGES_LOAD(e,{messages:t,nextToken:s}){e.notifications.messages.active.messages=t,e.notifications.messages.active.nextTokenMessages=s},WARPNET_LOADMORE_MESSAGES(e,{messages:t,nextToken:s}){e.notifications.messages.active.messages=[...e.notifications.messages.active.messages,...t],e.notifications.messages.active.nextTokenMessages=s},WARPNET_MESSAGES_SEND(e,t){e.notifications.messages.active.messages=[...e.notifications.messages.active.messages,t]},WARPNET_CONVERSATION_ACTIVE_SET(e,t){let s=e.notifications.messages.conversationsSet;s&&t&&s.has(t.id)&&(s.delete(t.id),e.notifications.messages.newMessages=0),e.notifications.messages.conversationsSet=s,e.notifications.messages.active.conversation=t,e.notifications.messages.active.messages=[],e.notifications.messages.active.nextTokenMessages=void 0},WARPNET_RESET_STATE(e){Object.assign(e,{profile:{id:"",created_at:"1970-01-01",avatar:"default_profile.png"},tweets:{tweets:[],nextToken:void 0},followers:{followers:[],nextToken:void 0},following:{following:[],nextToken:void 0},search:{results:[],nextToken:void 0},notifications:{all:[],mentions:[],newNotifications:0,subscription:void 0,messages:{conversations:[],nextToken:void 0,newMessages:0,conversationsSet:new Set,active:{conversation:void 0,messages:[],nextTokenMessages:void 0}}}})}},G=s(5093),z=s.n(G),K={profile:e=>e.profile,tweets:e=>e.tweets.tweets,nextTokenTweets:e=>e.tweets.nextToken,joinedDate:e=>z()(e.profile.created_at).format("MMMM YYYY"),isSelf:e=>t=>e.profile.username===t,followers:e=>e.followers.followers,nextTokenFollowers:e=>e.followers.nextToken,following:e=>e.following.following,nextTokenFollowing:e=>e.following.nextToken,search:e=>e.search.results,nextTokenSearch:e=>e.search.nextToken,searchHashTag:e=>e.search.results,nextTokenSearchHashTag:e=>e.search.nextToken,all:e=>e.notifications.all,mentions:e=>e.notifications.mentions,newNotifications:e=>e.notifications.newNotifications,subscription:e=>e.notifications.subscription,newMessages:e=>e.notifications.messages.newMessages,conversationsSet:e=>e.notifications.messages.conversationsSet,hasNewMessages:e=>t=>{const s=e.notifications.messages.conversationsSet,n=e.notifications.messages.active.conversation;return s.has(t.id)&&(n&&t.id!==n.id||!n)},conversations:e=>e.notifications.messages.conversations,nextTokenConversations:e=>e.notifications.messages.conversations.nextToken,messages:e=>e.notifications.messages.active.messages,nextTokenMessages:e=>e.notifications.messages.active.nextTokenMessages,conversation:e=>e.notifications.messages.active.conversation};const J={profile:{id:"",created_at:"2022-03-27",avatar:"default_profile.png",bio:"",background_image:"",followers_num:0,following_num:0,username:"Anonymous",tweets_num:0,likes_num:0,node_id:""},tweets:{tweets:[],nextToken:void 0},followers:{followers:[],nextToken:void 0},following:{following:[],nextToken:void 0},search:{results:[],nextToken:void 0},notifications:{all:[],mentions:[],newNotifications:0,subscription:void 0,messages:{conversations:[],nextToken:void 0,newMessages:0,conversationsSet:new Set,active:{conversation:void 0,messages:[],nextTokenMessages:void 0}}}},X=()=>({...J});var Q={namespaced:!0,actions:Y,mutations:F,getters:K,state:X};const Z=(0,m.y$)({modules:{authentication:h,signup:y,warpnet:Q,profilePage:Q}});var ee=Z,te={bind:function(e,t){"function"===typeof t.value&&(e.__callback__=s=>{27===s.keyCode&&t.value(s,e)},e.addEventListener("keyup",e.__callback__))},unbind:function(e){e.removeEventListener("keyup",e.__callback__),e.__callback__=null}},se={bind:function(e,t){"function"===typeof t.value&&(e.__callback__=s=>{if("top"==t.arg){if(!e)return;const n=0==e.scrollTop;if(!n)return;t.value(s,e)}else if("bottom"==t.arg){if(!e)return;const n=Math.ceil(e.offsetHeight+e.scrollTop)>=e.scrollHeight;if(!n)return;t.value(s,e)}else t.value(s,e)},e.addEventListener("scroll",e.__callback__))},unbind:function(e){e.removeEventListener("scroll",e.__callback__),e.__callback__=null}},ne=s(5264);s(4028),s(5204);const oe={formatHref:{hashtag:e=>`#/hashtag?m=Latest&hash=${Date.now()}&q=${escape("#"+e.substr(1))}`,mention:e=>`#/${e.substr(1)}`},target:(e,t)=>"mention"==t||"hashtag"==t?void 0:"_blank",truncate:25,ignoreTags:["script","style"]};var ae={bind:function(e){let t=e.innerHTML;e.innerHTML=(0,ne.A)(t,oe)}},ie={install(e){e.directive("escape",te),e.directive("scroll",se),e.directive("linkify",ae)}};function re(e){return 0===z()().diff(e,"days")?z()(e).fromNow(!0):z()(e).format("MMM D")}function le(e){const t=z()(e),s=z()().startOf("day"),n=z()().subtract(1,"day").startOf("day");return t<=n?t.format("MMM D, h:mm A"):t<=s?`Yesterday, ${t.format("h:mm A")}`:t.format("h:mm A")}z().updateLocale("en",{monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],relativeTime:{past:"%ss",s:"Now",ss:"%ss",m:"%dm",mm:"%dm",h:"%dh",hh:"%dh"}}),z().updateLocale("en",{monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var ce={install(e){e.config.globalProperties.$filters={timeago:re,time:le}}};const de={aws_appsync_graphqlEndpoint:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_APPSYNC_GRAPHQL_ENDPOINT,aws_appsync_region:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_APPSYNC_REGION,aws_appsync_authenticationType:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_APPSYNC_AUTHENTICATION_TYPE},ue=(0,n.Ef)(d);ue.config.globalProperties.$appConfig=de,ue.use(u.A),ue.use(ee),ue.use(ie),ue.use(ce),ue.mount("#app")},2849:function(e,t,s){"use strict";s.d(t,{A:function(){return C}});s(4114);var n=s(5220),o=s(641),a=s(3751),i=s(33);const r={class:"flex w-full h-screen flex-col-reverse md:flex-row"},l={class:"flex w-full md:w-1/2 h-full"},c={class:"flex items-center justify-center w-full h-full"},d={class:"w-full md:w-1/2 flex flex-col font-bold p-5 md:p-0"},u={key:0,class:"fixed w-full h-full top-0 left-0 flex items-center justify-center"},m={class:"modal-main bg-white w-11/12 max-w-md mx-auto rounded-lg z-50 overflow-y-auto max-h-full"},p={key:0},f={class:"pl-1 pr-4 py-1 h-12"},g={class:"pt-5 px-8"},w={class:"w-full bg-lightblue border-b-2 border-dark mb-8 p-2"},h={key:1},T={class:"pl-1 pr-4 py-1 h-12"},_={key:2},E={class:"pl-1 pr-4 py-1 h-12"},b={class:"pt-5 px-8"},y={class:"w-full bg-lightblue border-b-2 border-dark p-2"},v=["type"],k={key:3},A={class:"pl-1 pr-4 py-1 h-12"},S={class:"pt-5 px-8"};function P(e,t,s,n,P,I){const x=(0,o.gN)("escape");return(0,o.bo)(((0,o.uX)(),(0,o.CE)("div",r,[t[29]||(t[29]=(0,o.Fv)('<div class="flex w-full md:w-1/2 h-full bg-blue p-5 md:p-0"><div class="flex items-center justify-center w-full h-full"><div class="flex flex-col"><div class="flex items-center"><i class="fas fa-search text-white text-2xl mr-5"></i><p class="text-white font-bold text-xl">Follow your interests.</p></div><div class="flex items-center mt-10"><i class="fas fa-user-friends text-white text-2xl mr-4"></i><p class="text-white font-bold text-xl"> Hear what people are talking about. </p></div><div class="flex items-center mt-10"><i class="fas fa-comment text-white text-2xl mr-5"></i><p class="text-white font-bold text-xl">Join the conversation.</p></div></div></div></div>',1)),(0,o.Lk)("div",l,[(0,o.Lk)("div",c,[(0,o.Lk)("div",d,[t[13]||(t[13]=(0,o.Lk)("p",{class:"text-3xl mb-12"}," Dive deep into the Warp and see what happens... ",-1)),t[14]||(t[14]=(0,o.Lk)("p",null,"Join Warpnet today.",-1)),P.isFirstRun?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[0]||(t[0]=(0,a.D$)((t=>e.setSignupStep("step1")),["prevent"])),class:"rounded-full bg-blue font-bold text-lg text-white mt-4 p-3 hover:bg-darkblue"}," Sign up ")):((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[1]||(t[1]=(0,a.D$)(((...e)=>I.showSignInPage&&I.showSignInPage(...e)),["prevent"])),class:"rounded-full border border-blue bg-white font-bold text-lg text-blue mt-4 p-3 hover:bg-lightblue"}," Log in "))])])]),""!==e.showModal?((0,o.uX)(),(0,o.CE)("div",u,[(0,o.Lk)("div",{class:"absolute w-full h-full bg-gray-900 opacity-50",onClick:t[2]||(t[2]=(0,a.D$)((e=>I.setSignUpStep("")),["prevent"]))}),(0,o.Lk)("div",m,["step1"===e.showModal?((0,o.uX)(),(0,o.CE)("div",p,[(0,o.Lk)("div",f,[(0,o.Lk)("button",{onClick:t[3]||(t[3]=e=>I.setSignUpStep("step2")),class:(0,i.C4)(["rounded-full bg-blue font-bold text-white mt-2 p-1 pl-3 pr-3 relative right-0 float-right hover:bg-darkblue",""+(P.username?"":"opacity-50 cursor-not-allowed")])}," Next ",2),t[15]||(t[15]=(0,o.Lk)("i",{class:"flex justify-center fab text-blue text-2xl mt-2 mb-8"},null,-1))]),(0,o.Lk)("div",g,[t[17]||(t[17]=(0,o.Lk)("div",{class:"flex justify-between items-center pb-8"},[(0,o.Lk)("p",{class:"text-2xl font-bold"},"Create your account")],-1)),(0,o.Lk)("div",w,[t[16]||(t[16]=(0,o.Lk)("p",{class:"text-dark"},"Username",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>P.username=e),class:"w-full bg-lightblue text-lg",type:"text"},null,512),[[a.Jo,P.username]])])])])):(0,o.Q3)("",!0),"step2"===e.showModal?((0,o.uX)(),(0,o.CE)("div",h,[(0,o.Lk)("div",T,[(0,o.Lk)("button",{onClick:t[5]||(t[5]=e=>I.setSignUpStep("step1")),class:"absolute rounded-full p-2 pl-3 hover:bg-lightblue"},t[18]||(t[18]=[(0,o.Lk)("i",{class:"fas fa-arrow-left text-blue"},null,-1)])),(0,o.Lk)("button",{onClick:t[6]||(t[6]=e=>I.setSignUpStep("step3")),class:"rounded-full bg-blue font-bold text-white mt-2 p-1 pl-3 pr-3 relative right-0 float-right hover:bg-darkblue"}," Next "),t[19]||(t[19]=(0,o.Lk)("i",{class:"flex justify-center fab text-blue text-2xl mt-2 mb-8"},null,-1))]),t[20]||(t[20]=(0,o.Fv)('<div class="pt-5 px-8"><div class="flex justify-between items-center pb-8"><p class="text-2xl font-bold">Customize your experience</p></div><div class="mt-5 mb-8"><p class="font-bold text-xl mb-1">Get more out of Warpnet</p><div class="flex justify-between items-top"><p> TODO. </p><input class="mt-1 ml-2 mr-2" type="checkbox"></div></div><div class="mt-5 mb-8"><p class="font-bold text-xl mb-1">Connect with people you know</p><div class="flex justify-between items-top"><p> TODO. </p><input class="mt-1 ml-2 mr-2" type="checkbox"></div></div><div class="mt-5 mb-5"><p class="font-bold text-xl mb-1">Personalized ads</p><div class="flex justify-between items-top"><p> You will always see ads on Warpnet based on your Warpnet activity. When this setting is enabled, Warpnet may further personalise ads from Warpnet advertisers, on and off Warpnet, by combining your Warpnet activity with other online activity and information from our partners. </p><input class="mt-1 ml-2 mr-2" type="checkbox"></div></div></div>',1))])):(0,o.Q3)("",!0),"step3"===e.showModal?((0,o.uX)(),(0,o.CE)("div",_,[(0,o.Lk)("div",E,[(0,o.Lk)("button",{onClick:t[7]||(t[7]=e=>I.setSignUpStep("step2")),class:"absolute rounded-full p-2 pl-3 hover:bg-lightblue"},t[21]||(t[21]=[(0,o.Lk)("i",{class:"fas fa-arrow-left text-blue"},null,-1)])),(0,o.Lk)("button",{onClick:t[8]||(t[8]=e=>I.setSignUpStep("step4")),class:"rounded-full bg-blue font-bold text-white mt-2 p-1 pl-3 pr-3 relative right-0 float-right hover:bg-darkblue"}," Next "),t[22]||(t[22]=(0,o.Lk)("i",{class:"flex justify-center fab text-blue text-2xl mt-2 mb-8"},null,-1))]),(0,o.Lk)("div",b,[t[24]||(t[24]=(0,o.Lk)("div",{class:"flex justify-between items-center pb-4"},[(0,o.Lk)("p",{class:"text-2xl font-bold"},"You'll need a password")],-1)),(0,o.Lk)("div",y,[t[23]||(t[23]=(0,o.Lk)("p",{class:"leading-tight text-dark"},"Password",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>P.password=e),class:"w-full bg-lightblue text-lg",type:""+(P.revealPassword?"text":"password")},null,8,v),[[a.hp,P.password]])]),(0,o.Lk)("button",{onClick:t[10]||(t[10]=e=>P.revealPassword=!P.revealPassword),class:"text-blue pl-2"}," Reveal password ")])])):(0,o.Q3)("",!0),"step4"===e.showModal?((0,o.uX)(),(0,o.CE)("div",k,[(0,o.Lk)("div",A,[(0,o.Lk)("button",{onClick:t[11]||(t[11]=e=>I.setSignUpStep("step3")),class:"absolute rounded-full p-2 pl-3 hover:bg-lightblue"},t[25]||(t[25]=[(0,o.Lk)("i",{class:"fas fa-arrow-left text-blue"},null,-1)])),t[26]||(t[26]=(0,o.Lk)("p",{class:"flex items-start ml-12 p-2 text-xl font-extrabold"}," Step 4 of 5 ",-1))]),(0,o.Lk)("div",S,[t[27]||(t[27]=(0,o.Lk)("div",{class:"flex justify-between items-center pb-8"},[(0,o.Lk)("p",{class:"text-2xl font-bold"},"Create your account")],-1)),t[28]||(t[28]=(0,o.Lk)("p",null,[(0,o.eW)(" By signing up, you agree to our "),(0,o.Lk)("a",{href:"#",class:"text-blue"},"Terms"),(0,o.eW)(", "),(0,o.Lk)("a",{href:"#",class:"text-blue"},"Privacy Policy"),(0,o.eW)(" and ")],-1)),(0,o.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>I.signMeUp&&I.signMeUp(...e)),class:"w-full rounded-full mt-4 py-3 bg-blue text-white font-bold hover:bg-darkblue"}," Sign up ")])])):(0,o.Q3)("",!0)])])):(0,o.Q3)("",!0)])),[[x,I.esc]])}var I=s(6278),x={name:"Root",data(){return{username:"",password:"",revealPassword:!1,isFirstRun:!1}},mounted(){this.isFirstRun=window.isFirstRun||!1,console.log("Is first run:",this.isFirstRun)},computed:{...(0,I.L8)("signup",["showModal"]),...(0,I.L8)("authentication",["user"])},methods:{showSignInPage(){this.$router.push("LogIn")},...(0,I.i0)("signup",["setSignupStep"]),...(0,I.i0)("authentication",["signInUser","logoutUser"]),async signMeUp(){try{await this.signInUser({username:this.username,password:this.password}),this.setSignupStep("step5")}catch(e){this.logoutUser(),alert("Error signing up, please check console for error detail"),console.log("error signing up:",e)}},setSignUpStep(e){switch(e){case"step2":if(!this.username)return;break;case"step4":break}this.setSignupStep(e)},esc(){this.setSignupStep("")}}},N=s(6262);const j=(0,N.A)(x,[["render",P]]);var M=j,O=(s(8992),s(7550),async(e,t,s)=>{const n=e.matched.some((e=>e.meta.protected)),o=sessionStorage.getItem("owner");!n||o?s():s("/")});const U=[{path:"/",name:"Root",component:M},{path:"/login",name:"Login",component:()=>s.e(966).then(s.bind(s,5278))},{path:"/home",name:"Home",component:()=>Promise.all([s.e(812),s.e(962)]).then(s.bind(s,2610)),meta:{protected:!0}},{path:"/search",name:"Search",component:()=>Promise.all([s.e(812),s.e(187)]).then(s.bind(s,7884)),meta:{protected:!0}},{path:"/hashtag",name:"Hashtag",component:()=>Promise.all([s.e(812),s.e(541)]).then(s.bind(s,850)),meta:{protected:!0}},{path:"/notifications",name:"Notifications",component:()=>s.e(893).then(s.bind(s,5960)),meta:{protected:!0}},{path:"/messages",name:"Messages",component:()=>s.e(871).then(s.bind(s,3745)),props:!0,meta:{protected:!0}},{path:"/:username",name:"Profile",component:()=>Promise.all([s.e(812),s.e(138)]).then(s.bind(s,5043)),meta:{protected:!0}},{path:"/:username/followers",name:"Followers",component:()=>Promise.all([s.e(342),s.e(596)]).then(s.bind(s,8672)),props:!0,meta:{protected:!0}},{path:"/:username/following",name:"Following",component:()=>Promise.all([s.e(342),s.e(856)]).then(s.bind(s,5626)),props:!0,meta:{protected:!0}}],R=(0,n.aE)({history:(0,n.LA)(),routes:U});R.beforeEach(O);const L=R.push;R.push=function(e,t,s){return t||s?L.call(this,e,t,s):L.call(this,e).catch((e=>(0,n.Pq)(e,n.$c.duplicated)?e:Promise.reject(e)))};var C=R},6095:function(e,t,s){"use strict";s.d(t,{m:function(){return c},A:function(){return d}});s(4114);var n=s(2849),o=(s(6573),s(8100),s(7936),s(7467),s(4732),s(9577),s(7526)),a=s(5380),i=s(8287);class r{constructor(e){this.dh=a.getDiffieHellman("modp14"),this.dh.generateKeys(),this.url=e,this.publicKey=this.dh.getPublicKey(),this.aesKey=null,this.callback=null,this.socket=null}splitMessage(e){let t=e.split(":");return 2!==t.length&&console.error("Invalid message format:",e),t}async deriveKey(e){const t=await crypto.subtle.importKey("raw",e,"HKDF",!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"HKDF",salt:(new TextEncoder).encode("TODO"),info:new Uint8Array,hash:"SHA-256"},t,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])}async encryptMessage(e,t){const s=crypto.getRandomValues(new Uint8Array(12)),n=await crypto.subtle.encrypt({name:"AES-GCM",iv:s},e,(new TextEncoder).encode(t));return{ciphertext:i.Buffer.from(new Uint8Array(n)),nonce:i.Buffer.from(s)}}async decryptMessage(e,t,s){const n=await crypto.subtle.decrypt({name:"AES-GCM",iv:s},e,t);return(new TextDecoder).decode(n)}async onMessage(e){console.log("Message received:",e.data);const t="string"===typeof e.data?e.data:JSON.stringify(e.data),s=i.Buffer.from(t,"base64");if(!this.aesKey){console.log("Received server public key");const e=this.dh.computeSecret(s);return this.aesKey=await this.deriveKey(e),void console.log("Shared secret established.")}const[n,a]=this.splitMessage(t),r=i.Buffer.from(n,"base64"),l=i.Buffer.from(a,"base64");let c="";try{c=await this.decryptMessage(this.aesKey,r,l),console.log("Decrypted message:",c)}catch(f){return void console.error("Error decrypting message:",f.message)}if(console.log("Decrypted message:",c),!this.callback)return void console.log("No callback provided.");const d=this.callback(c);if(!d)return;const{ciphertext:u,nonce:m}=await this.encryptMessage(this.aesKey,d),p=`${o.fromByteArray(u)}:${o.fromByteArray(m)}`;this.socket.send(p)}onError(e){console.error("WebSocket error:",e)}onClose(){console.log("WebSocket connection closed")}close(){this.socket&&(this.socket.removeEventListener("open",this.onOpen.bind(this)),this.socket.removeEventListener("close",this.onClose.bind(this)),this.socket.removeEventListener("message",this.onMessage.bind(this)),this.socket.removeEventListener("error",this.onError.bind(this)),this.socket.close(),this.socket=null)}connect(){console.log("connect called");try{this.socket=new WebSocket(this.url),this.socket.addEventListener("open",this.onOpen.bind(this)),this.socket.addEventListener("close",this.onClose.bind(this)),this.socket.addEventListener("message",this.onMessage.bind(this)),this.socket.addEventListener("error",this.onError.bind(this))}catch(e){console.error("Error while connecting WebSocket:",e)}}onOpen(){console.log("WebSocket connection opened"),this.socket.send(this.publicKey.toString("base64")),console.log("Public key is sent.")}setupCallback(e){this.callback=e}async sendMessage(e){if(!this.aesKey)throw console.log("Sending message: not authenticated!"),new Error("Not authenticated!");if(this.socket.readyState!==WebSocket.OPEN)return void console.error("WebSocket is not open");const{ciphertext:t,nonce:s}=await this.encryptMessage(this.aesKey,e),n=`${o.fromByteArray(t)}:${o.fromByteArray(s)}`;await this.socket.send(n)}}const l=new r("ws://localhost:4002/v1/api/ws");function c(){l.socket&&l.socket.readyState===WebSocket.OPEN?console.log("WebSocket is already connected."):(l.connect(),l.setupCallback((async e=>{console.log(e),sessionStorage.setItem("token",e.data.token),sessionStorage.setItem("owner",e.data.user)})))}var d={client:l,loginUser({commit:e},t){e("USER_LOGIN",t)},async logoutUser({commit:e,dispatch:t}){await l.sendMessage(JSON.stringify({message_type:"LogoutMessage",token:sessionStorage.getItem("token")})),l.close(),e("USER_LOGOUT"),sessionStorage.clear(),t("signup/setSignupStep","",{root:!0}),t("warpnet/unsubscribeNotifications",null,{root:!0}),t("warpnet/resetState",null,{root:!0}),t("profilePage/resetState",null,{root:!0}),n.A.push("/")},async signInUser({dispatch:e,commit:t},s){await l.sendMessage(JSON.stringify({message_type:"LoginMessage",username:s.username,password:s.password}));while(1){let e=sessionStorage.getItem("token");if(e){await new Promise((e=>setTimeout(e,200)));break}}let o=sessionStorage.getItem("owner");t("USER_SIGNUP",o),await e("loginUser",o),await e("warpnet/setProfile",o,null,{root:!0}),await e("warpnet/subscribeNotifications",null,{root:!0}),n.A.push({name:"Home"})},async loginUserIfAlreadyAuthenticated({dispatch:e}){const t=sessionStorage.getItem("owner");t&&(console.log("user is logged in already"),await e("loginUser",t),await e("warpnet/setProfile",null,{root:!0}),await e("warpnet/subscribeNotifications",null,{root:!0}))}}},7790:function(){},3776:function(){}},t={};function s(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(a.exports,a,a.exports,s),a.loaded=!0,a.exports}s.m=e,function(){var e=[];s.O=function(t,n,o,a){if(!n){var i=1/0;for(d=0;d<e.length;d++){n=e[d][0],o=e[d][1],a=e[d][2];for(var r=!0,l=0;l<n.length;l++)(!1&a||i>=a)&&Object.keys(s.O).every((function(e){return s.O[e](n[l])}))?n.splice(l--,1):(r=!1,a<i&&(i=a));if(r){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,o,a]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){s.f={},s.e=function(e){return Promise.all(Object.keys(s.f).reduce((function(t,n){return s.f[n](e,t),t}),[]))}}(),function(){s.u=function(e){return"js/"+({138:"profile",187:"search",541:"hashtag",596:"followers",856:"following",871:"messages",893:"notifications",962:"home",966:"login"}[e]||e)+"."+{138:"02e73cd5",187:"ffd6851f",342:"cb27b8c5",541:"cd02e787",596:"33a74959",812:"9158bb2b",856:"724cfe01",871:"63a6ad05",893:"bfd656a0",962:"e96e8c6d",966:"c42f49a3"}[e]+".js"}}(),function(){s.miniCssF=function(e){}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="warpnet-frontend:";s.l=function(n,o,a,i){if(e[n])e[n].push(o);else{var r,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==t+a){r=u;break}}r||(l=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,s.nc&&r.setAttribute("nonce",s.nc),r.setAttribute("data-webpack",t+a),r.src=n),e[n]=[o];var m=function(t,s){r.onerror=r.onload=null,clearTimeout(p);var o=e[n];if(delete e[n],r.parentNode&&r.parentNode.removeChild(r),o&&o.forEach((function(e){return e(s)})),t)return t(s)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=m.bind(null,r.onerror),r.onload=m.bind(null,r.onload),l&&document.head.appendChild(r)}}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){s.p="/"}(),function(){var e={524:0};s.f.j=function(t,n){var o=s.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var a=new Promise((function(s,n){o=e[t]=[s,n]}));n.push(o[2]=a);var i=s.p+s.u(t),r=new Error,l=function(n){if(s.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var a=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;r.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",r.name="ChunkLoadError",r.type=a,r.request=i,o[1](r)}};s.l(i,l,"chunk-"+t,t)}},s.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,a,i=n[0],r=n[1],l=n[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(o in r)s.o(r,o)&&(s.m[o]=r[o]);if(l)var d=l(s)}for(t&&t(n);c<i.length;c++)a=i[c],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(d)},n=self["webpackChunkwarpnet_frontend"]=self["webpackChunkwarpnet_frontend"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=s.O(void 0,[504],(function(){return s(656)}));n=s.O(n)})();
//# sourceMappingURL=app.f382192c.js.map